function Yw(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(n,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),s}var xx={exports:{}},Pl={},vx={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pa=Symbol.for("react.element"),Qw=Symbol.for("react.portal"),Zw=Symbol.for("react.fragment"),ej=Symbol.for("react.strict_mode"),tj=Symbol.for("react.profiler"),sj=Symbol.for("react.provider"),nj=Symbol.for("react.context"),rj=Symbol.for("react.forward_ref"),ij=Symbol.for("react.suspense"),aj=Symbol.for("react.memo"),oj=Symbol.for("react.lazy"),im=Symbol.iterator;function lj(e){return e===null||typeof e!="object"?null:(e=im&&e[im]||e["@@iterator"],typeof e=="function"?e:null)}var yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bx=Object.assign,wx={};function Qr(e,t,s){this.props=e,this.context=t,this.refs=wx,this.updater=s||yx}Qr.prototype.isReactComponent={};Qr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jx(){}jx.prototype=Qr.prototype;function Yd(e,t,s){this.props=e,this.context=t,this.refs=wx,this.updater=s||yx}var Xd=Yd.prototype=new jx;Xd.constructor=Yd;bx(Xd,Qr.prototype);Xd.isPureReactComponent=!0;var am=Array.isArray,Sx=Object.prototype.hasOwnProperty,Qd={current:null},kx={key:!0,ref:!0,__self:!0,__source:!0};function Nx(e,t,s){var n,r={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)Sx.call(t,n)&&!kx.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Pa,type:e,key:a,ref:o,props:r,_owner:Qd.current}}function cj(e,t){return{$$typeof:Pa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pa}function uj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var om=/\/+/g;function gc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uj(""+e.key):t.toString(36)}function Po(e,t,s,n,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Pa:case Qw:o=!0}}if(o)return o=e,r=r(o),e=n===""?"."+gc(o,0):n,am(r)?(s="",e!=null&&(s=e.replace(om,"$&/")+"/"),Po(r,t,s,"",function(u){return u})):r!=null&&(Zd(r)&&(r=cj(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(om,"$&/")+"/")+e)),t.push(r)),1;if(o=0,n=n===""?".":n+":",am(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+gc(a,l);o+=Po(a,t,s,c,r)}else if(c=lj(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+gc(a,l++),o+=Po(a,t,s,c,r);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function to(e,t,s){if(e==null)return e;var n=[],r=0;return Po(e,n,"","",function(a){return t.call(s,a,r++)}),n}function dj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ht={current:null},Ao={transition:null},hj={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:Ao,ReactCurrentOwner:Qd};function _x(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:to,forEach:function(e,t,s){to(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return to(e,function(){t++}),t},toArray:function(e){return to(e,function(t){return t})||[]},only:function(e){if(!Zd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=Qr;me.Fragment=Zw;me.Profiler=tj;me.PureComponent=Yd;me.StrictMode=ej;me.Suspense=ij;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hj;me.act=_x;me.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=bx({},e.props),r=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Qd.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Sx.call(t,c)&&!kx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Pa,type:e.type,key:r,ref:a,props:n,_owner:o}};me.createContext=function(e){return e={$$typeof:nj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sj,_context:e},e.Consumer=e};me.createElement=Nx;me.createFactory=function(e){var t=Nx.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:rj,render:e}};me.isValidElement=Zd;me.lazy=function(e){return{$$typeof:oj,_payload:{_status:-1,_result:e},_init:dj}};me.memo=function(e,t){return{$$typeof:aj,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=Ao.transition;Ao.transition={};try{e()}finally{Ao.transition=t}};me.unstable_act=_x;me.useCallback=function(e,t){return ht.current.useCallback(e,t)};me.useContext=function(e){return ht.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return ht.current.useDeferredValue(e)};me.useEffect=function(e,t){return ht.current.useEffect(e,t)};me.useId=function(){return ht.current.useId()};me.useImperativeHandle=function(e,t,s){return ht.current.useImperativeHandle(e,t,s)};me.useInsertionEffect=function(e,t){return ht.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return ht.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return ht.current.useMemo(e,t)};me.useReducer=function(e,t,s){return ht.current.useReducer(e,t,s)};me.useRef=function(e){return ht.current.useRef(e)};me.useState=function(e){return ht.current.useState(e)};me.useSyncExternalStore=function(e,t,s){return ht.current.useSyncExternalStore(e,t,s)};me.useTransition=function(){return ht.current.useTransition()};me.version="18.3.1";vx.exports=me;var m=vx.exports;const Be=Gd(m),fu=Yw({__proto__:null,default:Be},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fj=m,mj=Symbol.for("react.element"),pj=Symbol.for("react.fragment"),gj=Object.prototype.hasOwnProperty,xj=fj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vj={key:!0,ref:!0,__self:!0,__source:!0};function Ex(e,t,s){var n,r={},a=null,o=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)gj.call(t,n)&&!vj.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:mj,type:e,key:a,ref:o,props:r,_owner:xj.current}}Pl.Fragment=pj;Pl.jsx=Ex;Pl.jsxs=Ex;xx.exports=Pl;var i=xx.exports,Cx={exports:{}},Rt={},Tx={exports:{}},Px={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,O){var D=P.length;P.push(O);e:for(;0<D;){var K=D-1>>>1,se=P[K];if(0<r(se,O))P[K]=O,P[D]=se,D=K;else break e}}function s(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var O=P[0],D=P.pop();if(D!==O){P[0]=D;e:for(var K=0,se=P.length,L=se>>>1;K<L;){var G=2*(K+1)-1,W=P[G],ee=G+1,$=P[ee];if(0>r(W,D))ee<se&&0>r($,W)?(P[K]=$,P[ee]=D,K=ee):(P[K]=W,P[G]=D,K=G);else if(ee<se&&0>r($,D))P[K]=$,P[ee]=D,K=ee;else break e}}return O}function r(P,O){var D=P.sortIndex-O.sortIndex;return D!==0?D:P.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var O=s(u);O!==null;){if(O.callback===null)n(u);else if(O.startTime<=P)n(u),O.sortIndex=O.expirationTime,t(c,O);else break;O=s(u)}}function S(P){if(y=!1,b(P),!v)if(s(c)!==null)v=!0,J(j);else{var O=s(u);O!==null&&B(S,O.startTime-P)}}function j(P,O){v=!1,y&&(y=!1,p(C),C=-1),g=!0;var D=f;try{for(b(O),h=s(c);h!==null&&(!(h.expirationTime>O)||P&&!V());){var K=h.callback;if(typeof K=="function"){h.callback=null,f=h.priorityLevel;var se=K(h.expirationTime<=O);O=e.unstable_now(),typeof se=="function"?h.callback=se:h===s(c)&&n(c),b(O)}else n(c);h=s(c)}if(h!==null)var L=!0;else{var G=s(u);G!==null&&B(S,G.startTime-O),L=!1}return L}finally{h=null,f=D,g=!1}}var N=!1,_=null,C=-1,I=5,M=-1;function V(){return!(e.unstable_now()-M<I)}function Z(){if(_!==null){var P=e.unstable_now();M=P;var O=!0;try{O=_(!0,P)}finally{O?ie():(N=!1,_=null)}}else N=!1}var ie;if(typeof x=="function")ie=function(){x(Z)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,oe=re.port2;re.port1.onmessage=Z,ie=function(){oe.postMessage(null)}}else ie=function(){w(Z,0)};function J(P){_=P,N||(N=!0,ie())}function B(P,O){C=w(function(){P(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,J(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var D=f;f=O;try{return P()}finally{f=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,O){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var D=f;f=P;try{return O()}finally{f=D}},e.unstable_scheduleCallback=function(P,O,D){var K=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?K+D:K):D=K,P){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=D+se,P={id:d++,callback:O,priorityLevel:P,startTime:D,expirationTime:se,sortIndex:-1},D>K?(P.sortIndex=D,t(u,P),s(c)===null&&P===s(u)&&(y?(p(C),C=-1):y=!0,B(S,D-K))):(P.sortIndex=se,t(c,P),v||g||(v=!0,J(j))),P},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(P){var O=f;return function(){var D=f;f=O;try{return P.apply(this,arguments)}finally{f=D}}}})(Px);Tx.exports=Px;var yj=Tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bj=m,At=yj;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ax=new Set,Qi={};function Zn(e,t){$r(e,t),$r(e+"Capture",t)}function $r(e,t){for(Qi[e]=t,e=0;e<t.length;e++)Ax.add(t[e])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mu=Object.prototype.hasOwnProperty,wj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lm={},cm={};function jj(e){return mu.call(cm,e)?!0:mu.call(lm,e)?!1:wj.test(e)?cm[e]=!0:(lm[e]=!0,!1)}function Sj(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kj(e,t,s,n){if(t===null||typeof t>"u"||Sj(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,s,n,r,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ze[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ze[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ze[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ze[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ze[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ze[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ze[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ze[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ze[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var eh=/[\-:]([a-z])/g;function th(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eh,th);Ze[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eh,th);Ze[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eh,th);Ze[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ze[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ze[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function sh(e,t,s,n){var r=Ze.hasOwnProperty(t)?Ze[t]:null;(r!==null?r.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kj(t,s,r,n)&&(s=null),n||r===null?jj(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):r.mustUseProperty?e[r.propertyName]=s===null?r.type===3?!1:"":s:(t=r.attributeName,n=r.attributeNamespace,s===null?e.removeAttribute(t):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var Rs=bj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),hr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),nh=Symbol.for("react.strict_mode"),pu=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),Ix=Symbol.for("react.context"),rh=Symbol.for("react.forward_ref"),gu=Symbol.for("react.suspense"),xu=Symbol.for("react.suspense_list"),ih=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),Ox=Symbol.for("react.offscreen"),um=Symbol.iterator;function fi(e){return e===null||typeof e!="object"?null:(e=um&&e[um]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,xc;function _i(e){if(xc===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);xc=t&&t[1]||""}return`
`+xc+e}var vc=!1;function yc(e,t){if(!e||vc)return"";vc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),a=n.stack.split(`
`),o=r.length-1,l=a.length-1;1<=o&&0<=l&&r[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==a[l]){var c=`
`+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{vc=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?_i(e):""}function Nj(e){switch(e.tag){case 5:return _i(e.type);case 16:return _i("Lazy");case 13:return _i("Suspense");case 19:return _i("SuspenseList");case 0:case 2:case 15:return e=yc(e.type,!1),e;case 11:return e=yc(e.type.render,!1),e;case 1:return e=yc(e.type,!0),e;default:return""}}function vu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fr:return"Fragment";case hr:return"Portal";case pu:return"Profiler";case nh:return"StrictMode";case gu:return"Suspense";case xu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ix:return(e.displayName||"Context")+".Consumer";case Rx:return(e._context.displayName||"Context")+".Provider";case rh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ih:return t=e.displayName||null,t!==null?t:vu(e.type)||"Memo";case qs:t=e._payload,e=e._init;try{return vu(e(t))}catch{}}return null}function _j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vu(t);case 8:return t===nh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function un(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ej(e){var t=Dx(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function no(e){e._valueTracker||(e._valueTracker=Ej(e))}function Lx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=Dx(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function Go(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yu(e,t){var s=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function dm(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=un(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Mx(e,t){t=t.checked,t!=null&&sh(e,"checked",t,!1)}function bu(e,t){Mx(e,t);var s=un(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wu(e,t.type,s):t.hasOwnProperty("defaultValue")&&wu(e,t.type,un(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hm(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function wu(e,t,s){(t!=="number"||Go(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ei=Array.isArray;function Pr(e,t,s,n){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&n&&(e[s].defaultSelected=!0)}else{for(s=""+un(s),t=null,r=0;r<e.length;r++){if(e[r].value===s){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function ju(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fm(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(U(92));if(Ei(s)){if(1<s.length)throw Error(U(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:un(s)}}function $x(e,t){var s=un(t.value),n=un(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function mm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Su(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ro,Ux=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,r){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ro=ro||document.createElement("div"),ro.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ro.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zi(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cj=["Webkit","ms","Moz","O"];Object.keys(Ri).forEach(function(e){Cj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ri[t]=Ri[e]})});function zx(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Ri.hasOwnProperty(e)&&Ri[e]?(""+t).trim():t+"px"}function Vx(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=zx(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,r):e[s]=r}}var Tj=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ku(e,t){if(t){if(Tj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function Nu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _u=null;function ah(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Eu=null,Ar=null,Rr=null;function pm(e){if(e=Ia(e)){if(typeof Eu!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Dl(t),Eu(e.stateNode,e.type,t))}}function qx(e){Ar?Rr?Rr.push(e):Rr=[e]:Ar=e}function Bx(){if(Ar){var e=Ar,t=Rr;if(Rr=Ar=null,pm(e),t)for(e=0;e<t.length;e++)pm(t[e])}}function Wx(e,t){return e(t)}function Hx(){}var bc=!1;function Jx(e,t,s){if(bc)return e(t,s);bc=!0;try{return Wx(e,t,s)}finally{bc=!1,(Ar!==null||Rr!==null)&&(Hx(),Bx())}}function ea(e,t){var s=e.stateNode;if(s===null)return null;var n=Dl(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(U(231,t,typeof s));return s}var Cu=!1;if(ks)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){Cu=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{Cu=!1}function Pj(e,t,s,n,r,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(s,u)}catch(d){this.onError(d)}}var Ii=!1,Yo=null,Xo=!1,Tu=null,Aj={onError:function(e){Ii=!0,Yo=e}};function Rj(e,t,s,n,r,a,o,l,c){Ii=!1,Yo=null,Pj.apply(Aj,arguments)}function Ij(e,t,s,n,r,a,o,l,c){if(Rj.apply(this,arguments),Ii){if(Ii){var u=Yo;Ii=!1,Yo=null}else throw Error(U(198));Xo||(Xo=!0,Tu=u)}}function er(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Kx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gm(e){if(er(e)!==e)throw Error(U(188))}function Oj(e){var t=e.alternate;if(!t){if(t=er(e),t===null)throw Error(U(188));return t!==e?null:e}for(var s=e,n=t;;){var r=s.return;if(r===null)break;var a=r.alternate;if(a===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===s)return gm(r),e;if(a===n)return gm(r),t;a=a.sibling}throw Error(U(188))}if(s.return!==n.return)s=r,n=a;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=a;break}if(l===n){o=!0,n=r,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,n=r;break}if(l===n){o=!0,n=a,s=r;break}l=l.sibling}if(!o)throw Error(U(189))}}if(s.alternate!==n)throw Error(U(190))}if(s.tag!==3)throw Error(U(188));return s.stateNode.current===s?e:t}function Gx(e){return e=Oj(e),e!==null?Yx(e):null}function Yx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Yx(e);if(t!==null)return t;e=e.sibling}return null}var Xx=At.unstable_scheduleCallback,xm=At.unstable_cancelCallback,Dj=At.unstable_shouldYield,Lj=At.unstable_requestPaint,Fe=At.unstable_now,Mj=At.unstable_getCurrentPriorityLevel,oh=At.unstable_ImmediatePriority,Qx=At.unstable_UserBlockingPriority,Qo=At.unstable_NormalPriority,$j=At.unstable_LowPriority,Zx=At.unstable_IdlePriority,Al=null,cs=null;function Fj(e){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Al,e,void 0,(e.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:Vj,Uj=Math.log,zj=Math.LN2;function Vj(e){return e>>>=0,e===0?32:31-(Uj(e)/zj|0)|0}var io=64,ao=4194304;function Ci(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zo(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,r=e.suspendedLanes,a=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=Ci(l):(a&=o,a!==0&&(n=Ci(a)))}else o=s&~r,o!==0?n=Ci(o):a!==0&&(n=Ci(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&r)&&(r=n&-n,a=t&-t,r>=a||r===16&&(a&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-Zt(t),r=1<<s,n|=e[s],t&=~r;return n}function qj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bj(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Zt(a),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=qj(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Pu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function e0(){var e=io;return io<<=1,!(io&4194240)&&(io=64),e}function wc(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Aa(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zt(t),e[t]=s}function Wj(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var r=31-Zt(s),a=1<<r;t[r]=0,n[r]=-1,e[r]=-1,s&=~a}}function lh(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Zt(s),r=1<<n;r&t|e[n]&t&&(e[n]|=t),s&=~r}}var ve=0;function t0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var s0,ch,n0,r0,i0,Au=!1,oo=[],en=null,tn=null,sn=null,ta=new Map,sa=new Map,Hs=[],Hj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vm(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":ta.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(t.pointerId)}}function pi(e,t,s,n,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[r]},t!==null&&(t=Ia(t),t!==null&&ch(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Jj(e,t,s,n,r){switch(t){case"focusin":return en=pi(en,e,t,s,n,r),!0;case"dragenter":return tn=pi(tn,e,t,s,n,r),!0;case"mouseover":return sn=pi(sn,e,t,s,n,r),!0;case"pointerover":var a=r.pointerId;return ta.set(a,pi(ta.get(a)||null,e,t,s,n,r)),!0;case"gotpointercapture":return a=r.pointerId,sa.set(a,pi(sa.get(a)||null,e,t,s,n,r)),!0}return!1}function a0(e){var t=On(e.target);if(t!==null){var s=er(t);if(s!==null){if(t=s.tag,t===13){if(t=Kx(s),t!==null){e.blockedOn=t,i0(e.priority,function(){n0(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ro(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ru(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);_u=n,s.target.dispatchEvent(n),_u=null}else return t=Ia(s),t!==null&&ch(t),e.blockedOn=s,!1;t.shift()}return!0}function ym(e,t,s){Ro(e)&&s.delete(t)}function Kj(){Au=!1,en!==null&&Ro(en)&&(en=null),tn!==null&&Ro(tn)&&(tn=null),sn!==null&&Ro(sn)&&(sn=null),ta.forEach(ym),sa.forEach(ym)}function gi(e,t){e.blockedOn===t&&(e.blockedOn=null,Au||(Au=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,Kj)))}function na(e){function t(r){return gi(r,e)}if(0<oo.length){gi(oo[0],e);for(var s=1;s<oo.length;s++){var n=oo[s];n.blockedOn===e&&(n.blockedOn=null)}}for(en!==null&&gi(en,e),tn!==null&&gi(tn,e),sn!==null&&gi(sn,e),ta.forEach(t),sa.forEach(t),s=0;s<Hs.length;s++)n=Hs[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Hs.length&&(s=Hs[0],s.blockedOn===null);)a0(s),s.blockedOn===null&&Hs.shift()}var Ir=Rs.ReactCurrentBatchConfig,el=!0;function Gj(e,t,s,n){var r=ve,a=Ir.transition;Ir.transition=null;try{ve=1,uh(e,t,s,n)}finally{ve=r,Ir.transition=a}}function Yj(e,t,s,n){var r=ve,a=Ir.transition;Ir.transition=null;try{ve=4,uh(e,t,s,n)}finally{ve=r,Ir.transition=a}}function uh(e,t,s,n){if(el){var r=Ru(e,t,s,n);if(r===null)Ac(e,t,n,tl,s),vm(e,n);else if(Jj(r,e,t,s,n))n.stopPropagation();else if(vm(e,n),t&4&&-1<Hj.indexOf(e)){for(;r!==null;){var a=Ia(r);if(a!==null&&s0(a),a=Ru(e,t,s,n),a===null&&Ac(e,t,n,tl,s),a===r)break;r=a}r!==null&&n.stopPropagation()}else Ac(e,t,n,null,s)}}var tl=null;function Ru(e,t,s,n){if(tl=null,e=ah(n),e=On(e),e!==null)if(t=er(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Kx(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tl=e,null}function o0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mj()){case oh:return 1;case Qx:return 4;case Qo:case $j:return 16;case Zx:return 536870912;default:return 16}default:return 16}}var Ys=null,dh=null,Io=null;function l0(){if(Io)return Io;var e,t=dh,s=t.length,n,r="value"in Ys?Ys.value:Ys.textContent,a=r.length;for(e=0;e<s&&t[e]===r[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===r[a-n];n++);return Io=r.slice(e,1<n?1-n:void 0)}function Oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lo(){return!0}function bm(){return!1}function It(e){function t(s,n,r,a,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?lo:bm,this.isPropagationStopped=bm,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),t}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hh=It(Zr),Ra=Ae({},Zr,{view:0,detail:0}),Xj=It(Ra),jc,Sc,xi,Rl=Ae({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xi&&(xi&&e.type==="mousemove"?(jc=e.screenX-xi.screenX,Sc=e.screenY-xi.screenY):Sc=jc=0,xi=e),jc)},movementY:function(e){return"movementY"in e?e.movementY:Sc}}),wm=It(Rl),Qj=Ae({},Rl,{dataTransfer:0}),Zj=It(Qj),e1=Ae({},Ra,{relatedTarget:0}),kc=It(e1),t1=Ae({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),s1=It(t1),n1=Ae({},Zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r1=It(n1),i1=Ae({},Zr,{data:0}),jm=It(i1),a1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=l1[e])?!!t[e]:!1}function fh(){return c1}var u1=Ae({},Ra,{key:function(e){if(e.key){var t=a1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?o1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fh,charCode:function(e){return e.type==="keypress"?Oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),d1=It(u1),h1=Ae({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sm=It(h1),f1=Ae({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fh}),m1=It(f1),p1=Ae({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),g1=It(p1),x1=Ae({},Rl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),v1=It(x1),y1=[9,13,27,32],mh=ks&&"CompositionEvent"in window,Oi=null;ks&&"documentMode"in document&&(Oi=document.documentMode);var b1=ks&&"TextEvent"in window&&!Oi,c0=ks&&(!mh||Oi&&8<Oi&&11>=Oi),km=" ",Nm=!1;function u0(e,t){switch(e){case"keyup":return y1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mr=!1;function w1(e,t){switch(e){case"compositionend":return d0(t);case"keypress":return t.which!==32?null:(Nm=!0,km);case"textInput":return e=t.data,e===km&&Nm?null:e;default:return null}}function j1(e,t){if(mr)return e==="compositionend"||!mh&&u0(e,t)?(e=l0(),Io=dh=Ys=null,mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return c0&&t.locale!=="ko"?null:t.data;default:return null}}var S1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!S1[e.type]:t==="textarea"}function h0(e,t,s,n){qx(n),t=sl(t,"onChange"),0<t.length&&(s=new hh("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Di=null,ra=null;function k1(e){S0(e,0)}function Il(e){var t=xr(e);if(Lx(t))return e}function N1(e,t){if(e==="change")return t}var f0=!1;if(ks){var Nc;if(ks){var _c="oninput"in document;if(!_c){var Em=document.createElement("div");Em.setAttribute("oninput","return;"),_c=typeof Em.oninput=="function"}Nc=_c}else Nc=!1;f0=Nc&&(!document.documentMode||9<document.documentMode)}function Cm(){Di&&(Di.detachEvent("onpropertychange",m0),ra=Di=null)}function m0(e){if(e.propertyName==="value"&&Il(ra)){var t=[];h0(t,ra,e,ah(e)),Jx(k1,t)}}function _1(e,t,s){e==="focusin"?(Cm(),Di=t,ra=s,Di.attachEvent("onpropertychange",m0)):e==="focusout"&&Cm()}function E1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Il(ra)}function C1(e,t){if(e==="click")return Il(t)}function T1(e,t){if(e==="input"||e==="change")return Il(t)}function P1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ts=typeof Object.is=="function"?Object.is:P1;function ia(e,t){if(ts(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!mu.call(t,r)||!ts(e[r],t[r]))return!1}return!0}function Tm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pm(e,t){var s=Tm(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Tm(s)}}function p0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?p0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function g0(){for(var e=window,t=Go();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Go(e.document)}return t}function ph(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function A1(e){var t=g0(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&p0(s.ownerDocument.documentElement,s)){if(n!==null&&ph(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=s.textContent.length,a=Math.min(n.start,r);n=n.end===void 0?a:Math.min(n.end,r),!e.extend&&a>n&&(r=n,n=a,a=r),r=Pm(s,a);var o=Pm(s,n);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var R1=ks&&"documentMode"in document&&11>=document.documentMode,pr=null,Iu=null,Li=null,Ou=!1;function Am(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ou||pr==null||pr!==Go(n)||(n=pr,"selectionStart"in n&&ph(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Li&&ia(Li,n)||(Li=n,n=sl(Iu,"onSelect"),0<n.length&&(t=new hh("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=pr)))}function co(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var gr={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionend:co("Transition","TransitionEnd")},Ec={},x0={};ks&&(x0=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function Ol(e){if(Ec[e])return Ec[e];if(!gr[e])return e;var t=gr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in x0)return Ec[e]=t[s];return e}var v0=Ol("animationend"),y0=Ol("animationiteration"),b0=Ol("animationstart"),w0=Ol("transitionend"),j0=new Map,Rm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(e,t){j0.set(e,t),Zn(t,[e])}for(var Cc=0;Cc<Rm.length;Cc++){var Tc=Rm[Cc],I1=Tc.toLowerCase(),O1=Tc[0].toUpperCase()+Tc.slice(1);pn(I1,"on"+O1)}pn(v0,"onAnimationEnd");pn(y0,"onAnimationIteration");pn(b0,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(w0,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function Im(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,Ij(n,t,void 0,e),e.currentTarget=null}function S0(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],r=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&r.isPropagationStopped())break e;Im(r,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&r.isPropagationStopped())break e;Im(r,l,u),a=c}}}if(Xo)throw e=Tu,Xo=!1,Tu=null,e}function Se(e,t){var s=t[Fu];s===void 0&&(s=t[Fu]=new Set);var n=e+"__bubble";s.has(n)||(k0(t,e,2,!1),s.add(n))}function Pc(e,t,s){var n=0;t&&(n|=4),k0(s,e,n,t)}var uo="_reactListening"+Math.random().toString(36).slice(2);function aa(e){if(!e[uo]){e[uo]=!0,Ax.forEach(function(s){s!=="selectionchange"&&(D1.has(s)||Pc(s,!1,e),Pc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uo]||(t[uo]=!0,Pc("selectionchange",!1,t))}}function k0(e,t,s,n){switch(o0(t)){case 1:var r=Gj;break;case 4:r=Yj;break;default:r=uh}s=r.bind(null,t,s,e),r=void 0,!Cu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),n?r!==void 0?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):r!==void 0?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function Ac(e,t,s,n,r){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=On(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Jx(function(){var u=a,d=ah(s),h=[];e:{var f=j0.get(e);if(f!==void 0){var g=hh,v=e;switch(e){case"keypress":if(Oo(s)===0)break e;case"keydown":case"keyup":g=d1;break;case"focusin":v="focus",g=kc;break;case"focusout":v="blur",g=kc;break;case"beforeblur":case"afterblur":g=kc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=wm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Zj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=m1;break;case v0:case y0:case b0:g=s1;break;case w0:g=g1;break;case"scroll":g=Xj;break;case"wheel":g=v1;break;case"copy":case"cut":case"paste":g=r1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Sm}var y=(t&4)!==0,w=!y&&e==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var x=u,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,p!==null&&(S=ea(x,p),S!=null&&y.push(oa(x,S,b)))),w)break;x=x.return}0<y.length&&(f=new g(f,v,null,s,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&s!==_u&&(v=s.relatedTarget||s.fromElement)&&(On(v)||v[Ns]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=s.relatedTarget||s.toElement,g=u,v=v?On(v):null,v!==null&&(w=er(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(y=wm,S="onMouseLeave",p="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Sm,S="onPointerLeave",p="onPointerEnter",x="pointer"),w=g==null?f:xr(g),b=v==null?f:xr(v),f=new y(S,x+"leave",g,s,d),f.target=w,f.relatedTarget=b,S=null,On(d)===u&&(y=new y(p,x+"enter",v,s,d),y.target=b,y.relatedTarget=w,S=y),w=S,g&&v)t:{for(y=g,p=v,x=0,b=y;b;b=ar(b))x++;for(b=0,S=p;S;S=ar(S))b++;for(;0<x-b;)y=ar(y),x--;for(;0<b-x;)p=ar(p),b--;for(;x--;){if(y===p||p!==null&&y===p.alternate)break t;y=ar(y),p=ar(p)}y=null}else y=null;g!==null&&Om(h,f,g,y,!1),v!==null&&w!==null&&Om(h,w,v,y,!0)}}e:{if(f=u?xr(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var j=N1;else if(_m(f))if(f0)j=T1;else{j=E1;var N=_1}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=C1);if(j&&(j=j(e,u))){h0(h,j,s,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&wu(f,"number",f.value)}switch(N=u?xr(u):window,e){case"focusin":(_m(N)||N.contentEditable==="true")&&(pr=N,Iu=u,Li=null);break;case"focusout":Li=Iu=pr=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,Am(h,s,d);break;case"selectionchange":if(R1)break;case"keydown":case"keyup":Am(h,s,d)}var _;if(mh)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else mr?u0(e,s)&&(C="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(c0&&s.locale!=="ko"&&(mr||C!=="onCompositionStart"?C==="onCompositionEnd"&&mr&&(_=l0()):(Ys=d,dh="value"in Ys?Ys.value:Ys.textContent,mr=!0)),N=sl(u,C),0<N.length&&(C=new jm(C,e,null,s,d),h.push({event:C,listeners:N}),_?C.data=_:(_=d0(s),_!==null&&(C.data=_)))),(_=b1?w1(e,s):j1(e,s))&&(u=sl(u,"onBeforeInput"),0<u.length&&(d=new jm("onBeforeInput","beforeinput",null,s,d),h.push({event:d,listeners:u}),d.data=_))}S0(h,t)})}function oa(e,t,s){return{instance:e,listener:t,currentTarget:s}}function sl(e,t){for(var s=t+"Capture",n=[];e!==null;){var r=e,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=ea(e,s),a!=null&&n.unshift(oa(e,a,r)),a=ea(e,t),a!=null&&n.push(oa(e,a,r))),e=e.return}return n}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Om(e,t,s,n,r){for(var a=t._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,r?(c=ea(s,a),c!=null&&o.unshift(oa(s,c,l))):r||(c=ea(s,a),c!=null&&o.push(oa(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var L1=/\r\n?/g,M1=/\u0000|\uFFFD/g;function Dm(e){return(typeof e=="string"?e:""+e).replace(L1,`
`).replace(M1,"")}function ho(e,t,s){if(t=Dm(t),Dm(e)!==t&&s)throw Error(U(425))}function nl(){}var Du=null,Lu=null;function Mu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $u=typeof setTimeout=="function"?setTimeout:void 0,$1=typeof clearTimeout=="function"?clearTimeout:void 0,Lm=typeof Promise=="function"?Promise:void 0,F1=typeof queueMicrotask=="function"?queueMicrotask:typeof Lm<"u"?function(e){return Lm.resolve(null).then(e).catch(U1)}:$u;function U1(e){setTimeout(function(){throw e})}function Rc(e,t){var s=t,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){e.removeChild(r),na(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);na(t)}function nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ei=Math.random().toString(36).slice(2),ls="__reactFiber$"+ei,la="__reactProps$"+ei,Ns="__reactContainer$"+ei,Fu="__reactEvents$"+ei,z1="__reactListeners$"+ei,V1="__reactHandles$"+ei;function On(e){var t=e[ls];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ns]||s[ls]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Mm(e);e!==null;){if(s=e[ls])return s;e=Mm(e)}return t}e=s,s=e.parentNode}return null}function Ia(e){return e=e[ls]||e[Ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Dl(e){return e[la]||null}var Uu=[],vr=-1;function gn(e){return{current:e}}function ke(e){0>vr||(e.current=Uu[vr],Uu[vr]=null,vr--)}function we(e,t){vr++,Uu[vr]=e.current,e.current=t}var dn={},ot=gn(dn),wt=gn(!1),Wn=dn;function Fr(e,t){var s=e.type.contextTypes;if(!s)return dn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in s)r[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function jt(e){return e=e.childContextTypes,e!=null}function rl(){ke(wt),ke(ot)}function $m(e,t,s){if(ot.current!==dn)throw Error(U(168));we(ot,t),we(wt,s)}function N0(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in t))throw Error(U(108,_j(e)||"Unknown",r));return Ae({},s,n)}function il(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dn,Wn=ot.current,we(ot,e),we(wt,wt.current),!0}function Fm(e,t,s){var n=e.stateNode;if(!n)throw Error(U(169));s?(e=N0(e,t,Wn),n.__reactInternalMemoizedMergedChildContext=e,ke(wt),ke(ot),we(ot,e)):ke(wt),we(wt,s)}var bs=null,Ll=!1,Ic=!1;function _0(e){bs===null?bs=[e]:bs.push(e)}function q1(e){Ll=!0,_0(e)}function xn(){if(!Ic&&bs!==null){Ic=!0;var e=0,t=ve;try{var s=bs;for(ve=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}bs=null,Ll=!1}catch(r){throw bs!==null&&(bs=bs.slice(e+1)),Xx(oh,xn),r}finally{ve=t,Ic=!1}}return null}var yr=[],br=0,al=null,ol=0,Lt=[],Mt=0,Hn=null,ws=1,js="";function Cn(e,t){yr[br++]=ol,yr[br++]=al,al=e,ol=t}function E0(e,t,s){Lt[Mt++]=ws,Lt[Mt++]=js,Lt[Mt++]=Hn,Hn=e;var n=ws;e=js;var r=32-Zt(n)-1;n&=~(1<<r),s+=1;var a=32-Zt(t)+r;if(30<a){var o=r-r%5;a=(n&(1<<o)-1).toString(32),n>>=o,r-=o,ws=1<<32-Zt(t)+r|s<<r|n,js=a+e}else ws=1<<a|s<<r|n,js=e}function gh(e){e.return!==null&&(Cn(e,1),E0(e,1,0))}function xh(e){for(;e===al;)al=yr[--br],yr[br]=null,ol=yr[--br],yr[br]=null;for(;e===Hn;)Hn=Lt[--Mt],Lt[Mt]=null,js=Lt[--Mt],Lt[Mt]=null,ws=Lt[--Mt],Lt[Mt]=null}var Pt=null,Tt=null,Ne=!1,Qt=null;function C0(e,t){var s=Ft(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Um(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pt=e,Tt=nn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pt=e,Tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Hn!==null?{id:ws,overflow:js}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Ft(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Pt=e,Tt=null,!0):!1;default:return!1}}function zu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vu(e){if(Ne){var t=Tt;if(t){var s=t;if(!Um(e,t)){if(zu(e))throw Error(U(418));t=nn(s.nextSibling);var n=Pt;t&&Um(e,t)?C0(n,s):(e.flags=e.flags&-4097|2,Ne=!1,Pt=e)}}else{if(zu(e))throw Error(U(418));e.flags=e.flags&-4097|2,Ne=!1,Pt=e}}}function zm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pt=e}function fo(e){if(e!==Pt)return!1;if(!Ne)return zm(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mu(e.type,e.memoizedProps)),t&&(t=Tt)){if(zu(e))throw T0(),Error(U(418));for(;t;)C0(e,t),t=nn(t.nextSibling)}if(zm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Tt=nn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Tt=null}}else Tt=Pt?nn(e.stateNode.nextSibling):null;return!0}function T0(){for(var e=Tt;e;)e=nn(e.nextSibling)}function Ur(){Tt=Pt=null,Ne=!1}function vh(e){Qt===null?Qt=[e]:Qt.push(e)}var B1=Rs.ReactCurrentBatchConfig;function vi(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(U(309));var n=s.stateNode}if(!n)throw Error(U(147,e));var r=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=r.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(U(284));if(!s._owner)throw Error(U(290,e))}return e}function mo(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vm(e){var t=e._init;return t(e._payload)}function P0(e){function t(p,x){if(e){var b=p.deletions;b===null?(p.deletions=[x],p.flags|=16):b.push(x)}}function s(p,x){if(!e)return null;for(;x!==null;)t(p,x),x=x.sibling;return null}function n(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function r(p,x){return p=ln(p,x),p.index=0,p.sibling=null,p}function a(p,x,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<x?(p.flags|=2,x):b):(p.flags|=2,x)):(p.flags|=1048576,x)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,x,b,S){return x===null||x.tag!==6?(x=Uc(b,p.mode,S),x.return=p,x):(x=r(x,b),x.return=p,x)}function c(p,x,b,S){var j=b.type;return j===fr?d(p,x,b.props.children,S,b.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qs&&Vm(j)===x.type)?(S=r(x,b.props),S.ref=vi(p,x,b),S.return=p,S):(S=zo(b.type,b.key,b.props,null,p.mode,S),S.ref=vi(p,x,b),S.return=p,S)}function u(p,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=zc(b,p.mode,S),x.return=p,x):(x=r(x,b.children||[]),x.return=p,x)}function d(p,x,b,S,j){return x===null||x.tag!==7?(x=Vn(b,p.mode,S,j),x.return=p,x):(x=r(x,b),x.return=p,x)}function h(p,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Uc(""+x,p.mode,b),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case so:return b=zo(x.type,x.key,x.props,null,p.mode,b),b.ref=vi(p,null,x),b.return=p,b;case hr:return x=zc(x,p.mode,b),x.return=p,x;case qs:var S=x._init;return h(p,S(x._payload),b)}if(Ei(x)||fi(x))return x=Vn(x,p.mode,b,null),x.return=p,x;mo(p,x)}return null}function f(p,x,b,S){var j=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(p,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case so:return b.key===j?c(p,x,b,S):null;case hr:return b.key===j?u(p,x,b,S):null;case qs:return j=b._init,f(p,x,j(b._payload),S)}if(Ei(b)||fi(b))return j!==null?null:d(p,x,b,S,null);mo(p,b)}return null}function g(p,x,b,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(b)||null,l(x,p,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case so:return p=p.get(S.key===null?b:S.key)||null,c(x,p,S,j);case hr:return p=p.get(S.key===null?b:S.key)||null,u(x,p,S,j);case qs:var N=S._init;return g(p,x,b,N(S._payload),j)}if(Ei(S)||fi(S))return p=p.get(b)||null,d(x,p,S,j,null);mo(x,S)}return null}function v(p,x,b,S){for(var j=null,N=null,_=x,C=x=0,I=null;_!==null&&C<b.length;C++){_.index>C?(I=_,_=null):I=_.sibling;var M=f(p,_,b[C],S);if(M===null){_===null&&(_=I);break}e&&_&&M.alternate===null&&t(p,_),x=a(M,x,C),N===null?j=M:N.sibling=M,N=M,_=I}if(C===b.length)return s(p,_),Ne&&Cn(p,C),j;if(_===null){for(;C<b.length;C++)_=h(p,b[C],S),_!==null&&(x=a(_,x,C),N===null?j=_:N.sibling=_,N=_);return Ne&&Cn(p,C),j}for(_=n(p,_);C<b.length;C++)I=g(_,p,C,b[C],S),I!==null&&(e&&I.alternate!==null&&_.delete(I.key===null?C:I.key),x=a(I,x,C),N===null?j=I:N.sibling=I,N=I);return e&&_.forEach(function(V){return t(p,V)}),Ne&&Cn(p,C),j}function y(p,x,b,S){var j=fi(b);if(typeof j!="function")throw Error(U(150));if(b=j.call(b),b==null)throw Error(U(151));for(var N=j=null,_=x,C=x=0,I=null,M=b.next();_!==null&&!M.done;C++,M=b.next()){_.index>C?(I=_,_=null):I=_.sibling;var V=f(p,_,M.value,S);if(V===null){_===null&&(_=I);break}e&&_&&V.alternate===null&&t(p,_),x=a(V,x,C),N===null?j=V:N.sibling=V,N=V,_=I}if(M.done)return s(p,_),Ne&&Cn(p,C),j;if(_===null){for(;!M.done;C++,M=b.next())M=h(p,M.value,S),M!==null&&(x=a(M,x,C),N===null?j=M:N.sibling=M,N=M);return Ne&&Cn(p,C),j}for(_=n(p,_);!M.done;C++,M=b.next())M=g(_,p,C,M.value,S),M!==null&&(e&&M.alternate!==null&&_.delete(M.key===null?C:M.key),x=a(M,x,C),N===null?j=M:N.sibling=M,N=M);return e&&_.forEach(function(Z){return t(p,Z)}),Ne&&Cn(p,C),j}function w(p,x,b,S){if(typeof b=="object"&&b!==null&&b.type===fr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case so:e:{for(var j=b.key,N=x;N!==null;){if(N.key===j){if(j=b.type,j===fr){if(N.tag===7){s(p,N.sibling),x=r(N,b.props.children),x.return=p,p=x;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qs&&Vm(j)===N.type){s(p,N.sibling),x=r(N,b.props),x.ref=vi(p,N,b),x.return=p,p=x;break e}s(p,N);break}else t(p,N);N=N.sibling}b.type===fr?(x=Vn(b.props.children,p.mode,S,b.key),x.return=p,p=x):(S=zo(b.type,b.key,b.props,null,p.mode,S),S.ref=vi(p,x,b),S.return=p,p=S)}return o(p);case hr:e:{for(N=b.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){s(p,x.sibling),x=r(x,b.children||[]),x.return=p,p=x;break e}else{s(p,x);break}else t(p,x);x=x.sibling}x=zc(b,p.mode,S),x.return=p,p=x}return o(p);case qs:return N=b._init,w(p,x,N(b._payload),S)}if(Ei(b))return v(p,x,b,S);if(fi(b))return y(p,x,b,S);mo(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(s(p,x.sibling),x=r(x,b),x.return=p,p=x):(s(p,x),x=Uc(b,p.mode,S),x.return=p,p=x),o(p)):s(p,x)}return w}var zr=P0(!0),A0=P0(!1),ll=gn(null),cl=null,wr=null,yh=null;function bh(){yh=wr=cl=null}function wh(e){var t=ll.current;ke(ll),e._currentValue=t}function qu(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Or(e,t){cl=e,yh=wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function Vt(e){var t=e._currentValue;if(yh!==e)if(e={context:e,memoizedValue:t,next:null},wr===null){if(cl===null)throw Error(U(308));wr=e,cl.dependencies={lanes:0,firstContext:e}}else wr=wr.next=e;return t}var Dn=null;function jh(e){Dn===null?Dn=[e]:Dn.push(e)}function R0(e,t,s,n){var r=t.interleaved;return r===null?(s.next=s,jh(t)):(s.next=r.next,r.next=s),t.interleaved=s,_s(e,n)}function _s(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Bs=!1;function Sh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ss(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rn(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var r=n.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),n.pending=t,_s(e,s)}return r=n.interleaved,r===null?(t.next=t,jh(n)):(t.next=r.next,r.next=t),n.interleaved=t,_s(e,s)}function Do(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,lh(e,s)}}function qm(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?r=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?r=a=t:a=a.next=t}else r=a=t;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function ul(e,t,s,n){var r=e.updateQueue;Bs=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=r.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,g=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,y=l;switch(f=t,g=s,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(g,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(g,h,f):v,f==null)break e;h=Ae({},h,f);break e;case 2:Bs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else a===null&&(r.shared.lanes=0);Kn|=o,e.lanes=o,e.memoizedState=h}}function Bm(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(U(191,r));r.call(n)}}}var Oa={},us=gn(Oa),ca=gn(Oa),ua=gn(Oa);function Ln(e){if(e===Oa)throw Error(U(174));return e}function kh(e,t){switch(we(ua,t),we(ca,e),we(us,Oa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Su(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Su(t,e)}ke(us),we(us,t)}function Vr(){ke(us),ke(ca),ke(ua)}function O0(e){Ln(ua.current);var t=Ln(us.current),s=Su(t,e.type);t!==s&&(we(ca,e),we(us,s))}function Nh(e){ca.current===e&&(ke(us),ke(ca))}var _e=gn(0);function dl(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oc=[];function _h(){for(var e=0;e<Oc.length;e++)Oc[e]._workInProgressVersionPrimary=null;Oc.length=0}var Lo=Rs.ReactCurrentDispatcher,Dc=Rs.ReactCurrentBatchConfig,Jn=0,Ce=null,Ve=null,He=null,hl=!1,Mi=!1,da=0,W1=0;function tt(){throw Error(U(321))}function Eh(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ts(e[s],t[s]))return!1;return!0}function Ch(e,t,s,n,r,a){if(Jn=a,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lo.current=e===null||e.memoizedState===null?G1:Y1,e=s(n,r),Mi){a=0;do{if(Mi=!1,da=0,25<=a)throw Error(U(301));a+=1,He=Ve=null,t.updateQueue=null,Lo.current=X1,e=s(n,r)}while(Mi)}if(Lo.current=fl,t=Ve!==null&&Ve.next!==null,Jn=0,He=Ve=Ce=null,hl=!1,t)throw Error(U(300));return e}function Th(){var e=da!==0;return da=0,e}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ce.memoizedState=He=e:He=He.next=e,He}function qt(){if(Ve===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=He===null?Ce.memoizedState:He.next;if(t!==null)He=t,Ve=e;else{if(e===null)throw Error(U(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},He===null?Ce.memoizedState=He=e:He=He.next=e}return He}function ha(e,t){return typeof t=="function"?t(e):t}function Lc(e){var t=qt(),s=t.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=e;var n=Ve,r=n.baseQueue,a=s.pending;if(a!==null){if(r!==null){var o=r.next;r.next=a.next,a.next=o}n.baseQueue=r=a,s.pending=null}if(r!==null){a=r.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Jn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Ce.lanes|=d,Kn|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,ts(n,t.memoizedState)||(yt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){r=e;do a=r.lane,Ce.lanes|=a,Kn|=a,r=r.next;while(r!==e)}else r===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Mc(e){var t=qt(),s=t.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=e;var n=s.dispatch,r=s.pending,a=t.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do a=e(a,o.action),o=o.next;while(o!==r);ts(a,t.memoizedState)||(yt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,n]}function D0(){}function L0(e,t){var s=Ce,n=qt(),r=t(),a=!ts(n.memoizedState,r);if(a&&(n.memoizedState=r,yt=!0),n=n.queue,Ph(F0.bind(null,s,n,e),[e]),n.getSnapshot!==t||a||He!==null&&He.memoizedState.tag&1){if(s.flags|=2048,fa(9,$0.bind(null,s,n,r,t),void 0,null),Je===null)throw Error(U(349));Jn&30||M0(s,t,r)}return r}function M0(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function $0(e,t,s,n){t.value=s,t.getSnapshot=n,U0(t)&&z0(e)}function F0(e,t,s){return s(function(){U0(t)&&z0(e)})}function U0(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ts(e,s)}catch{return!0}}function z0(e){var t=_s(e,1);t!==null&&es(t,e,1,-1)}function Wm(e){var t=os();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e},t.queue=e,e=e.dispatch=K1.bind(null,Ce,e),[t.memoizedState,e]}function fa(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function V0(){return qt().memoizedState}function Mo(e,t,s,n){var r=os();Ce.flags|=e,r.memoizedState=fa(1|t,s,void 0,n===void 0?null:n)}function Ml(e,t,s,n){var r=qt();n=n===void 0?null:n;var a=void 0;if(Ve!==null){var o=Ve.memoizedState;if(a=o.destroy,n!==null&&Eh(n,o.deps)){r.memoizedState=fa(t,s,a,n);return}}Ce.flags|=e,r.memoizedState=fa(1|t,s,a,n)}function Hm(e,t){return Mo(8390656,8,e,t)}function Ph(e,t){return Ml(2048,8,e,t)}function q0(e,t){return Ml(4,2,e,t)}function B0(e,t){return Ml(4,4,e,t)}function W0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function H0(e,t,s){return s=s!=null?s.concat([e]):null,Ml(4,4,W0.bind(null,t,e),s)}function Ah(){}function J0(e,t){var s=qt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Eh(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function K0(e,t){var s=qt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Eh(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function G0(e,t,s){return Jn&21?(ts(s,t)||(s=e0(),Ce.lanes|=s,Kn|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=s)}function H1(e,t){var s=ve;ve=s!==0&&4>s?s:4,e(!0);var n=Dc.transition;Dc.transition={};try{e(!1),t()}finally{ve=s,Dc.transition=n}}function Y0(){return qt().memoizedState}function J1(e,t,s){var n=on(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},X0(e))Q0(t,s);else if(s=R0(e,t,s,n),s!==null){var r=dt();es(s,e,n,r),Z0(s,t,n)}}function K1(e,t,s){var n=on(e),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(X0(e))Q0(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,s);if(r.hasEagerState=!0,r.eagerState=l,ts(l,o)){var c=t.interleaved;c===null?(r.next=r,jh(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}s=R0(e,t,r,n),s!==null&&(r=dt(),es(s,e,n,r),Z0(s,t,n))}}function X0(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function Q0(e,t){Mi=hl=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Z0(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,lh(e,s)}}var fl={readContext:Vt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},G1={readContext:Vt,useCallback:function(e,t){return os().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:Hm,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Mo(4194308,4,W0.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var s=os();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=os();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=J1.bind(null,Ce,e),[n.memoizedState,e]},useRef:function(e){var t=os();return e={current:e},t.memoizedState=e},useState:Wm,useDebugValue:Ah,useDeferredValue:function(e){return os().memoizedState=e},useTransition:function(){var e=Wm(!1),t=e[0];return e=H1.bind(null,e[1]),os().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Ce,r=os();if(Ne){if(s===void 0)throw Error(U(407));s=s()}else{if(s=t(),Je===null)throw Error(U(349));Jn&30||M0(n,t,s)}r.memoizedState=s;var a={value:s,getSnapshot:t};return r.queue=a,Hm(F0.bind(null,n,a,e),[e]),n.flags|=2048,fa(9,$0.bind(null,n,a,s,t),void 0,null),s},useId:function(){var e=os(),t=Je.identifierPrefix;if(Ne){var s=js,n=ws;s=(n&~(1<<32-Zt(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=da++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=W1++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Y1={readContext:Vt,useCallback:J0,useContext:Vt,useEffect:Ph,useImperativeHandle:H0,useInsertionEffect:q0,useLayoutEffect:B0,useMemo:K0,useReducer:Lc,useRef:V0,useState:function(){return Lc(ha)},useDebugValue:Ah,useDeferredValue:function(e){var t=qt();return G0(t,Ve.memoizedState,e)},useTransition:function(){var e=Lc(ha)[0],t=qt().memoizedState;return[e,t]},useMutableSource:D0,useSyncExternalStore:L0,useId:Y0,unstable_isNewReconciler:!1},X1={readContext:Vt,useCallback:J0,useContext:Vt,useEffect:Ph,useImperativeHandle:H0,useInsertionEffect:q0,useLayoutEffect:B0,useMemo:K0,useReducer:Mc,useRef:V0,useState:function(){return Mc(ha)},useDebugValue:Ah,useDeferredValue:function(e){var t=qt();return Ve===null?t.memoizedState=e:G0(t,Ve.memoizedState,e)},useTransition:function(){var e=Mc(ha)[0],t=qt().memoizedState;return[e,t]},useMutableSource:D0,useSyncExternalStore:L0,useId:Y0,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Bu(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:Ae({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var $l={isMounted:function(e){return(e=e._reactInternals)?er(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=dt(),r=on(e),a=Ss(n,r);a.payload=t,s!=null&&(a.callback=s),t=rn(e,a,r),t!==null&&(es(t,e,r,n),Do(t,e,r))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=dt(),r=on(e),a=Ss(n,r);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=rn(e,a,r),t!==null&&(es(t,e,r,n),Do(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=dt(),n=on(e),r=Ss(s,n);r.tag=2,t!=null&&(r.callback=t),t=rn(e,r,n),t!==null&&(es(t,e,n,s),Do(t,e,n))}};function Jm(e,t,s,n,r,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!ia(s,n)||!ia(r,a):!0}function ev(e,t,s){var n=!1,r=dn,a=t.contextType;return typeof a=="object"&&a!==null?a=Vt(a):(r=jt(t)?Wn:ot.current,n=t.contextTypes,a=(n=n!=null)?Fr(e,r):dn),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$l,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Km(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&$l.enqueueReplaceState(t,t.state,null)}function Wu(e,t,s,n){var r=e.stateNode;r.props=s,r.state=e.memoizedState,r.refs={},Sh(e);var a=t.contextType;typeof a=="object"&&a!==null?r.context=Vt(a):(a=jt(t)?Wn:ot.current,r.context=Fr(e,a)),r.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Bu(e,t,a,s),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&$l.enqueueReplaceState(r,r.state,null),ul(e,s,r,n),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function qr(e,t){try{var s="",n=t;do s+=Nj(n),n=n.return;while(n);var r=s}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:r,digest:null}}function $c(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Hu(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Q1=typeof WeakMap=="function"?WeakMap:Map;function tv(e,t,s){s=Ss(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){pl||(pl=!0,sd=n),Hu(e,t)},s}function sv(e,t,s){s=Ss(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var r=t.value;s.payload=function(){return n(r)},s.callback=function(){Hu(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Hu(e,t),typeof n!="function"&&(an===null?an=new Set([this]):an.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Gm(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new Q1;var r=new Set;n.set(t,r)}else r=n.get(t),r===void 0&&(r=new Set,n.set(t,r));r.has(s)||(r.add(s),e=hS.bind(null,e,t,s),t.then(e,e))}function Ym(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xm(e,t,s,n,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Ss(-1,1),t.tag=2,rn(s,t,1))),s.lanes|=1),e)}var Z1=Rs.ReactCurrentOwner,yt=!1;function ct(e,t,s,n){t.child=e===null?A0(t,null,s,n):zr(t,e.child,s,n)}function Qm(e,t,s,n,r){s=s.render;var a=t.ref;return Or(t,r),n=Ch(e,t,s,n,a,r),s=Th(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Es(e,t,r)):(Ne&&s&&gh(t),t.flags|=1,ct(e,t,n,r),t.child)}function Zm(e,t,s,n,r){if(e===null){var a=s.type;return typeof a=="function"&&!Fh(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,nv(e,t,a,n,r)):(e=zo(s.type,null,n,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&r)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:ia,s(o,n)&&e.ref===t.ref)return Es(e,t,r)}return t.flags|=1,e=ln(a,n),e.ref=t.ref,e.return=t,t.child=e}function nv(e,t,s,n,r){if(e!==null){var a=e.memoizedProps;if(ia(a,n)&&e.ref===t.ref)if(yt=!1,t.pendingProps=n=a,(e.lanes&r)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,Es(e,t,r)}return Ju(e,t,s,n,r)}function rv(e,t,s){var n=t.pendingProps,r=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Sr,Ct),Ct|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Sr,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,we(Sr,Ct),Ct|=n}else a!==null?(n=a.baseLanes|s,t.memoizedState=null):n=s,we(Sr,Ct),Ct|=n;return ct(e,t,r,s),t.child}function iv(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ju(e,t,s,n,r){var a=jt(s)?Wn:ot.current;return a=Fr(t,a),Or(t,r),s=Ch(e,t,s,n,a,r),n=Th(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Es(e,t,r)):(Ne&&n&&gh(t),t.flags|=1,ct(e,t,s,r),t.child)}function ep(e,t,s,n,r){if(jt(s)){var a=!0;il(t)}else a=!1;if(Or(t,r),t.stateNode===null)$o(e,t),ev(t,s,n),Wu(t,s,n,r),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=s.contextType;typeof u=="object"&&u!==null?u=Vt(u):(u=jt(s)?Wn:ot.current,u=Fr(t,u));var d=s.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Km(t,o,n,u),Bs=!1;var f=t.memoizedState;o.state=f,ul(t,n,o,r),c=t.memoizedState,l!==n||f!==c||wt.current||Bs?(typeof d=="function"&&(Bu(t,s,d,n),c=t.memoizedState),(l=Bs||Jm(t,s,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,I0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Gt(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Vt(c):(c=jt(s)?Wn:ot.current,c=Fr(t,c));var g=s.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Km(t,o,n,c),Bs=!1,f=t.memoizedState,o.state=f,ul(t,n,o,r);var v=t.memoizedState;l!==h||f!==v||wt.current||Bs?(typeof g=="function"&&(Bu(t,s,g,n),v=t.memoizedState),(u=Bs||Jm(t,s,u,n,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Ku(e,t,s,n,a,r)}function Ku(e,t,s,n,r,a){iv(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return r&&Fm(t,s,!1),Es(e,t,a);n=t.stateNode,Z1.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=zr(t,e.child,null,a),t.child=zr(t,null,l,a)):ct(e,t,l,a),t.memoizedState=n.state,r&&Fm(t,s,!0),t.child}function av(e){var t=e.stateNode;t.pendingContext?$m(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$m(e,t.context,!1),kh(e,t.containerInfo)}function tp(e,t,s,n,r){return Ur(),vh(r),t.flags|=256,ct(e,t,s,n),t.child}var Gu={dehydrated:null,treeContext:null,retryLane:0};function Yu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ov(e,t,s){var n=t.pendingProps,r=_e.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),we(_e,r&1),e===null)return Vu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=zl(o,n,0,null),e=Vn(e,n,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Yu(s),t.memoizedState=Gu,e):Rh(t,o));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return eS(e,t,o,n,l,r,s);if(a){a=n.fallback,o=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==r?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ln(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?a=ln(l,a):(a=Vn(a,o,s,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?Yu(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~s,t.memoizedState=Gu,n}return a=e.child,e=a.sibling,n=ln(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Rh(e,t){return t=zl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function po(e,t,s,n){return n!==null&&vh(n),zr(t,e.child,null,s),e=Rh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eS(e,t,s,n,r,a,o){if(s)return t.flags&256?(t.flags&=-257,n=$c(Error(U(422))),po(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,r=t.mode,n=zl({mode:"visible",children:n.children},r,0,null),a=Vn(a,r,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&zr(t,e.child,null,o),t.child.memoizedState=Yu(o),t.memoizedState=Gu,a);if(!(t.mode&1))return po(e,t,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(U(419)),n=$c(a,n,void 0),po(e,t,o,n)}if(l=(o&e.childLanes)!==0,yt||l){if(n=Je,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,_s(e,r),es(n,e,r,-1))}return $h(),n=$c(Error(U(421))),po(e,t,o,n)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=fS.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,Tt=nn(r.nextSibling),Pt=t,Ne=!0,Qt=null,e!==null&&(Lt[Mt++]=ws,Lt[Mt++]=js,Lt[Mt++]=Hn,ws=e.id,js=e.overflow,Hn=t),t=Rh(t,n.children),t.flags|=4096,t)}function sp(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),qu(e.return,t,s)}function Fc(e,t,s,n,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=r)}function lv(e,t,s){var n=t.pendingProps,r=n.revealOrder,a=n.tail;if(ct(e,t,n.children,s),n=_e.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sp(e,s,t);else if(e.tag===19)sp(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(we(_e,n),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(s=t.child,r=null;s!==null;)e=s.alternate,e!==null&&dl(e)===null&&(r=s),s=s.sibling;s=r,s===null?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),Fc(t,!1,r,s,a);break;case"backwards":for(s=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&dl(e)===null){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}Fc(t,!0,s,null,a);break;case"together":Fc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Es(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Kn|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,s=ln(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=ln(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function tS(e,t,s){switch(t.tag){case 3:av(t),Ur();break;case 5:O0(t);break;case 1:jt(t.type)&&il(t);break;case 4:kh(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;we(ll,n._currentValue),n._currentValue=r;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(we(_e,_e.current&1),t.flags|=128,null):s&t.child.childLanes?ov(e,t,s):(we(_e,_e.current&1),e=Es(e,t,s),e!==null?e.sibling:null);we(_e,_e.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return lv(e,t,s);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),we(_e,_e.current),n)break;return null;case 22:case 23:return t.lanes=0,rv(e,t,s)}return Es(e,t,s)}var cv,Xu,uv,dv;cv=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Xu=function(){};uv=function(e,t,s,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,Ln(us.current);var a=null;switch(s){case"input":r=yu(e,r),n=yu(e,n),a=[];break;case"select":r=Ae({},r,{value:void 0}),n=Ae({},n,{value:void 0}),a=[];break;case"textarea":r=ju(e,r),n=ju(e,n),a=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=nl)}ku(s,n);var o;s=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qi.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Se("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}s&&(a=a||[]).push("style",s);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};dv=function(e,t,s,n){s!==n&&(t.flags|=4)};function yi(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var r=e.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function sS(e,t,s){var n=t.pendingProps;switch(xh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return jt(t.type)&&rl(),st(t),null;case 3:return n=t.stateNode,Vr(),ke(wt),ke(ot),_h(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(fo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qt!==null&&(id(Qt),Qt=null))),Xu(e,t),st(t),null;case 5:Nh(t);var r=Ln(ua.current);if(s=t.type,e!==null&&t.stateNode!=null)uv(e,t,s,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(U(166));return st(t),null}if(e=Ln(us.current),fo(t)){n=t.stateNode,s=t.type;var a=t.memoizedProps;switch(n[ls]=t,n[la]=a,e=(t.mode&1)!==0,s){case"dialog":Se("cancel",n),Se("close",n);break;case"iframe":case"object":case"embed":Se("load",n);break;case"video":case"audio":for(r=0;r<Ti.length;r++)Se(Ti[r],n);break;case"source":Se("error",n);break;case"img":case"image":case"link":Se("error",n),Se("load",n);break;case"details":Se("toggle",n);break;case"input":dm(n,a),Se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Se("invalid",n);break;case"textarea":fm(n,a),Se("invalid",n)}ku(s,a),r=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&ho(n.textContent,l,e),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&ho(n.textContent,l,e),r=["children",""+l]):Qi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Se("scroll",n)}switch(s){case"input":no(n),hm(n,a,!0);break;case"textarea":no(n),mm(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=nl)}n=r,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fx(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[ls]=t,e[la]=n,cv(e,t,!1,!1),t.stateNode=e;e:{switch(o=Nu(s,n),s){case"dialog":Se("cancel",e),Se("close",e),r=n;break;case"iframe":case"object":case"embed":Se("load",e),r=n;break;case"video":case"audio":for(r=0;r<Ti.length;r++)Se(Ti[r],e);r=n;break;case"source":Se("error",e),r=n;break;case"img":case"image":case"link":Se("error",e),Se("load",e),r=n;break;case"details":Se("toggle",e),r=n;break;case"input":dm(e,n),r=yu(e,n),Se("invalid",e);break;case"option":r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=Ae({},n,{value:void 0}),Se("invalid",e);break;case"textarea":fm(e,n),r=ju(e,n),Se("invalid",e);break;default:r=n}ku(s,r),l=r;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Vx(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ux(e,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Zi(e,c):typeof c=="number"&&Zi(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Qi.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Se("scroll",e):c!=null&&sh(e,a,c,o))}switch(s){case"input":no(e),hm(e,n,!1);break;case"textarea":no(e),mm(e);break;case"option":n.value!=null&&e.setAttribute("value",""+un(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Pr(e,!!n.multiple,a,!1):n.defaultValue!=null&&Pr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=nl)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)dv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(U(166));if(s=Ln(ua.current),Ln(us.current),fo(t)){if(n=t.stateNode,s=t.memoizedProps,n[ls]=t,(a=n.nodeValue!==s)&&(e=Pt,e!==null))switch(e.tag){case 3:ho(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ho(n.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[ls]=t,t.stateNode=n}return st(t),null;case 13:if(ke(_e),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&Tt!==null&&t.mode&1&&!(t.flags&128))T0(),Ur(),t.flags|=98560,a=!1;else if(a=fo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(U(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(U(317));a[ls]=t}else Ur(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),a=!1}else Qt!==null&&(id(Qt),Qt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?qe===0&&(qe=3):$h())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return Vr(),Xu(e,t),e===null&&aa(t.stateNode.containerInfo),st(t),null;case 10:return wh(t.type._context),st(t),null;case 17:return jt(t.type)&&rl(),st(t),null;case 19:if(ke(_e),a=t.memoizedState,a===null)return st(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)yi(a,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=dl(e),o!==null){for(t.flags|=128,yi(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)a=s,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return we(_e,_e.current&1|2),t.child}e=e.sibling}a.tail!==null&&Fe()>Br&&(t.flags|=128,n=!0,yi(a,!1),t.lanes=4194304)}else{if(!n)if(e=dl(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),yi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ne)return st(t),null}else 2*Fe()-a.renderingStartTime>Br&&s!==1073741824&&(t.flags|=128,n=!0,yi(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(s=a.last,s!==null?s.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Fe(),t.sibling=null,s=_e.current,we(_e,n?s&1|2:s&1),t):(st(t),null);case 22:case 23:return Mh(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ct&1073741824&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function nS(e,t){switch(xh(t),t.tag){case 1:return jt(t.type)&&rl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vr(),ke(wt),ke(ot),_h(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Nh(t),null;case 13:if(ke(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(_e),null;case 4:return Vr(),null;case 10:return wh(t.type._context),null;case 22:case 23:return Mh(),null;case 24:return null;default:return null}}var go=!1,rt=!1,rS=typeof WeakSet=="function"?WeakSet:Set,Q=null;function jr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ie(e,t,n)}else s.current=null}function Qu(e,t,s){try{s()}catch(n){Ie(e,t,n)}}var np=!1;function iS(e,t){if(Du=el,e=g0(),ph(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var g;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===e)break t;if(f===s&&++u===r&&(l=o),f===a&&++d===n&&(c=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Lu={focusedElem:e,selectionRange:s},el=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,p=t.stateNode,x=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:Gt(t.type,y),w);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(S){Ie(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return v=np,np=!1,v}function $i(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,a!==void 0&&Qu(t,s,a)}r=r.next}while(r!==n)}}function Fl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function Zu(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function hv(e){var t=e.alternate;t!==null&&(e.alternate=null,hv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ls],delete t[la],delete t[Fu],delete t[z1],delete t[V1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fv(e){return e.tag===5||e.tag===3||e.tag===4}function rp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ed(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=nl));else if(n!==4&&(e=e.child,e!==null))for(ed(e,t,s),e=e.sibling;e!==null;)ed(e,t,s),e=e.sibling}function td(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(td(e,t,s),e=e.sibling;e!==null;)td(e,t,s),e=e.sibling}var Ge=null,Yt=!1;function Fs(e,t,s){for(s=s.child;s!==null;)mv(e,t,s),s=s.sibling}function mv(e,t,s){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Al,s)}catch{}switch(s.tag){case 5:rt||jr(s,t);case 6:var n=Ge,r=Yt;Ge=null,Fs(e,t,s),Ge=n,Yt=r,Ge!==null&&(Yt?(e=Ge,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ge.removeChild(s.stateNode));break;case 18:Ge!==null&&(Yt?(e=Ge,s=s.stateNode,e.nodeType===8?Rc(e.parentNode,s):e.nodeType===1&&Rc(e,s),na(e)):Rc(Ge,s.stateNode));break;case 4:n=Ge,r=Yt,Ge=s.stateNode.containerInfo,Yt=!0,Fs(e,t,s),Ge=n,Yt=r;break;case 0:case 11:case 14:case 15:if(!rt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var a=r,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Qu(s,t,o),r=r.next}while(r!==n)}Fs(e,t,s);break;case 1:if(!rt&&(jr(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ie(s,t,l)}Fs(e,t,s);break;case 21:Fs(e,t,s);break;case 22:s.mode&1?(rt=(n=rt)||s.memoizedState!==null,Fs(e,t,s),rt=n):Fs(e,t,s);break;default:Fs(e,t,s)}}function ip(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new rS),t.forEach(function(n){var r=mS.bind(null,e,n);s.has(n)||(s.add(n),n.then(r,r))})}}function Jt(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ge=l.stateNode,Yt=!1;break e;case 3:Ge=l.stateNode.containerInfo,Yt=!0;break e;case 4:Ge=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(Ge===null)throw Error(U(160));mv(a,o,r),Ge=null,Yt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Ie(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pv(t,e),t=t.sibling}function pv(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),is(e),n&4){try{$i(3,e,e.return),Fl(3,e)}catch(y){Ie(e,e.return,y)}try{$i(5,e,e.return)}catch(y){Ie(e,e.return,y)}}break;case 1:Jt(t,e),is(e),n&512&&s!==null&&jr(s,s.return);break;case 5:if(Jt(t,e),is(e),n&512&&s!==null&&jr(s,s.return),e.flags&32){var r=e.stateNode;try{Zi(r,"")}catch(y){Ie(e,e.return,y)}}if(n&4&&(r=e.stateNode,r!=null)){var a=e.memoizedProps,o=s!==null?s.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Mx(r,a),Nu(l,o);var u=Nu(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Vx(r,h):d==="dangerouslySetInnerHTML"?Ux(r,h):d==="children"?Zi(r,h):sh(r,d,h,u)}switch(l){case"input":bu(r,a);break;case"textarea":$x(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Pr(r,!!a.multiple,g,!1):f!==!!a.multiple&&(a.defaultValue!=null?Pr(r,!!a.multiple,a.defaultValue,!0):Pr(r,!!a.multiple,a.multiple?[]:"",!1))}r[la]=a}catch(y){Ie(e,e.return,y)}}break;case 6:if(Jt(t,e),is(e),n&4){if(e.stateNode===null)throw Error(U(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(y){Ie(e,e.return,y)}}break;case 3:if(Jt(t,e),is(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{na(t.containerInfo)}catch(y){Ie(e,e.return,y)}break;case 4:Jt(t,e),is(e);break;case 13:Jt(t,e),is(e),r=e.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(Dh=Fe())),n&4&&ip(e);break;case 22:if(d=s!==null&&s.memoizedState!==null,e.mode&1?(rt=(u=rt)||d,Jt(t,e),rt=u):Jt(t,e),is(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Q=e,d=e.child;d!==null;){for(h=Q=d;Q!==null;){switch(f=Q,g=f.child,f.tag){case 0:case 11:case 14:case 15:$i(4,f,f.return);break;case 1:jr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,s=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ie(n,s,y)}}break;case 5:jr(f,f.return);break;case 22:if(f.memoizedState!==null){op(h);continue}}g!==null?(g.return=f,Q=g):op(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=zx("display",o))}catch(y){Ie(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Ie(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jt(t,e),is(e),n&4&&ip(e);break;case 21:break;default:Jt(t,e),is(e)}}function is(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(fv(s)){var n=s;break e}s=s.return}throw Error(U(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Zi(r,""),n.flags&=-33);var a=rp(e);td(e,a,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=rp(e);ed(e,l,o);break;default:throw Error(U(161))}}catch(c){Ie(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aS(e,t,s){Q=e,gv(e)}function gv(e,t,s){for(var n=(e.mode&1)!==0;Q!==null;){var r=Q,a=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||go;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||rt;l=go;var u=rt;if(go=o,(rt=c)&&!u)for(Q=r;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?lp(r):c!==null?(c.return=o,Q=c):lp(r);for(;a!==null;)Q=a,gv(a),a=a.sibling;Q=r,go=l,rt=u}ap(e)}else r.subtreeFlags&8772&&a!==null?(a.return=r,Q=a):ap(e)}}function ap(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||Fl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!rt)if(s===null)n.componentDidMount();else{var r=t.elementType===t.type?s.memoizedProps:Gt(t.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Bm(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Bm(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&na(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}rt||t.flags&512&&Zu(t)}catch(f){Ie(t,t.return,f)}}if(t===e){Q=null;break}if(s=t.sibling,s!==null){s.return=t.return,Q=s;break}Q=t.return}}function op(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Q=s;break}Q=t.return}}function lp(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Fl(4,t)}catch(c){Ie(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var r=t.return;try{n.componentDidMount()}catch(c){Ie(t,r,c)}}var a=t.return;try{Zu(t)}catch(c){Ie(t,a,c)}break;case 5:var o=t.return;try{Zu(t)}catch(c){Ie(t,o,c)}}}catch(c){Ie(t,t.return,c)}if(t===e){Q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Q=l;break}Q=t.return}}var oS=Math.ceil,ml=Rs.ReactCurrentDispatcher,Ih=Rs.ReactCurrentOwner,Ut=Rs.ReactCurrentBatchConfig,ge=0,Je=null,ze=null,Qe=0,Ct=0,Sr=gn(0),qe=0,ma=null,Kn=0,Ul=0,Oh=0,Fi=null,xt=null,Dh=0,Br=1/0,vs=null,pl=!1,sd=null,an=null,xo=!1,Xs=null,gl=0,Ui=0,nd=null,Fo=-1,Uo=0;function dt(){return ge&6?Fe():Fo!==-1?Fo:Fo=Fe()}function on(e){return e.mode&1?ge&2&&Qe!==0?Qe&-Qe:B1.transition!==null?(Uo===0&&(Uo=e0()),Uo):(e=ve,e!==0||(e=window.event,e=e===void 0?16:o0(e.type)),e):1}function es(e,t,s,n){if(50<Ui)throw Ui=0,nd=null,Error(U(185));Aa(e,s,n),(!(ge&2)||e!==Je)&&(e===Je&&(!(ge&2)&&(Ul|=s),qe===4&&Js(e,Qe)),St(e,n),s===1&&ge===0&&!(t.mode&1)&&(Br=Fe()+500,Ll&&xn()))}function St(e,t){var s=e.callbackNode;Bj(e,t);var n=Zo(e,e===Je?Qe:0);if(n===0)s!==null&&xm(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&xm(s),t===1)e.tag===0?q1(cp.bind(null,e)):_0(cp.bind(null,e)),F1(function(){!(ge&6)&&xn()}),s=null;else{switch(t0(n)){case 1:s=oh;break;case 4:s=Qx;break;case 16:s=Qo;break;case 536870912:s=Zx;break;default:s=Qo}s=kv(s,xv.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function xv(e,t){if(Fo=-1,Uo=0,ge&6)throw Error(U(327));var s=e.callbackNode;if(Dr()&&e.callbackNode!==s)return null;var n=Zo(e,e===Je?Qe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=xl(e,n);else{t=n;var r=ge;ge|=2;var a=yv();(Je!==e||Qe!==t)&&(vs=null,Br=Fe()+500,zn(e,t));do try{uS();break}catch(l){vv(e,l)}while(!0);bh(),ml.current=a,ge=r,ze!==null?t=0:(Je=null,Qe=0,t=qe)}if(t!==0){if(t===2&&(r=Pu(e),r!==0&&(n=r,t=rd(e,r))),t===1)throw s=ma,zn(e,0),Js(e,n),St(e,Fe()),s;if(t===6)Js(e,n);else{if(r=e.current.alternate,!(n&30)&&!lS(r)&&(t=xl(e,n),t===2&&(a=Pu(e),a!==0&&(n=a,t=rd(e,a))),t===1))throw s=ma,zn(e,0),Js(e,n),St(e,Fe()),s;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(U(345));case 2:Tn(e,xt,vs);break;case 3:if(Js(e,n),(n&130023424)===n&&(t=Dh+500-Fe(),10<t)){if(Zo(e,0)!==0)break;if(r=e.suspendedLanes,(r&n)!==n){dt(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=$u(Tn.bind(null,e,xt,vs),t);break}Tn(e,xt,vs);break;case 4:if(Js(e,n),(n&4194240)===n)break;for(t=e.eventTimes,r=-1;0<n;){var o=31-Zt(n);a=1<<o,o=t[o],o>r&&(r=o),n&=~a}if(n=r,n=Fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*oS(n/1960))-n,10<n){e.timeoutHandle=$u(Tn.bind(null,e,xt,vs),n);break}Tn(e,xt,vs);break;case 5:Tn(e,xt,vs);break;default:throw Error(U(329))}}}return St(e,Fe()),e.callbackNode===s?xv.bind(null,e):null}function rd(e,t){var s=Fi;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=xl(e,t),e!==2&&(t=xt,xt=s,t!==null&&id(t)),e}function id(e){xt===null?xt=e:xt.push.apply(xt,e)}function lS(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],a=r.getSnapshot;r=r.value;try{if(!ts(a(),r))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Js(e,t){for(t&=~Oh,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Zt(t),n=1<<s;e[s]=-1,t&=~n}}function cp(e){if(ge&6)throw Error(U(327));Dr();var t=Zo(e,0);if(!(t&1))return St(e,Fe()),null;var s=xl(e,t);if(e.tag!==0&&s===2){var n=Pu(e);n!==0&&(t=n,s=rd(e,n))}if(s===1)throw s=ma,zn(e,0),Js(e,t),St(e,Fe()),s;if(s===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,xt,vs),St(e,Fe()),null}function Lh(e,t){var s=ge;ge|=1;try{return e(t)}finally{ge=s,ge===0&&(Br=Fe()+500,Ll&&xn())}}function Gn(e){Xs!==null&&Xs.tag===0&&!(ge&6)&&Dr();var t=ge;ge|=1;var s=Ut.transition,n=ve;try{if(Ut.transition=null,ve=1,e)return e()}finally{ve=n,Ut.transition=s,ge=t,!(ge&6)&&xn()}}function Mh(){Ct=Sr.current,ke(Sr)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,$1(s)),ze!==null)for(s=ze.return;s!==null;){var n=s;switch(xh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&rl();break;case 3:Vr(),ke(wt),ke(ot),_h();break;case 5:Nh(n);break;case 4:Vr();break;case 13:ke(_e);break;case 19:ke(_e);break;case 10:wh(n.type._context);break;case 22:case 23:Mh()}s=s.return}if(Je=e,ze=e=ln(e.current,null),Qe=Ct=t,qe=0,ma=null,Oh=Ul=Kn=0,xt=Fi=null,Dn!==null){for(t=0;t<Dn.length;t++)if(s=Dn[t],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,a=s.pending;if(a!==null){var o=a.next;a.next=r,n.next=o}s.pending=n}Dn=null}return e}function vv(e,t){do{var s=ze;try{if(bh(),Lo.current=fl,hl){for(var n=Ce.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}hl=!1}if(Jn=0,He=Ve=Ce=null,Mi=!1,da=0,Ih.current=null,s===null||s.return===null){qe=1,ma=t,ze=null;break}e:{var a=e,o=s.return,l=s,c=t;if(t=Qe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Ym(o);if(g!==null){g.flags&=-257,Xm(g,o,l,a,t),g.mode&1&&Gm(a,u,t),t=g,c=u;var v=t.updateQueue;if(v===null){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}else{if(!(t&1)){Gm(a,u,t),$h();break e}c=Error(U(426))}}else if(Ne&&l.mode&1){var w=Ym(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Xm(w,o,l,a,t),vh(qr(c,l));break e}}a=c=qr(c,l),qe!==4&&(qe=2),Fi===null?Fi=[a]:Fi.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=tv(a,c,t);qm(a,p);break e;case 1:l=c;var x=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(an===null||!an.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=sv(a,l,t);qm(a,S);break e}}a=a.return}while(a!==null)}wv(s)}catch(j){t=j,ze===s&&s!==null&&(ze=s=s.return);continue}break}while(!0)}function yv(){var e=ml.current;return ml.current=fl,e===null?fl:e}function $h(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!(Kn&268435455)&&!(Ul&268435455)||Js(Je,Qe)}function xl(e,t){var s=ge;ge|=2;var n=yv();(Je!==e||Qe!==t)&&(vs=null,zn(e,t));do try{cS();break}catch(r){vv(e,r)}while(!0);if(bh(),ge=s,ml.current=n,ze!==null)throw Error(U(261));return Je=null,Qe=0,qe}function cS(){for(;ze!==null;)bv(ze)}function uS(){for(;ze!==null&&!Dj();)bv(ze)}function bv(e){var t=Sv(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?wv(e):ze=t,Ih.current=null}function wv(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=nS(s,t),s!==null){s.flags&=32767,ze=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,ze=null;return}}else if(s=sS(s,t,Ct),s!==null){ze=s;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);qe===0&&(qe=5)}function Tn(e,t,s){var n=ve,r=Ut.transition;try{Ut.transition=null,ve=1,dS(e,t,s,n)}finally{Ut.transition=r,ve=n}return null}function dS(e,t,s,n){do Dr();while(Xs!==null);if(ge&6)throw Error(U(327));s=e.finishedWork;var r=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(Wj(e,a),e===Je&&(ze=Je=null,Qe=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||xo||(xo=!0,kv(Qo,function(){return Dr(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Ut.transition,Ut.transition=null;var o=ve;ve=1;var l=ge;ge|=4,Ih.current=null,iS(e,s),pv(s,e),A1(Lu),el=!!Du,Lu=Du=null,e.current=s,aS(s),Lj(),ge=l,ve=o,Ut.transition=a}else e.current=s;if(xo&&(xo=!1,Xs=e,gl=r),a=e.pendingLanes,a===0&&(an=null),Fj(s.stateNode),St(e,Fe()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)r=t[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(pl)throw pl=!1,e=sd,sd=null,e;return gl&1&&e.tag!==0&&Dr(),a=e.pendingLanes,a&1?e===nd?Ui++:(Ui=0,nd=e):Ui=0,xn(),null}function Dr(){if(Xs!==null){var e=t0(gl),t=Ut.transition,s=ve;try{if(Ut.transition=null,ve=16>e?16:e,Xs===null)var n=!1;else{if(e=Xs,Xs=null,gl=0,ge&6)throw Error(U(331));var r=ge;for(ge|=4,Q=e.current;Q!==null;){var a=Q,o=a.child;if(Q.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:$i(8,d,a)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var f=d.sibling,g=d.return;if(hv(d),d===u){Q=null;break}if(f!==null){f.return=g,Q=f;break}Q=g}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Q=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Q=o;else e:for(;Q!==null;){if(a=Q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:$i(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,Q=p;break e}Q=a.return}}var x=e.current;for(Q=x;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else e:for(o=x;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fl(9,l)}}catch(j){Ie(l,l.return,j)}if(l===o){Q=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Q=S;break e}Q=l.return}}if(ge=r,xn(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Al,e)}catch{}n=!0}return n}finally{ve=s,Ut.transition=t}}return!1}function up(e,t,s){t=qr(s,t),t=tv(e,t,1),e=rn(e,t,1),t=dt(),e!==null&&(Aa(e,1,t),St(e,t))}function Ie(e,t,s){if(e.tag===3)up(e,e,s);else for(;t!==null;){if(t.tag===3){up(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(an===null||!an.has(n))){e=qr(s,e),e=sv(t,e,1),t=rn(t,e,1),e=dt(),t!==null&&(Aa(t,1,e),St(t,e));break}}t=t.return}}function hS(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&s,Je===e&&(Qe&s)===s&&(qe===4||qe===3&&(Qe&130023424)===Qe&&500>Fe()-Dh?zn(e,0):Oh|=s),St(e,t)}function jv(e,t){t===0&&(e.mode&1?(t=ao,ao<<=1,!(ao&130023424)&&(ao=4194304)):t=1);var s=dt();e=_s(e,t),e!==null&&(Aa(e,t,s),St(e,s))}function fS(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),jv(e,s)}function mS(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(t),jv(e,s)}var Sv;Sv=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)yt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return yt=!1,tS(e,t,s);yt=!!(e.flags&131072)}else yt=!1,Ne&&t.flags&1048576&&E0(t,ol,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;$o(e,t),e=t.pendingProps;var r=Fr(t,ot.current);Or(t,s),r=Ch(null,t,n,e,r,s);var a=Th();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(n)?(a=!0,il(t)):a=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Sh(t),r.updater=$l,t.stateNode=r,r._reactInternals=t,Wu(t,n,e,s),t=Ku(null,t,n,!0,a,s)):(t.tag=0,Ne&&a&&gh(t),ct(null,t,r,s),t=t.child),t;case 16:n=t.elementType;e:{switch($o(e,t),e=t.pendingProps,r=n._init,n=r(n._payload),t.type=n,r=t.tag=gS(n),e=Gt(n,e),r){case 0:t=Ju(null,t,n,e,s);break e;case 1:t=ep(null,t,n,e,s);break e;case 11:t=Qm(null,t,n,e,s);break e;case 14:t=Zm(null,t,n,Gt(n.type,e),s);break e}throw Error(U(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Gt(n,r),Ju(e,t,n,r,s);case 1:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Gt(n,r),ep(e,t,n,r,s);case 3:e:{if(av(t),e===null)throw Error(U(387));n=t.pendingProps,a=t.memoizedState,r=a.element,I0(e,t),ul(t,n,null,s);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){r=qr(Error(U(423)),t),t=tp(e,t,n,s,r);break e}else if(n!==r){r=qr(Error(U(424)),t),t=tp(e,t,n,s,r);break e}else for(Tt=nn(t.stateNode.containerInfo.firstChild),Pt=t,Ne=!0,Qt=null,s=A0(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ur(),n===r){t=Es(e,t,s);break e}ct(e,t,n,s)}t=t.child}return t;case 5:return O0(t),e===null&&Vu(t),n=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,o=r.children,Mu(n,r)?o=null:a!==null&&Mu(n,a)&&(t.flags|=32),iv(e,t),ct(e,t,o,s),t.child;case 6:return e===null&&Vu(t),null;case 13:return ov(e,t,s);case 4:return kh(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=zr(t,null,n,s):ct(e,t,n,s),t.child;case 11:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Gt(n,r),Qm(e,t,n,r,s);case 7:return ct(e,t,t.pendingProps,s),t.child;case 8:return ct(e,t,t.pendingProps.children,s),t.child;case 12:return ct(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,we(ll,n._currentValue),n._currentValue=o,a!==null)if(ts(a.value,o)){if(a.children===r.children&&!wt.current){t=Es(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Ss(-1,s&-s),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),qu(a.return,s,t),l.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(U(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),qu(o,s,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ct(e,t,r.children,s),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,Or(t,s),r=Vt(r),n=n(r),t.flags|=1,ct(e,t,n,s),t.child;case 14:return n=t.type,r=Gt(n,t.pendingProps),r=Gt(n.type,r),Zm(e,t,n,r,s);case 15:return nv(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Gt(n,r),$o(e,t),t.tag=1,jt(n)?(e=!0,il(t)):e=!1,Or(t,s),ev(t,n,r),Wu(t,n,r,s),Ku(null,t,n,!0,e,s);case 19:return lv(e,t,s);case 22:return rv(e,t,s)}throw Error(U(156,t.tag))};function kv(e,t){return Xx(e,t)}function pS(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(e,t,s,n){return new pS(e,t,s,n)}function Fh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gS(e){if(typeof e=="function")return Fh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rh)return 11;if(e===ih)return 14}return 2}function ln(e,t){var s=e.alternate;return s===null?(s=Ft(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function zo(e,t,s,n,r,a){var o=2;if(n=e,typeof e=="function")Fh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fr:return Vn(s.children,r,a,t);case nh:o=8,r|=8;break;case pu:return e=Ft(12,s,t,r|2),e.elementType=pu,e.lanes=a,e;case gu:return e=Ft(13,s,t,r),e.elementType=gu,e.lanes=a,e;case xu:return e=Ft(19,s,t,r),e.elementType=xu,e.lanes=a,e;case Ox:return zl(s,r,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rx:o=10;break e;case Ix:o=9;break e;case rh:o=11;break e;case ih:o=14;break e;case qs:o=16,n=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=Ft(o,s,t,r),t.elementType=e,t.type=n,t.lanes=a,t}function Vn(e,t,s,n){return e=Ft(7,e,n,t),e.lanes=s,e}function zl(e,t,s,n){return e=Ft(22,e,n,t),e.elementType=Ox,e.lanes=s,e.stateNode={isHidden:!1},e}function Uc(e,t,s){return e=Ft(6,e,null,t),e.lanes=s,e}function zc(e,t,s){return t=Ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xS(e,t,s,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wc(0),this.expirationTimes=wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wc(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uh(e,t,s,n,r,a,o,l,c){return e=new xS(e,t,s,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ft(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sh(a),e}function vS(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function Nv(e){if(!e)return dn;e=e._reactInternals;e:{if(er(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var s=e.type;if(jt(s))return N0(e,s,t)}return t}function _v(e,t,s,n,r,a,o,l,c){return e=Uh(s,n,!0,e,r,a,o,l,c),e.context=Nv(null),s=e.current,n=dt(),r=on(s),a=Ss(n,r),a.callback=t??null,rn(s,a,r),e.current.lanes=r,Aa(e,r,n),St(e,n),e}function Vl(e,t,s,n){var r=t.current,a=dt(),o=on(r);return s=Nv(s),t.context===null?t.context=s:t.pendingContext=s,t=Ss(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=rn(r,t,o),e!==null&&(es(e,r,o,a),Do(e,r,o)),o}function vl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function zh(e,t){dp(e,t),(e=e.alternate)&&dp(e,t)}function yS(){return null}var Ev=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vh(e){this._internalRoot=e}ql.prototype.render=Vh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));Vl(e,t,null,null)};ql.prototype.unmount=Vh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gn(function(){Vl(null,e,null,null)}),t[Ns]=null}};function ql(e){this._internalRoot=e}ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=r0();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Hs.length&&t!==0&&t<Hs[s].priority;s++);Hs.splice(s,0,e),s===0&&a0(e)}};function qh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hp(){}function bS(e,t,s,n,r){if(r){if(typeof n=="function"){var a=n;n=function(){var u=vl(o);a.call(u)}}var o=_v(t,n,e,0,null,!1,!1,"",hp);return e._reactRootContainer=o,e[Ns]=o.current,aa(e.nodeType===8?e.parentNode:e),Gn(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var u=vl(c);l.call(u)}}var c=Uh(e,0,!1,null,null,!1,!1,"",hp);return e._reactRootContainer=c,e[Ns]=c.current,aa(e.nodeType===8?e.parentNode:e),Gn(function(){Vl(t,c,s,n)}),c}function Wl(e,t,s,n,r){var a=s._reactRootContainer;if(a){var o=a;if(typeof r=="function"){var l=r;r=function(){var c=vl(o);l.call(c)}}Vl(t,o,e,r)}else o=bS(s,t,e,r,n);return vl(o)}s0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ci(t.pendingLanes);s!==0&&(lh(t,s|1),St(t,Fe()),!(ge&6)&&(Br=Fe()+500,xn()))}break;case 13:Gn(function(){var n=_s(e,1);if(n!==null){var r=dt();es(n,e,1,r)}}),zh(e,1)}};ch=function(e){if(e.tag===13){var t=_s(e,134217728);if(t!==null){var s=dt();es(t,e,134217728,s)}zh(e,134217728)}};n0=function(e){if(e.tag===13){var t=on(e),s=_s(e,t);if(s!==null){var n=dt();es(s,e,t,n)}zh(e,t)}};r0=function(){return ve};i0=function(e,t){var s=ve;try{return ve=e,t()}finally{ve=s}};Eu=function(e,t,s){switch(t){case"input":if(bu(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var r=Dl(n);if(!r)throw Error(U(90));Lx(n),bu(n,r)}}}break;case"textarea":$x(e,s);break;case"select":t=s.value,t!=null&&Pr(e,!!s.multiple,t,!1)}};Wx=Lh;Hx=Gn;var wS={usingClientEntryPoint:!1,Events:[Ia,xr,Dl,qx,Bx,Lh]},bi={findFiberByHostInstance:On,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jS={bundleType:bi.bundleType,version:bi.version,rendererPackageName:bi.rendererPackageName,rendererConfig:bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gx(e),e===null?null:e.stateNode},findFiberByHostInstance:bi.findFiberByHostInstance||yS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{Al=vo.inject(jS),cs=vo}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS;Rt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qh(t))throw Error(U(200));return vS(e,t,null,s)};Rt.createRoot=function(e,t){if(!qh(e))throw Error(U(299));var s=!1,n="",r=Ev;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Uh(e,1,!1,null,null,s,!1,n,r),e[Ns]=t.current,aa(e.nodeType===8?e.parentNode:e),new Vh(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=Gx(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return Gn(e)};Rt.hydrate=function(e,t,s){if(!Bl(t))throw Error(U(200));return Wl(null,e,t,!0,s)};Rt.hydrateRoot=function(e,t,s){if(!qh(e))throw Error(U(405));var n=s!=null&&s.hydratedSources||null,r=!1,a="",o=Ev;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=_v(t,null,e,1,s??null,r,!1,a,o),e[Ns]=t.current,aa(e),n)for(e=0;e<n.length;e++)s=n[e],r=s._getVersion,r=r(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,r]:t.mutableSourceEagerHydrationData.push(s,r);return new ql(t)};Rt.render=function(e,t,s){if(!Bl(t))throw Error(U(200));return Wl(null,e,t,!1,s)};Rt.unmountComponentAtNode=function(e){if(!Bl(e))throw Error(U(40));return e._reactRootContainer?(Gn(function(){Wl(null,null,e,!1,function(){e._reactRootContainer=null,e[Ns]=null})}),!0):!1};Rt.unstable_batchedUpdates=Lh;Rt.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Bl(s))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return Wl(e,t,s,!1,n)};Rt.version="18.3.1-next-f1338f8080-20240426";function Cv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cv)}catch(e){console.error(e)}}Cv(),Cx.exports=Rt;var SS=Cx.exports,Tv,fp=SS;Tv=fp.createRoot,fp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},pa.apply(this,arguments)}var Qs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qs||(Qs={}));const mp="popstate";function kS(e){e===void 0&&(e={});function t(r,a){let{pathname:o="/",search:l="",hash:c=""}=tr(r.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ad("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:yl(a))}function n(r,a){Bh(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return _S(t,s,n,e)}function Te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NS(){return Math.random().toString(36).substr(2,8)}function pp(e,t){return{usr:e.state,key:e.key,idx:t}}function ad(e,t,s,n){return s===void 0&&(s=null),pa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?tr(t):t,{state:s,key:t&&t.key||n||NS()})}function yl(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function tr(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function _S(e,t,s,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:a=!1}=n,o=r.history,l=Qs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(pa({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Qs.Pop;let w=d(),p=w==null?null:w-u;u=w,c&&c({action:l,location:y.location,delta:p})}function f(w,p){l=Qs.Push;let x=ad(y.location,w,p);s&&s(x,w),u=d()+1;let b=pp(x,u),S=y.createHref(x);try{o.pushState(b,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(S)}a&&c&&c({action:l,location:y.location,delta:1})}function g(w,p){l=Qs.Replace;let x=ad(y.location,w,p);s&&s(x,w),u=d();let b=pp(x,u),S=y.createHref(x);o.replaceState(b,"",S),a&&c&&c({action:l,location:y.location,delta:0})}function v(w){let p=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof w=="string"?w:yl(w);return x=x.replace(/ $/,"%20"),Te(p,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,p)}let y={get action(){return l},get location(){return e(r,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(mp,h),c=w,()=>{r.removeEventListener(mp,h),c=null}},createHref(w){return t(r,w)},createURL:v,encodeLocation(w){let p=v(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:g,go(w){return o.go(w)}};return y}var gp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gp||(gp={}));function ES(e,t,s){return s===void 0&&(s="/"),CS(e,t,s)}function CS(e,t,s,n){let r=typeof t=="string"?tr(t):t,a=Wr(r.pathname||"/",s);if(a==null)return null;let o=Pv(e);TS(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=US(a);l=$S(o[c],u)}return l}function Pv(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let r=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Te(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=cn([n,c.relativePath]),d=s.concat(c);a.children&&a.children.length>0&&(Te(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Pv(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:LS(u,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,o);else for(let c of Av(a.path))r(a,o,c)}),t}function Av(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,r=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return r?[a,""]:[a];let o=Av(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function TS(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:MS(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const PS=/^:[\w-]+$/,AS=3,RS=2,IS=1,OS=10,DS=-2,xp=e=>e==="*";function LS(e,t){let s=e.split("/"),n=s.length;return s.some(xp)&&(n+=DS),t&&(n+=RS),s.filter(r=>!xp(r)).reduce((r,a)=>r+(PS.test(a)?AS:a===""?IS:OS),n)}function MS(e,t){return e.length===t.length&&e.slice(0,-1).every((n,r)=>n===t[r])?e[e.length-1]-t[t.length-1]:0}function $S(e,t,s){let{routesMeta:n}=e,r={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=od({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:cn([a,h.pathname]),pathnameBase:BS(cn([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=cn([a,h.pathnameBase]))}return o}function od(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=FS(e.path,e.caseSensitive,e.end),r=t.match(s);if(!r)return null;let a=r[0],o=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let y=l[h]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const v=l[h];return g&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function FS(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Bh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}function US(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Wr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function zS(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:r=""}=typeof e=="string"?tr(e):e;return{pathname:s?s.startsWith("/")?s:VS(s,t):t,search:WS(n),hash:HS(r)}}function VS(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function Vc(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qS(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Wh(e,t){let s=qS(e);return t?s.map((n,r)=>r===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Hh(e,t,s,n){n===void 0&&(n=!1);let r;typeof e=="string"?r=tr(e):(r=pa({},e),Te(!r.pathname||!r.pathname.includes("?"),Vc("?","pathname","search",r)),Te(!r.pathname||!r.pathname.includes("#"),Vc("#","pathname","hash",r)),Te(!r.search||!r.search.includes("#"),Vc("#","search","hash",r)));let a=e===""||r.pathname==="",o=a?"/":r.pathname,l;if(o==null)l=s;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=zS(r,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const cn=e=>e.join("/").replace(/\/\/+/g,"/"),BS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function JS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Rv=["post","put","patch","delete"];new Set(Rv);const KS=["get",...Rv];new Set(KS);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ga(){return ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ga.apply(this,arguments)}const Hl=m.createContext(null),Iv=m.createContext(null),Is=m.createContext(null),Jl=m.createContext(null),ms=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Ov=m.createContext(null);function GS(e,t){let{relative:s}=t===void 0?{}:t;ti()||Te(!1);let{basename:n,navigator:r}=m.useContext(Is),{hash:a,pathname:o,search:l}=Kl(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:cn([n,o])),r.createHref({pathname:c,search:l,hash:a})}function ti(){return m.useContext(Jl)!=null}function Os(){return ti()||Te(!1),m.useContext(Jl).location}function Dv(e){m.useContext(Is).static||m.useLayoutEffect(e)}function Ke(){let{isDataRoute:e}=m.useContext(ms);return e?uk():YS()}function YS(){ti()||Te(!1);let e=m.useContext(Hl),{basename:t,future:s,navigator:n}=m.useContext(Is),{matches:r}=m.useContext(ms),{pathname:a}=Os(),o=JSON.stringify(Wh(r,s.v7_relativeSplatPath)),l=m.useRef(!1);return Dv(()=>{l.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=Hh(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:cn([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,a,e])}const Lv=m.createContext(null);function Mv(){return m.useContext(Lv)}function XS(e){let t=m.useContext(ms).outlet;return t&&m.createElement(Lv.Provider,{value:e},t)}function QS(){let{matches:e}=m.useContext(ms),t=e[e.length-1];return t?t.params:{}}function Kl(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=m.useContext(Is),{matches:r}=m.useContext(ms),{pathname:a}=Os(),o=JSON.stringify(Wh(r,n.v7_relativeSplatPath));return m.useMemo(()=>Hh(e,JSON.parse(o),a,s==="path"),[e,o,a,s])}function ZS(e,t){return ek(e,t)}function ek(e,t,s,n){ti()||Te(!1);let{navigator:r,static:a}=m.useContext(Is),{matches:o}=m.useContext(ms),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=Os(),h;if(t){var f;let p=typeof t=="string"?tr(t):t;u==="/"||(f=p.pathname)!=null&&f.startsWith(u)||Te(!1),h=p}else h=d;let g=h.pathname||"/",v=g;if(u!=="/"){let p=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(p.length).join("/")}let y=ES(e,{pathname:v}),w=ik(y&&y.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:cn([u,r.encodeLocation?r.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?u:cn([u,r.encodeLocation?r.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),o,s,n);return t&&w?m.createElement(Jl.Provider,{value:{location:ga({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Qs.Pop}},w):w}function tk(){let e=ck(),t=JS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),s?m.createElement("pre",{style:r},s):null,null)}const sk=m.createElement(tk,null);class nk extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?m.createElement(ms.Provider,{value:this.props.routeContext},m.createElement(Ov.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rk(e){let{routeContext:t,match:s,children:n}=e,r=m.useContext(Hl);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),m.createElement(ms.Provider,{value:t},n)}function ik(e,t,s,n){var r;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var a;if(!s)return null;if(s.errors)e=s.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(r=s)==null?void 0:r.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Te(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=s,v=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let g,v=!1,y=null,w=null;s&&(g=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||sk,c&&(u<0&&f===0?(dk("route-fallback"),v=!0,w=null):u===f&&(v=!0,w=h.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,f+1)),x=()=>{let b;return g?b=y:v?b=w:h.route.Component?b=m.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,m.createElement(rk,{match:h,routeContext:{outlet:d,matches:p,isDataRoute:s!=null},children:b})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?m.createElement(nk,{location:s.location,revalidation:s.revalidation,component:y,error:g,children:x(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):x()},null)}var $v=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($v||{}),Fv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Fv||{});function ak(e){let t=m.useContext(Hl);return t||Te(!1),t}function ok(e){let t=m.useContext(Iv);return t||Te(!1),t}function lk(e){let t=m.useContext(ms);return t||Te(!1),t}function Uv(e){let t=lk(),s=t.matches[t.matches.length-1];return s.route.id||Te(!1),s.route.id}function ck(){var e;let t=m.useContext(Ov),s=ok(),n=Uv();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function uk(){let{router:e}=ak($v.UseNavigateStable),t=Uv(Fv.UseNavigateStable),s=m.useRef(!1);return Dv(()=>{s.current=!0}),m.useCallback(function(r,a){a===void 0&&(a={}),s.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,ga({fromRouteId:t},a)))},[e,t])}const vp={};function dk(e,t,s){vp[e]||(vp[e]=!0)}function hk(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function or(e){let{to:t,replace:s,state:n,relative:r}=e;ti()||Te(!1);let{future:a,static:o}=m.useContext(Is),{matches:l}=m.useContext(ms),{pathname:c}=Os(),u=Ke(),d=Hh(t,Wh(l,a.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(h),{replace:s,state:n,relative:r}),[u,h,r,s,n]),null}function zv(e){return XS(e.context)}function ye(e){Te(!1)}function fk(e){let{basename:t="/",children:s=null,location:n,navigationType:r=Qs.Pop,navigator:a,static:o=!1,future:l}=e;ti()&&Te(!1);let c=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:a,static:o,future:ga({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=tr(n));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:v="default"}=n,y=m.useMemo(()=>{let w=Wr(d,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:g,key:v},navigationType:r}},[c,d,h,f,g,v,r]);return y==null?null:m.createElement(Is.Provider,{value:u},m.createElement(Jl.Provider,{children:s,value:y}))}function mk(e){let{children:t,location:s}=e;return ZS(ld(t),s)}new Promise(()=>{});function ld(e,t){t===void 0&&(t=[]);let s=[];return m.Children.forEach(e,(n,r)=>{if(!m.isValidElement(n))return;let a=[...t,r];if(n.type===m.Fragment){s.push.apply(s,ld(n.props.children,a));return}n.type!==ye&&Te(!1),!n.props.index||!n.props.children||Te(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ld(n.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},bl.apply(this,arguments)}function Vv(e,t){if(e==null)return{};var s={},n=Object.keys(e),r,a;for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&(s[r]=e[r]);return s}function pk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gk(e,t){return e.button===0&&(!t||t==="_self")&&!pk(e)}function cd(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(r=>[s,r]):[[s,n]])},[]))}function xk(e,t){let s=cd(e);return t&&t.forEach((n,r)=>{s.has(r)||t.getAll(r).forEach(a=>{s.append(r,a)})}),s}const vk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yk=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],bk="6";try{window.__reactRouterVersion=bk}catch{}const wk=m.createContext({isTransitioning:!1}),jk="startTransition",yp=fu[jk];function Sk(e){let{basename:t,children:s,future:n,window:r}=e,a=m.useRef();a.current==null&&(a.current=kS({window:r,v5Compat:!0}));let o=a.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=m.useCallback(h=>{u&&yp?yp(()=>c(h)):c(h)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>hk(n),[n]),m.createElement(fk,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const kk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=m.forwardRef(function(t,s){let{onClick:n,relative:r,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=Vv(t,vk),{basename:g}=m.useContext(Is),v,y=!1;if(typeof u=="string"&&Nk.test(u)&&(v=u,kk))try{let b=new URL(window.location.href),S=u.startsWith("//")?new URL(b.protocol+u):new URL(u),j=Wr(S.pathname,g);S.origin===b.origin&&j!=null?u=j+S.search+S.hash:y=!0}catch{}let w=GS(u,{relative:r}),p=Ek(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h});function x(b){n&&n(b),b.defaultPrevented||p(b)}return m.createElement("a",bl({},f,{href:v||w,onClick:y||a?n:x,ref:s,target:c}))}),xa=m.forwardRef(function(t,s){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=Vv(t,yk),f=Kl(c,{relative:h.relative}),g=Os(),v=m.useContext(Iv),{navigator:y,basename:w}=m.useContext(Is),p=v!=null&&Ck(f)&&u===!0,x=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,b=g.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(b=b.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&w&&(S=Wr(S,w)||S);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=b===x||!o&&b.startsWith(x)&&b.charAt(j)==="/",_=S!=null&&(S===x||!o&&S.startsWith(x)&&S.charAt(x.length)==="/"),C={isActive:N,isPending:_,isTransitioning:p},I=N?n:void 0,M;typeof a=="function"?M=a(C):M=[a,N?"active":null,_?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(C):l;return m.createElement($t,bl({},h,{"aria-current":I,className:M,ref:s,style:V,to:c,viewTransition:u}),typeof d=="function"?d(C):d)});var ud;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ud||(ud={}));var bp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bp||(bp={}));function _k(e){let t=m.useContext(Hl);return t||Te(!1),t}function Ek(e,t){let{target:s,replace:n,state:r,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ke(),u=Os(),d=Kl(e,{relative:o});return m.useCallback(h=>{if(gk(h,s)){h.preventDefault();let f=n!==void 0?n:yl(u)===yl(d);c(e,{replace:f,state:r,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,n,r,s,e,a,o,l])}function qv(e){let t=m.useRef(cd(e)),s=m.useRef(!1),n=Os(),r=m.useMemo(()=>xk(n.search,s.current?null:t.current),[n.search]),a=Ke(),o=m.useCallback((l,c)=>{const u=cd(typeof l=="function"?l(r):l);s.current=!0,a("?"+u,c)},[a,r]);return[r,o]}function Ck(e,t){t===void 0&&(t={});let s=m.useContext(wk);s==null&&Te(!1);let{basename:n}=_k(ud.useViewTransitionState),r=Kl(e,{relative:t.relative});if(!s.isTransitioning)return!1;let a=Wr(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=Wr(s.nextLocation.pathname,n)||s.nextLocation.pathname;return od(r.pathname,o)!=null||od(r.pathname,a)!=null}const Tk="modulepreload",Pk=function(e){return"/accreda.github.io/"+e},wp={},kt=function(t,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=Pk(c),c in wp)return;wp[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Tk,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},Ak=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>kt(async()=>{const{default:n}=await Promise.resolve().then(()=>si);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class Jh extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class Rk extends Jh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ik extends Jh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ok extends Jh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var dd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dd||(dd={}));var Dk=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Lk{constructor(t,{headers:s={},customFetch:n,region:r=dd.Any}={}){this.url=t,this.headers=s,this.region=r,this.fetch=Ak(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return Dk(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:o}=s;let l={},{region:c}=s;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(v=>{throw new Rk(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Ik(d);if(!d.ok)throw new Ok(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield d.json():f==="application/octet-stream"?g=yield d.blob():f==="text/event-stream"?g=d:f==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(r){return{data:null,error:r}}})}}var vt={},Kh={},Gl={},Da={},Yl={},Xl={},Mk=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hr=Mk();const $k=Hr.fetch,Bv=Hr.fetch.bind(Hr),Wv=Hr.Headers,Fk=Hr.Request,Uk=Hr.Response,si=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wv,Request:Fk,Response:Uk,default:Bv,fetch:$k},Symbol.toStringTag,{value:"Module"})),zk=Xw(si);var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});let Vk=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ql.default=Vk;var Hv=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xl,"__esModule",{value:!0});const qk=Hv(zk),Bk=Hv(Ql);let Wk=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=qk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,h=null,f=a.status,g=a.statusText;if(a.ok){if(this.method!=="HEAD"){const p=await a.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=p:d=JSON.parse(p))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await a.text();try{u=JSON.parse(y),Array.isArray(u)&&a.status===404&&(d=[],u=null,f=200,g="OK")}catch{a.status===404&&y===""?(f=204,g="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,g="OK"),u&&this.shouldThrowOnError)throw new Bk.default(u)}return{error:u,data:d,count:h,status:f,statusText:g}});return this.shouldThrowOnError||(r=r.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,s)}returns(){return this}overrideTypes(){return this}};Xl.default=Wk;var Hk=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yl,"__esModule",{value:!0});const Jk=Hk(Xl);let Kk=class extends Jk.default{select(t){let s=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Yl.default=Kk;var Gk=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Da,"__esModule",{value:!0});const Yk=Gk(Yl);let Xk=class extends Yk.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};Da.default=Xk;var Qk=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gl,"__esModule",{value:!0});const wi=Qk(Da);let Zk=class{constructor(t,{headers:s={},schema:n,fetch:r}){this.url=t,this.headers=s,this.schema=n,this.fetch=r}select(t,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new wi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:n=!0}={}){const r="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new wi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new wi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new wi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new wi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Gl.default=Zk;var Zl={},ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.version=void 0;ec.version="0.0.0-automated";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.DEFAULT_HEADERS=void 0;const eN=ec;Zl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${eN.version}`};var Jv=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kh,"__esModule",{value:!0});const tN=Jv(Gl),sN=Jv(Da),nN=Zl;let rN=class Kv{constructor(t,{headers:s={},schema:n,fetch:r}={}){this.url=t,this.headers=Object.assign(Object.assign({},nN.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(t){const s=new URL(`${this.url}/${t}`);return new tN.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Kv(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:r=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=s);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new sN.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Kh.default=rN;var ni=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vt,"__esModule",{value:!0});vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const Gv=ni(Kh);vt.PostgrestClient=Gv.default;const Yv=ni(Gl);vt.PostgrestQueryBuilder=Yv.default;const Xv=ni(Da);vt.PostgrestFilterBuilder=Xv.default;const Qv=ni(Yl);vt.PostgrestTransformBuilder=Qv.default;const Zv=ni(Xl);vt.PostgrestBuilder=Zv.default;const ey=ni(Ql);vt.PostgrestError=ey.default;var iN=vt.default={PostgrestClient:Gv.default,PostgrestQueryBuilder:Yv.default,PostgrestFilterBuilder:Xv.default,PostgrestTransformBuilder:Qv.default,PostgrestBuilder:Zv.default,PostgrestError:ey.default};const{PostgrestClient:aN,PostgrestQueryBuilder:kI,PostgrestFilterBuilder:NI,PostgrestTransformBuilder:_I,PostgrestBuilder:EI,PostgrestError:CI}=iN,oN="2.11.2",lN={"X-Client-Info":`realtime-js/${oN}`},cN="1.0.0",ty=1e4,uN=1e3;var Lr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Lr||(Lr={}));var Et;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Et||(Et={}));var Xt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Xt||(Xt={}));var hd;(function(e){e.websocket="websocket"})(hd||(hd={}));var In;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(In||(In={}));class dN{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const r=s.getUint8(1),a=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+r));o=o+r;const c=n.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class sy{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(be||(be={}));const jp=(e,t,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,o)=>(a[o]=hN(o,e,t,r),a),{})},hN=(e,t,s,n)=>{const r=t.find(l=>l.name===e),a=r==null?void 0:r.type,o=s[e];return a&&!n.includes(a)?ny(a,o):fd(o)},ny=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return gN(t,s)}switch(e){case be.bool:return fN(t);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return mN(t);case be.json:case be.jsonb:return pN(t);case be.timestamp:return xN(t);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return fd(t);default:return fd(t)}},fd=e=>e,fN=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},mN=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},pN=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},gN=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,s);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>ny(t,l))}return e},xN=e=>typeof e=="string"?e.replace(" ","T"):e,ry=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class qc{constructor(t,s,n={},r=ty){this.channel=t,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Sp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Sp||(Sp={}));class zi{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zi.syncState(this.state,r,a,o),this.pendingDiffs.forEach(c=>{this.state=zi.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=zi.syncDiff(this.state,r,a,o),l())}),this.onJoin((r,a,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:o})}),this.onLeave((r,a,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,r){const a=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const f=d.map(w=>w.presence_ref),g=h.map(w=>w.presence_ref),v=d.filter(w=>g.indexOf(w.presence_ref)<0),y=h.filter(w=>f.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,r)}static syncDiff(t,s,n,r){const{joins:a,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,r(l,u,c),u.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const r=t[n];return"metas"in r?s[n]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[n]=r,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(kp||(kp={}));var Np;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Np||(Np={}));var ys;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ys||(ys={}));class Gh{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new qc(this,Xt.join,this.params,this.timeout),this.rejoinTimer=new sy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xt.reply,{},(r,a)=>{this._trigger(this._replyEventName(a),r)}),this.presence=new zi(this),this.broadcastEndpointURL=ry(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(ys.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(ys.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(ys.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,g=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let y=0;y<g;y++){const w=f[y],{filter:{event:p,schema:x,table:b,filter:S}}=w,j=d&&d[y];if(j&&j.event===p&&j.schema===x&&j.table===b&&j.filter===S)v.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),t==null||t(ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(ys.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this._on(t,s,n)}async send(t,s={}){var n,r;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Et.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new qc(this,Xt.leave,{},t);r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(t,s,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(a),o}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new qc(this,t,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var r,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Xt;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(g=>{var v,y,w;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(y=g.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(f,n)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var v,y,w,p,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const S=g.id,j=(v=g.filter)===null||v===void 0?void 0:v.event;return S&&((y=s.ids)===null||y===void 0?void 0:y.includes(S))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(x=(p=g==null?void 0:g.filter)===null||p===void 0?void 0:p.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:w,commit_timestamp:p,type:x,errors:b}=v;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:p,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(v))}g.callback(f,n)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const r=t.toLocaleLowerCase(),a={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Gh.isEqual(r.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Xt.close,{},t)}_onError(t){this._on(Xt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=jp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=jp(t.columns,t.old_record)),s}}const vN=()=>{},yN=typeof WebSocket<"u",bN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wN{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=lN,this.params={},this.timeout=ty,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=vN,this.conn=null,this.sendBuffer=[],this.serializer=new dN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>kt(async()=>{const{default:c}=await Promise.resolve().then(()=>si);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${hd.websocket}`,this.httpEndpoint=ry(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(a,o)=>o(JSON.stringify(a)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sy(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(yN){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new jN(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),kt(async()=>{const{default:t}=await import("./browser-Cq5srFM-.js").then(s=>s.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cN}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Lr.connecting:return In.Connecting;case Lr.open:return In.Open;case Lr.closing:return In.Closing;default:return In.Closed}}isConnected(){return this.connectionState()===In.Open}channel(t,s={config:{}}){const n=new Gh(`realtime:${t}`,s,this);return this.channels.push(n),n}push(t){const{topic:s,event:n,payload:r,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${a})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s}),r.joinedOnce&&r._isJoined()&&r._push(Xt.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(uN,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:r,payload:a,ref:o}=s;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,a),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Xt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${t}${n}${r}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([bN],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class jN{constructor(t,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Lr.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class Yh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function We(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class SN extends Yh{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class md extends Yh{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var kN=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const iy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>kt(async()=>{const{default:n}=await Promise.resolve().then(()=>si);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},NN=()=>kN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kt(()=>Promise.resolve().then(()=>si),void 0)).Response:Response}),pd=e=>{if(Array.isArray(e))return e.map(s=>pd(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[r]=pd(n)}),t};var sr=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Bc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_N=(e,t,s)=>sr(void 0,void 0,void 0,function*(){const n=yield NN();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(r=>{t(new SN(Bc(r),e.status||500))}).catch(r=>{t(new md(Bc(r),r))}):t(new md(Bc(e),e))}),EN=(e,t,s,n)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function La(e,t,s,n,r,a){return sr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,EN(t,n,r,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>_N(c,l,n))})})}function wl(e,t,s,n){return sr(this,void 0,void 0,function*(){return La(e,"GET",t,s,n)})}function Ws(e,t,s,n,r){return sr(this,void 0,void 0,function*(){return La(e,"POST",t,n,r,s)})}function CN(e,t,s,n,r){return sr(this,void 0,void 0,function*(){return La(e,"PUT",t,n,r,s)})}function TN(e,t,s,n){return sr(this,void 0,void 0,function*(){return La(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function ay(e,t,s,n,r){return sr(this,void 0,void 0,function*(){return La(e,"DELETE",t,n,r,s)})}var gt=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const PN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_p={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class AN{constructor(t,s={},n,r){this.url=t,this.headers=s,this.bucketId=n,this.fetch=iy(r)}uploadOrUpdate(t,s,n,r){return gt(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},_p),r);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(We(a))return{data:null,error:a};throw a}})}upload(t,s,n){return gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,r){return gt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const u=Object.assign({upsert:_p.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(We(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return gt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const a=yield Ws(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Yh("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}update(t,s,n){return gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return gt(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}copy(t,s,n){return gt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ws(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}createSignedUrl(t,s,n){return gt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),a=yield Ws(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}createSignedUrls(t,s,n){return gt(this,void 0,void 0,function*(){try{const r=yield Ws(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}download(t,s){return gt(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield wl(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(We(l))return{data:null,error:l};throw l}})}info(t){return gt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield wl(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:pd(n),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}exists(t){return gt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield TN(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(We(n)&&n instanceof md){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),r=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&r.push(a);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return gt(this,void 0,void 0,function*(){try{return{data:yield ay(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}list(t,s,n){return gt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},PN),s),{prefix:t||""});return{data:yield Ws(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const RN="2.7.1",IN={"X-Client-Info":`storage-js/${RN}`};var lr=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class ON{constructor(t,s={},n){this.url=t,this.headers=Object.assign(Object.assign({},IN),s),this.fetch=iy(n)}listBuckets(){return lr(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}})}getBucket(t){return lr(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return lr(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return lr(this,void 0,void 0,function*(){try{return{data:yield CN(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}emptyBucket(t){return lr(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}deleteBucket(t){return lr(this,void 0,void 0,function*(){try{return{data:yield ay(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}}class DN extends ON{constructor(t,s={},n){super(t,s,n)}from(t){return new AN(this.url,this.headers,t,this.fetch)}}const LN="2.49.7";let Pi="";typeof Deno<"u"?Pi="deno":typeof document<"u"?Pi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pi="react-native":Pi="node";const MN={"X-Client-Info":`supabase-js-${Pi}/${LN}`},$N={headers:MN},FN={schema:"public"},UN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zN={};var VN=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const qN=e=>{let t;return e?t=e:typeof fetch>"u"?t=Bv:t=fetch,(...s)=>t(...s)},BN=()=>typeof Headers>"u"?Wv:Headers,WN=(e,t,s)=>{const n=qN(s),r=BN();return(a,o)=>VN(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var HN=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function JN(e){return e.replace(/\/$/,"")}function KN(e,t){var s,n;const{db:r,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>HN(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const oy="2.69.1",dr=30*1e3,gd=3,Wc=gd*dr,GN="http://localhost:9999",YN="supabase.auth.token",XN={"X-Client-Info":`gotrue-js/${oy}`},xd="X-Supabase-Api-Version",ly={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZN=6e5;class Xh extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class e2 extends Xh{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function t2(e){return ce(e)&&e.name==="AuthApiError"}class cy extends Xh{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class vn extends Xh{constructor(t,s,n,r){super(t,n,r),this.name=s,this.status=n}}class Us extends vn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function s2(e){return ce(e)&&e.name==="AuthSessionMissingError"}class Hc extends vn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yo extends vn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class bo extends vn{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function n2(e){return ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ep extends vn{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vd extends vn{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Jc(e){return ce(e)&&e.name==="AuthRetryableFetchError"}class Cp extends vn{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Vi extends vn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pp=` 	
\r=`.split(""),r2=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Pp.length;t+=1)e[Pp[t].charCodeAt(0)]=-2;for(let t=0;t<Tp.length;t+=1)e[Tp[t].charCodeAt(0)]=t;return e})();function uy(e,t,s){const n=r2[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ap(e){const t=[],s=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=o=>{o2(o,n,s)};for(let o=0;o<e.length;o+=1)uy(e.charCodeAt(o),r,a);return t.join("")}function i2(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function a2(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}i2(n,t)}}function o2(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function l2(e){const t=[],s={queue:0,queuedBits:0},n=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)uy(e.charCodeAt(r),s,n);return new Uint8Array(t)}function c2(e){const t=[];return a2(e,s=>t.push(s)),new Uint8Array(t)}function u2(e){return Math.round(Date.now()/1e3)+e}function d2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const as=()=>typeof window<"u"&&typeof document<"u",_n={tested:!1,writable:!1},qi=()=>{if(!as())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_n.tested)return _n.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),_n.tested=!0,_n.writable=!0}catch{_n.tested=!0,_n.writable=!1}return _n.writable};function h2(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,a)=>{t[a]=r})}catch{}return s.searchParams.forEach((n,r)=>{t[r]=n}),t}const dy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>kt(async()=>{const{default:n}=await Promise.resolve().then(()=>si);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},f2=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",hy=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},wo=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},jo=async(e,t)=>{await e.removeItem(t)};class tc{constructor(){this.promise=new tc.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}tc.promiseConstructor=Promise;function Kc(e){const t=e.split(".");if(t.length!==3)throw new Vi("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!QN.test(t[n]))throw new Vi("JWT not in base64url format");return{header:JSON.parse(Ap(t[0])),payload:JSON.parse(Ap(t[1])),signature:l2(t[2]),raw:{header:t[0],payload:t[1]}}}async function m2(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function p2(e,t){return new Promise((n,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){r(o);return}}})()})}function g2(e){return("0"+e.toString(16)).substr(-2)}function x2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let a=0;a<56;a++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(t),Array.from(t,g2).join("")}async function v2(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function y2(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await v2(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cr(e,t,s=!1){const n=x2();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await hy(e,`${t}-code-verifier`,r);const a=await y2(n);return[a,n===a?"plain":"s256"]}const b2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function w2(e){const t=e.headers.get(xd);if(!t||!t.match(b2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function j2(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function S2(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var k2=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};const Pn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),N2=[502,503,504];async function Rp(e){var t;if(!f2(e))throw new vd(Pn(e),0);if(N2.includes(e.status))throw new vd(Pn(e),e.status);let s;try{s=await e.json()}catch(a){throw new cy(Pn(a),a)}let n;const r=w2(e);if(r&&r.getTime()>=ly["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Cp(Pn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Us}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Cp(Pn(s),e.status,s.weak_password.reasons);throw new e2(Pn(s),e.status||500,n)}const _2=(e,t,s,n)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function pe(e,t,s,n){var r;const a=Object.assign({},n==null?void 0:n.headers);a[xd]||(a[xd]=ly["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await E2(e,t,s+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function E2(e,t,s,n,r,a){const o=_2(t,n,r,a);let l;try{l=await e(s,Object.assign({},o))}catch(c){throw console.error(c),new vd(Pn(c),0)}if(l.ok||await Rp(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Rp(c)}}function zs(e){var t;let s=null;A2(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=u2(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Ip(e){const t=zs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ks(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function C2(e){return{data:e,error:null}}function T2(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:a}=e,o=k2(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function P2(e){return e}function A2(e){return e.access_token&&e.refresh_token&&e.expires_in}var R2=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};class I2{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=dy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ks})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=R2(t,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:T2,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ks})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,r,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(a=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:P2});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ks})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Ks})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ks})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}}const O2={getItem:e=>qi()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{qi()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{qi()&&globalThis.localStorage.removeItem(e)}};function Op(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function D2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ur={debug:!!(globalThis&&qi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class L2 extends fy{}async function M2(e,t,s){ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ur.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new L2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ur.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}D2();const $2={url:GN,storageKey:YN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dp(e,t,s){return await s()}class va{constructor(t){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=va.nextInstanceID,va.nextInstanceID+=1,this.instanceID>0&&as()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},$2),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new I2({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=dy(r.fetch),this.lock=r.lock||Dp,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:as()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=M2:this.lock=Dp,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:qi()?this.storage=O2:(this.memoryStorage={},this.storage=Op(this.memoryStorage)):(this.memoryStorage={},this.storage=Op(this.memoryStorage)),as()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oy}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=h2(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),as()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:a}=await this._getSessionFromURL(s,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),n2(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ce(s)?{error:s}:{error:new cy("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,r;try{const a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:zs}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(ce(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var s,n,r;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await cr(this.storage,this.storageKey)),a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:v},xform:zs})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:zs})}else throw new yo("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(ce(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let s;if("email"in t){const{email:a,password:o,options:l}=t;s=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ip})}else if("phone"in t){const{phone:a,password:o,options:l}=t;s=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ip})}else throw new yo("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Hc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,r,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await wo(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:a,error:o}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:zs});if(await jo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Hc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:o})}catch(a){if(ce(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:s,provider:n,token:r,access_token:a,nonce:o}=t,l=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:zs}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Hc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,r,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await cr(this.storage,this.storageKey));const{error:h}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new yo("You must provide either an email or phone number.")}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,n;try{let r,a;"options"in t&&(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:zs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var s,n,r;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await cr(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:C2})}catch(a){if(ce(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Us;const{error:r}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:r,options:a}=t,{error:o}=await pe(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:r,options:a}=t,{data:o,error:l}=await pe(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new yo("You must provide either an email or phone number and a type")}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await wo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Wc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ks}):await this._useSession(async s=>{var n,r,a;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Us}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:Ks})})}catch(s){if(ce(s))return s2(s)&&(await this._removeSession(),await jo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new Us;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await cr(this.storage,this.storageKey));const{data:u,error:d}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ks});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Us;const s=Date.now()/1e3;let n=s,r=!0,a=null;const{payload:o}=Kc(t.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(ce(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Us;const{session:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!as())throw new bo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new bo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Ep("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ep("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new bo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const g=f-d;g*1e3<=dr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:y,error:w}=await this._getUser(a);if(w)throw w;const p={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(n){if(ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await wo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:a}=s;if(a)return{error:a};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(t2(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await jo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=d2(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,r;try{const{data:{session:a},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await cr(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(ce(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:r}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:f}=a;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return as()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ce(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,r;const{data:a,error:o}=s;if(o)throw o;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await p2(async r=>(r>0&&await m2(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:zs})),(r,a)=>{const o=200*Math.pow(2,r);return a&&Jc(a)&&Date.now()+o-n<dr})}catch(n){if(this._debug(s,"error",n),ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),as()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await wo(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Wc;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${Wc}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Jc(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Us;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new tc;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Us;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(r,"error",a),ce(a)){const o={session:null,error:a};return Jc(a)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,s,n=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await hy(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await jo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&as()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),dr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-t)/dr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${dr}ms, refresh threshold is ${gd} ticks`),r<=gd&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof fy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!as()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await cr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);r.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;return a?{data:null,error:a}:await pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,r;const{data:a,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;if(a)return{data:null,error:a};const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;return a?{data:null,error:a}:await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:r},error:a}=t;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Kc(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+ZN>Date.now()))return n;const{data:r,error:a}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!r.keys||r.keys.length===0)throw new Vi("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(o=>o.kid===t),!n)throw new Vi("No matching signing key found in JWKS");return n}async getClaims(t,s={keys:[]}){try{let n=t;if(!n){const{data:g,error:v}=await this.getSession();if(v||!g.session)return{data:null,error:v};n=g.session.access_token}const{header:r,payload:a,signature:o,raw:{header:l,payload:c}}=Kc(n);if(j2(a.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:a,header:r,signature:o},error:null}}const u=S2(r.alg),d=await this.fetchJwk(r.kid,s),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,c2(`${l}.${c}`)))throw new Vi("Invalid JWT signature");return{data:{claims:a,header:r,signature:o},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}}va.nextInstanceID=0;const F2=va;class U2 extends F2{constructor(t){super(t)}}var z2=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class V2{constructor(t,s,n){var r,a,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=JN(t),c=new URL(l);this.realtimeUrl=new URL("/realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("/auth/v1",c),this.storageUrl=new URL("/storage/v1",c),this.functionsUrl=new URL("/functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:FN,realtime:zN,auth:Object.assign(Object.assign({},UN),{storageKey:u}),global:$N},h=KN(n??{},d);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=WN(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new aN(`${l}/rest/v1`,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Lk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new DN(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return z2(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:a,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new U2({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new wN(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const q2=(e,t,s)=>new V2(e,t,s);console.log("Environment variables check:");console.log("NODE_ENV:","production");console.log("VITE_SUPABASE_URL exists:",!0);console.log("VITE_SUPABASE_ANON_KEY exists:",!0);console.log("VITE_SUPABASE_URL:","https://bbixvnkqroskholbxkgj.supabase.co");console.log("VITE_SUPABASE_ANON_KEY:","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU");const B2="https://bbixvnkqroskholbxkgj.supabase.co",W2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU",k=q2(B2,W2),Vo=Object.freeze(Object.defineProperty({__proto__:null,supabase:k},Symbol.toStringTag,{value:"Module"})),nr="/accreda.github.io/assets/accreda-logo-rSXzK5SL.png",my=m.createContext({});function H2(e){const t=m.useRef(null);return t.current===null&&(t.current=e()),t.current}const Qh=typeof window<"u",J2=Qh?m.useLayoutEffect:m.useEffect,Zh=m.createContext(null);function ef(e,t){e.indexOf(t)===-1&&e.push(t)}function tf(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const Cs=(e,t,s)=>s>t?t:s<e?e:s;let sf=()=>{};const Ts={},py=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function gy(e){return typeof e=="object"&&e!==null}const xy=e=>/^0[^.\s]+$/u.test(e);function nf(e){let t;return()=>(t===void 0&&(t=e()),t)}const zt=e=>e,K2=(e,t)=>s=>t(e(s)),Ma=(...e)=>e.reduce(K2),ya=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n};class rf{constructor(){this.subscriptions=[]}add(t){return ef(this.subscriptions,t),()=>tf(this.subscriptions,t)}notify(t,s,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,s,n);else for(let a=0;a<r;a++){const o=this.subscriptions[a];o&&o(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ds=e=>e*1e3,hs=e=>e/1e3;function vy(e,t){return t?e*(1e3/t):0}const yy=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,G2=1e-7,Y2=12;function X2(e,t,s,n,r){let a,o,l=0;do o=t+(s-t)/2,a=yy(o,n,r)-e,a>0?s=o:t=o;while(Math.abs(a)>G2&&++l<Y2);return o}function $a(e,t,s,n){if(e===t&&s===n)return zt;const r=a=>X2(a,0,1,e,s);return a=>a===0||a===1?a:yy(r(a),t,n)}const by=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,wy=e=>t=>1-e(1-t),jy=$a(.33,1.53,.69,.99),af=wy(jy),Sy=by(af),ky=e=>(e*=2)<1?.5*af(e):.5*(2-Math.pow(2,-10*(e-1))),of=e=>1-Math.sin(Math.acos(e)),Ny=wy(of),_y=by(of),Q2=$a(.42,0,1,1),Z2=$a(0,0,.58,1),Ey=$a(.42,0,.58,1),e_=e=>Array.isArray(e)&&typeof e[0]!="number",Cy=e=>Array.isArray(e)&&typeof e[0]=="number",t_={linear:zt,easeIn:Q2,easeInOut:Ey,easeOut:Z2,circIn:of,circInOut:_y,circOut:Ny,backIn:af,backInOut:Sy,backOut:jy,anticipate:ky},s_=e=>typeof e=="string",Lp=e=>{if(Cy(e)){sf(e.length===4);const[t,s,n,r]=e;return $a(t,s,n,r)}else if(s_(e))return t_[e];return e},So=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Mp={value:null};function n_(e,t){let s=new Set,n=new Set,r=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),e()),c++,h(l)}const d={schedule:(h,f=!1,g=!1)=>{const y=g&&r?s:n;return f&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(l=h,r){a=!0;return}r=!0,[s,n]=[n,s],s.forEach(u),t&&Mp.value&&Mp.value.frameloop[t].push(c),c=0,s.clear(),r=!1,a&&(a=!1,d.process(h))}};return d}const r_=40;function Ty(e,t){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,o=So.reduce((b,S)=>(b[S]=n_(a,t?S:void 0),b),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:g,postRender:v}=o,y=()=>{const b=Ts.useManualTiming?r.timestamp:performance.now();s=!1,Ts.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(b-r.timestamp,r_),1)),r.timestamp=b,r.isProcessing=!0,l.process(r),c.process(r),u.process(r),d.process(r),h.process(r),f.process(r),g.process(r),v.process(r),r.isProcessing=!1,s&&t&&(n=!1,e(y))},w=()=>{s=!0,n=!0,r.isProcessing||e(y)};return{schedule:So.reduce((b,S)=>{const j=o[S];return b[S]=(N,_=!1,C=!1)=>(s||w(),j.schedule(N,_,C)),b},{}),cancel:b=>{for(let S=0;S<So.length;S++)o[So[S]].cancel(b)},state:r,steps:o}}const{schedule:Pe,cancel:hn,state:Ye,steps:Gc}=Ty(typeof requestAnimationFrame<"u"?requestAnimationFrame:zt,!0);let qo;function i_(){qo=void 0}const bt={now:()=>(qo===void 0&&bt.set(Ye.isProcessing||Ts.useManualTiming?Ye.timestamp:performance.now()),qo),set:e=>{qo=e,queueMicrotask(i_)}},Py=e=>t=>typeof t=="string"&&t.startsWith(e),lf=Py("--"),a_=Py("var(--"),cf=e=>a_(e)?o_.test(e.split("/*")[0].trim()):!1,o_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ri={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ba={...ri,transform:e=>Cs(0,1,e)},ko={...ri,default:1},Bi=e=>Math.round(e*1e5)/1e5,uf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function l_(e){return e==null}const c_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,df=(e,t)=>s=>!!(typeof s=="string"&&c_.test(s)&&s.startsWith(e)||t&&!l_(s)&&Object.prototype.hasOwnProperty.call(s,t)),Ay=(e,t,s)=>n=>{if(typeof n!="string")return n;const[r,a,o,l]=n.match(uf);return{[e]:parseFloat(r),[t]:parseFloat(a),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},u_=e=>Cs(0,255,e),Yc={...ri,transform:e=>Math.round(u_(e))},Mn={test:df("rgb","red"),parse:Ay("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+Yc.transform(e)+", "+Yc.transform(t)+", "+Yc.transform(s)+", "+Bi(ba.transform(n))+")"};function d_(e){let t="",s="",n="",r="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),r=e.substring(4,5),t+=t,s+=s,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const yd={test:df("#"),parse:d_,transform:Mn.transform},Fa=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Vs=Fa("deg"),fs=Fa("%"),ae=Fa("px"),h_=Fa("vh"),f_=Fa("vw"),$p={...fs,parse:e=>fs.parse(e)/100,transform:e=>fs.transform(e*100)},kr={test:df("hsl","hue"),parse:Ay("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+fs.transform(Bi(t))+", "+fs.transform(Bi(s))+", "+Bi(ba.transform(n))+")"},nt={test:e=>Mn.test(e)||yd.test(e)||kr.test(e),parse:e=>Mn.test(e)?Mn.parse(e):kr.test(e)?kr.parse(e):yd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Mn.transform(e):kr.transform(e)},m_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function p_(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(uf))==null?void 0:t.length)||0)+(((s=e.match(m_))==null?void 0:s.length)||0)>0}const Ry="number",Iy="color",g_="var",x_="var(",Fp="${}",v_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wa(e){const t=e.toString(),s=[],n={color:[],number:[],var:[]},r=[];let a=0;const l=t.replace(v_,c=>(nt.test(c)?(n.color.push(a),r.push(Iy),s.push(nt.parse(c))):c.startsWith(x_)?(n.var.push(a),r.push(g_),s.push(c)):(n.number.push(a),r.push(Ry),s.push(parseFloat(c))),++a,Fp)).split(Fp);return{values:s,split:l,indexes:n,types:r}}function Oy(e){return wa(e).values}function Dy(e){const{split:t,types:s}=wa(e),n=t.length;return r=>{let a="";for(let o=0;o<n;o++)if(a+=t[o],r[o]!==void 0){const l=s[o];l===Ry?a+=Bi(r[o]):l===Iy?a+=nt.transform(r[o]):a+=r[o]}return a}}const y_=e=>typeof e=="number"?0:e;function b_(e){const t=Oy(e);return Dy(e)(t.map(y_))}const fn={test:p_,parse:Oy,createTransformer:Dy,getAnimatableNone:b_};function Xc(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function w_({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let r=0,a=0,o=0;if(!t)r=a=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;r=Xc(c,l,e+1/3),a=Xc(c,l,e),o=Xc(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}function jl(e,t){return s=>s>0?t:e}const Ee=(e,t,s)=>e+(t-e)*s,Qc=(e,t,s)=>{const n=e*e,r=s*(t*t-n)+n;return r<0?0:Math.sqrt(r)},j_=[yd,Mn,kr],S_=e=>j_.find(t=>t.test(e));function Up(e){const t=S_(e);if(!t)return!1;let s=t.parse(e);return t===kr&&(s=w_(s)),s}const zp=(e,t)=>{const s=Up(e),n=Up(t);if(!s||!n)return jl(e,t);const r={...s};return a=>(r.red=Qc(s.red,n.red,a),r.green=Qc(s.green,n.green,a),r.blue=Qc(s.blue,n.blue,a),r.alpha=Ee(s.alpha,n.alpha,a),Mn.transform(r))},bd=new Set(["none","hidden"]);function k_(e,t){return bd.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function N_(e,t){return s=>Ee(e,t,s)}function hf(e){return typeof e=="number"?N_:typeof e=="string"?cf(e)?jl:nt.test(e)?zp:C_:Array.isArray(e)?Ly:typeof e=="object"?nt.test(e)?zp:__:jl}function Ly(e,t){const s=[...e],n=s.length,r=e.map((a,o)=>hf(a)(a,t[o]));return a=>{for(let o=0;o<n;o++)s[o]=r[o](a);return s}}function __(e,t){const s={...e,...t},n={};for(const r in s)e[r]!==void 0&&t[r]!==void 0&&(n[r]=hf(e[r])(e[r],t[r]));return r=>{for(const a in n)s[a]=n[a](r);return s}}function E_(e,t){const s=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],o=e.indexes[a][n[a]],l=e.values[o]??0;s[r]=l,n[a]++}return s}const C_=(e,t)=>{const s=fn.createTransformer(t),n=wa(e),r=wa(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?bd.has(e)&&!r.values.length||bd.has(t)&&!n.values.length?k_(e,t):Ma(Ly(E_(n,r),r.values),s):jl(e,t)};function My(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?Ee(e,t,s):hf(e)(e,t)}const T_=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>Pe.update(t,s),stop:()=>hn(t),now:()=>Ye.isProcessing?Ye.timestamp:bt.now()}},$y=(e,t,s=10)=>{let n="";const r=Math.max(Math.round(t/s),2);for(let a=0;a<r;a++)n+=e(a/(r-1))+", ";return`linear(${n.substring(0,n.length-2)})`},Sl=2e4;function ff(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<Sl;)t+=s,n=e.next(t);return t>=Sl?1/0:t}function P_(e,t=100,s){const n=s({...e,keyframes:[0,t]}),r=Math.min(ff(n),Sl);return{type:"keyframes",ease:a=>n.next(r*a).value/t,duration:hs(r)}}const A_=5;function Fy(e,t,s){const n=Math.max(t-A_,0);return vy(s-e(n),t-n)}const Re={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vp=.001;function R_({duration:e=Re.duration,bounce:t=Re.bounce,velocity:s=Re.velocity,mass:n=Re.mass}){let r,a,o=1-t;o=Cs(Re.minDamping,Re.maxDamping,o),e=Cs(Re.minDuration,Re.maxDuration,hs(e)),o<1?(r=u=>{const d=u*o,h=d*e,f=d-s,g=wd(u,o),v=Math.exp(-h);return Vp-f/g*v},a=u=>{const h=u*o*e,f=h*s+s,g=Math.pow(o,2)*Math.pow(u,2)*e,v=Math.exp(-h),y=wd(Math.pow(u,2),o);return(-r(u)+Vp>0?-1:1)*((f-g)*v)/y}):(r=u=>{const d=Math.exp(-u*e),h=(u-s)*e+1;return-.001+d*h},a=u=>{const d=Math.exp(-u*e),h=(s-u)*(e*e);return d*h});const l=5/e,c=O_(r,a,l);if(e=ds(e),isNaN(c))return{stiffness:Re.stiffness,damping:Re.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const I_=12;function O_(e,t,s){let n=s;for(let r=1;r<I_;r++)n=n-e(n)/t(n);return n}function wd(e,t){return e*Math.sqrt(1-t*t)}const D_=["duration","bounce"],L_=["stiffness","damping","mass"];function qp(e,t){return t.some(s=>e[s]!==void 0)}function M_(e){let t={velocity:Re.velocity,stiffness:Re.stiffness,damping:Re.damping,mass:Re.mass,isResolvedFromDuration:!1,...e};if(!qp(e,L_)&&qp(e,D_))if(e.visualDuration){const s=e.visualDuration,n=2*Math.PI/(s*1.2),r=n*n,a=2*Cs(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:Re.mass,stiffness:r,damping:a}}else{const s=R_(e);t={...t,...s,mass:Re.mass},t.isResolvedFromDuration=!0}return t}function kl(e=Re.visualDuration,t=Re.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:r}=s;const a=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:g}=M_({...s,velocity:-hs(s.velocity||0)}),v=f||0,y=u/(2*Math.sqrt(c*d)),w=o-a,p=hs(Math.sqrt(c/d)),x=Math.abs(w)<5;n||(n=x?Re.restSpeed.granular:Re.restSpeed.default),r||(r=x?Re.restDelta.granular:Re.restDelta.default);let b;if(y<1){const j=wd(p,y);b=N=>{const _=Math.exp(-y*p*N);return o-_*((v+y*p*w)/j*Math.sin(j*N)+w*Math.cos(j*N))}}else if(y===1)b=j=>o-Math.exp(-p*j)*(w+(v+p*w)*j);else{const j=p*Math.sqrt(y*y-1);b=N=>{const _=Math.exp(-y*p*N),C=Math.min(j*N,300);return o-_*((v+y*p*w)*Math.sinh(C)+j*w*Math.cosh(C))/j}}const S={calculatedDuration:g&&h||null,next:j=>{const N=b(j);if(g)l.done=j>=h;else{let _=j===0?v:0;y<1&&(_=j===0?ds(v):Fy(b,j,N));const C=Math.abs(_)<=n,I=Math.abs(o-N)<=r;l.done=C&&I}return l.value=l.done?o:N,l},toString:()=>{const j=Math.min(ff(S),Sl),N=$y(_=>S.next(j*_).value,j,30);return j+"ms "+N},toTransition:()=>{}};return S}kl.applyToOptions=e=>{const t=P_(e,100,kl);return e.ease=t.ease,e.duration=ds(t.duration),e.type="keyframes",e};function jd({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},g=C=>l!==void 0&&C<l||c!==void 0&&C>c,v=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let y=s*t;const w=h+y,p=o===void 0?w:o(w);p!==w&&(y=p-h);const x=C=>-y*Math.exp(-C/n),b=C=>p+x(C),S=C=>{const I=x(C),M=b(C);f.done=Math.abs(I)<=u,f.value=f.done?p:M};let j,N;const _=C=>{g(f.value)&&(j=C,N=kl({keyframes:[f.value,v(f.value)],velocity:Fy(b,C,f.value),damping:r,stiffness:a,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:C=>{let I=!1;return!N&&j===void 0&&(I=!0,S(C),_(C)),j!==void 0&&C>=j?N.next(C-j):(!I&&S(C),f)}}}function $_(e,t,s){const n=[],r=s||Ts.mix||My,a=e.length-1;for(let o=0;o<a;o++){let l=r(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||zt:t;l=Ma(c,l)}n.push(l)}return n}function F_(e,t,{clamp:s=!0,ease:n,mixer:r}={}){const a=e.length;if(sf(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=$_(t,n,r),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=ya(e[h],e[h+1],d);return l[h](f)};return s?d=>u(Cs(e[0],e[a-1],d)):u}function U_(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const r=ya(0,t,n);e.push(Ee(s,1,r))}}function z_(e){const t=[0];return U_(t,e.length-1),t}function V_(e,t){return e.map(s=>s*t)}function q_(e,t){return e.map(()=>t||Ey).splice(0,e.length-1)}function Wi({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const r=e_(n)?n.map(Lp):Lp(n),a={done:!1,value:t[0]},o=V_(s&&s.length===t.length?s:z_(t),e),l=F_(o,t,{ease:Array.isArray(r)?r:q_(t,r)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const B_=e=>e!==null;function mf(e,{repeat:t,repeatType:s="loop"},n,r=1){const a=e.filter(B_),l=r<0||t&&s!=="loop"&&t%2===1?0:a.length-1;return!l||n===void 0?a[l]:n}const W_={decay:jd,inertia:jd,tween:Wi,keyframes:Wi,spring:kl};function Uy(e){typeof e.type=="string"&&(e.type=W_[e.type])}class pf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const H_=e=>e/100;class gf extends pf{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,r;const{motionValue:s}=this.options;s&&s.updatedAt!==bt.now()&&this.tick(bt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(n=this.options).onStop)==null||r.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Uy(t);const{type:s=Wi,repeat:n=0,repeatDelay:r=0,repeatType:a,velocity:o=0}=t;let{keyframes:l}=t;const c=s||Wi;c!==Wi&&typeof l[0]!="number"&&(this.mixKeyframes=Ma(H_,My(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=ff(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=u}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:n,totalDuration:r,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:g,type:v,onUpdate:y,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const p=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?p<0:p>r;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let b=this.currentTime,S=n;if(h){const C=Math.min(this.currentTime,r)/l;let I=Math.floor(C),M=C%1;!M&&C>=1&&(M=1),M===1&&I--,I=Math.min(I,h+1),!!(I%2)&&(f==="reverse"?(M=1-M,g&&(M-=g/l)):f==="mirror"&&(S=o)),b=Cs(0,1,M)*l}const j=x?{done:!1,value:d[0]}:S.next(b);a&&(j.value=a(j.value));let{done:N}=j;!x&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return _&&v!==jd&&(j.value=mf(d,this.options,w,this.speed)),y&&y(j.value),_&&this.finish(),j}then(t,s){return this.finished.then(t,s)}get duration(){return hs(this.calculatedDuration)}get time(){return hs(this.currentTime)}set time(t){var s;t=ds(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(bt.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=hs(this.currentTime))}play(){var r,a;if(this.isStopped)return;const{driver:t=T_,startTime:s}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(a=(r=this.options).onPlay)==null||a.call(r);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function J_(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const $n=e=>e*180/Math.PI,Sd=e=>{const t=$n(Math.atan2(e[1],e[0]));return kd(t)},K_={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Sd,rotateZ:Sd,skewX:e=>$n(Math.atan(e[1])),skewY:e=>$n(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},kd=e=>(e=e%360,e<0&&(e+=360),e),Bp=Sd,Wp=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Hp=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),G_={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Wp,scaleY:Hp,scale:e=>(Wp(e)+Hp(e))/2,rotateX:e=>kd($n(Math.atan2(e[6],e[5]))),rotateY:e=>kd($n(Math.atan2(-e[2],e[0]))),rotateZ:Bp,rotate:Bp,skewX:e=>$n(Math.atan(e[4])),skewY:e=>$n(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Nd(e){return e.includes("scale")?1:0}function _d(e,t){if(!e||e==="none")return Nd(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(s)n=G_,r=s;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=K_,r=l}if(!r)return Nd(t);const a=n[t],o=r[1].split(",").map(X_);return typeof a=="function"?a(o):o[a]}const Y_=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return _d(s,t)};function X_(e){return parseFloat(e.trim())}const ii=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ai=new Set(ii),Jp=e=>e===ri||e===ae,Q_=new Set(["x","y","z"]),Z_=ii.filter(e=>!Q_.has(e));function eE(e){const t=[];return Z_.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t}const qn={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>_d(t,"x"),y:(e,{transform:t})=>_d(t,"y")};qn.translateX=qn.x;qn.translateY=qn.y;const Bn=new Set;let Ed=!1,Cd=!1,Td=!1;function zy(){if(Cd){const e=Array.from(Bn).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),s=new Map;t.forEach(n=>{const r=eE(n);r.length&&(s.set(n,r),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const r=s.get(n);r&&r.forEach(([a,o])=>{var l;(l=n.getValue(a))==null||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Cd=!1,Ed=!1,Bn.forEach(e=>e.complete(Td)),Bn.clear()}function Vy(){Bn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Cd=!0)})}function tE(){Td=!0,Vy(),zy(),Td=!1}class xf{constructor(t,s,n,r,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=n,this.motionValue=r,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Bn.add(this),Ed||(Ed=!0,Pe.read(Vy),Pe.resolveKeyframes(zy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:n,motionValue:r}=this;if(t[0]===null){const a=r==null?void 0:r.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&s){const l=n.readValue(s,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),r&&a===void 0&&r.set(t[0])}J_(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Bn.delete(this)}cancel(){this.state==="scheduled"&&(Bn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sE=e=>e.startsWith("--");function nE(e,t,s){sE(t)?e.style.setProperty(t,s):e.style[t]=s}const rE=nf(()=>window.ScrollTimeline!==void 0),iE={};function aE(e,t){const s=nf(e);return()=>iE[t]??s()}const qy=aE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ai=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,Kp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ai([0,.65,.55,1]),circOut:Ai([.55,0,1,.45]),backIn:Ai([.31,.01,.66,-.59]),backOut:Ai([.33,1.53,.69,.99])};function By(e,t){if(e)return typeof e=="function"?qy()?$y(e,t):"ease-out":Cy(e)?Ai(e):Array.isArray(e)?e.map(s=>By(s,t)||Kp.easeOut):Kp[e]}function oE(e,t,s,{delay:n=0,duration:r=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:s};c&&(d.offset=c);const h=By(l,r);Array.isArray(h)&&(d.easing=h);const f={delay:n,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(d,f)}function Wy(e){return typeof e=="function"&&"applyToOptions"in e}function lE({type:e,...t}){return Wy(e)&&qy()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class cE extends pf{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:n,keyframes:r,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,sf(typeof t.type!="string");const u=lE(t);this.animation=oE(s,n,r,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=mf(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):nE(s,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,n;const t=((n=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:n.call(s).duration)||0;return hs(Number(t))}get time(){return hs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ds(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&rE()?(this.animation.timeline=t,zt):s(this)}}const Hy={anticipate:ky,backInOut:Sy,circInOut:_y};function uE(e){return e in Hy}function dE(e){typeof e.ease=="string"&&uE(e.ease)&&(e.ease=Hy[e.ease])}const Gp=10;class hE extends cE{constructor(t){dE(t),Uy(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:n,onComplete:r,element:a,...o}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const l=new gf({...o,autoplay:!1}),c=ds(this.finishedTime??this.time);s.setWithVelocity(l.sample(c-Gp).value,l.sample(c).value,Gp),l.stop()}}const Yp=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fn.test(e)||e==="0")&&!e.startsWith("url("));function fE(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function mE(e,t,s,n){const r=e[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=Yp(r,t),l=Yp(a,t);return!o||!l?!1:fE(e)||(s==="spring"||Wy(s))&&n}function Jy(e){return gy(e)&&"offsetHeight"in e}const pE=new Set(["opacity","clipPath","filter","transform"]),gE=nf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function xE(e){var u;const{motionValue:t,name:s,repeatDelay:n,repeatType:r,damping:a,type:o}=e;if(!Jy((u=t==null?void 0:t.owner)==null?void 0:u.current))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return gE()&&s&&pE.has(s)&&(s!=="transform"||!c)&&!l&&!n&&r!=="mirror"&&a!==0&&o!=="inertia"}const vE=40;class yE extends pf{constructor({autoplay:t=!0,delay:s=0,type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var y,w;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=bt.now();const f={autoplay:t,delay:s,type:n,repeat:r,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||xf;this.keyframeResolver=new g(l,(y,w,p)=>this.onKeyframesResolved(y,w,f,!p),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,s,n,r){this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=bt.now(),mE(t,a,o,l)||((Ts.instantAnimations||!c)&&(d==null||d(mf(t,n,s))),t[0]=t[t.length-1],n.duration=0,n.repeat=0);const f={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>vE?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:t},g=!u&&xE(f)?new hE({...f,element:f.motionValue.owner.current}):new gf(f);g.finished.then(()=>this.notifyFinished()).catch(zt),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),tE()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const bE=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function wE(e){const t=bE.exec(e);if(!t)return[,];const[,s,n,r]=t;return[`--${s??n}`,r]}function Ky(e,t,s=1){const[n,r]=wE(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const o=a.trim();return py(o)?parseFloat(o):o}return cf(r)?Ky(r,t,s+1):r}function vf(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Gy=new Set(["width","height","top","left","right","bottom",...ii]),jE={test:e=>e==="auto",parse:e=>e},Yy=e=>t=>t.test(e),Xy=[ri,ae,fs,Vs,f_,h_,jE],Xp=e=>Xy.find(Yy(e));function SE(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||xy(e):!0}const kE=new Set(["brightness","contrast","saturate","opacity"]);function NE(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(uf)||[];if(!n)return e;const r=s.replace(n,"");let a=kE.has(t)?1:0;return n!==s&&(a*=100),t+"("+a+r+")"}const _E=/\b([a-z-]*)\(.*?\)/gu,Pd={...fn,getAnimatableNone:e=>{const t=e.match(_E);return t?t.map(NE).join(" "):e}},Qp={...ri,transform:Math.round},EE={rotate:Vs,rotateX:Vs,rotateY:Vs,rotateZ:Vs,scale:ko,scaleX:ko,scaleY:ko,scaleZ:ko,skew:Vs,skewX:Vs,skewY:Vs,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:ba,originX:$p,originY:$p,originZ:ae},yf={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae,...EE,zIndex:Qp,fillOpacity:ba,strokeOpacity:ba,numOctaves:Qp},CE={...yf,color:nt,backgroundColor:nt,outlineColor:nt,fill:nt,stroke:nt,borderColor:nt,borderTopColor:nt,borderRightColor:nt,borderBottomColor:nt,borderLeftColor:nt,filter:Pd,WebkitFilter:Pd},Qy=e=>CE[e];function Zy(e,t){let s=Qy(e);return s!==Pd&&(s=fn),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const TE=new Set(["auto","none","0"]);function PE(e,t,s){let n=0,r;for(;n<e.length&&!r;){const a=e[n];typeof a=="string"&&!TE.has(a)&&wa(a).values.length&&(r=e[n]),n++}if(r&&s)for(const a of t)e[a]=Zy(s,r)}class AE extends xf{constructor(t,s,n,r,a){super(t,s,n,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),cf(u))){const d=Ky(u,s.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Gy.has(n)||t.length!==2)return;const[r,a]=t,o=Xp(r),l=Xp(a);if(o!==l)if(Jp(o)&&Jp(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else qn[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,n=[];for(let r=0;r<t.length;r++)(t[r]===null||SE(t[r]))&&n.push(r);n.length&&PE(t,n,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qn[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const r=s[s.length-1];r!==void 0&&t.getValue(n,r).jump(r,!1)}measureEndState(){var l;const{element:t,name:s,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(s);r&&r.jump(this.measuredOrigin,!1);const a=n.length-1,o=n[a];n[a]=qn[s](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function RE(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const r=(s==null?void 0:s[e])??n.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}const eb=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Zp=30,IE=e=>!isNaN(parseFloat(e));class OE{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{var o,l;const a=bt.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();r&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=bt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=IE(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new rf);const n=this.events[t].add(s);return t==="change"?()=>{n(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=bt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Zp)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Zp);return vy(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jr(e,t){return new OE(e,t)}const{schedule:bf}=Ty(queueMicrotask,!1),Kt={x:!1,y:!1};function tb(){return Kt.x||Kt.y}function DE(e){return e==="x"||e==="y"?Kt[e]?null:(Kt[e]=!0,()=>{Kt[e]=!1}):Kt.x||Kt.y?null:(Kt.x=Kt.y=!0,()=>{Kt.x=Kt.y=!1})}function sb(e,t){const s=RE(e),n=new AbortController,r={passive:!0,...t,signal:n.signal};return[s,r,()=>n.abort()]}function eg(e){return!(e.pointerType==="touch"||tb())}function LE(e,t,s={}){const[n,r,a]=sb(e,s),o=l=>{if(!eg(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{eg(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,r)};return n.forEach(l=>{l.addEventListener("pointerenter",o,r)}),a}const nb=(e,t)=>t?e===t?!0:nb(e,t.parentElement):!1,wf=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,ME=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $E(e){return ME.has(e.tagName)||e.tabIndex!==-1}const Bo=new WeakSet;function tg(e){return t=>{t.key==="Enter"&&e(t)}}function Zc(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const FE=(e,t)=>{const s=e.currentTarget;if(!s)return;const n=tg(()=>{if(Bo.has(s))return;Zc(s,"down");const r=tg(()=>{Zc(s,"up")}),a=()=>Zc(s,"cancel");s.addEventListener("keyup",r,t),s.addEventListener("blur",a,t)});s.addEventListener("keydown",n,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),t)};function sg(e){return wf(e)&&!tb()}function UE(e,t,s={}){const[n,r,a]=sb(e,s),o=l=>{const c=l.currentTarget;if(!sg(l))return;Bo.add(c);const u=t(c,l),d=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Bo.has(c)&&Bo.delete(c),sg(g)&&typeof u=="function"&&u(g,{success:v})},h=g=>{d(g,c===window||c===document||s.useGlobalTarget||nb(c,g.target))},f=g=>{d(g,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",f,r)};return n.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),Jy(l)&&(l.addEventListener("focus",u=>FE(u,r)),!$E(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function rb(e){return gy(e)&&"ownerSVGElement"in e}function zE(e){return rb(e)&&e.tagName==="svg"}const at=e=>!!(e&&e.getVelocity),VE=[...Xy,nt,fn],qE=e=>VE.find(Yy(e)),ib=m.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function BE(e=!0){const t=m.useContext(Zh);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:r}=t,a=m.useId();m.useEffect(()=>{if(e)return r(a)},[e]);const o=m.useCallback(()=>e&&n&&n(a),[a,n,e]);return!s&&n?[!1,o]:[!0]}const ab=m.createContext({strict:!1}),ng={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kr={};for(const e in ng)Kr[e]={isEnabled:t=>ng[e].some(s=>!!t[s])};function WE(e){for(const t in e)Kr[t]={...Kr[t],...e[t]}}const HE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||HE.has(e)}let ob=e=>!Nl(e);function JE(e){e&&(ob=t=>t.startsWith("on")?!Nl(t):e(t))}try{JE(require("@emotion/is-prop-valid").default)}catch{}function KE(e,t,s){const n={};for(const r in e)r==="values"&&typeof e.values=="object"||(ob(r)||s===!0&&Nl(r)||!t&&!Nl(r)||e.draggable&&r.startsWith("onDrag"))&&(n[r]=e[r]);return n}function GE(e){if(typeof Proxy>"u")return e;const t=new Map,s=(...n)=>e(...n);return new Proxy(s,{get:(n,r)=>r==="create"?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}const sc=m.createContext({});function nc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ja(e){return typeof e=="string"||Array.isArray(e)}const jf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sf=["initial",...jf];function rc(e){return nc(e.animate)||Sf.some(t=>ja(e[t]))}function lb(e){return!!(rc(e)||e.variants)}function YE(e,t){if(rc(e)){const{initial:s,animate:n}=e;return{initial:s===!1||ja(s)?s:void 0,animate:ja(n)?n:void 0}}return e.inherit!==!1?t:{}}function XE(e){const{initial:t,animate:s}=YE(e,m.useContext(sc));return m.useMemo(()=>({initial:t,animate:s}),[rg(t),rg(s)])}function rg(e){return Array.isArray(e)?e.join(" "):e}const QE=Symbol.for("motionComponentSymbol");function Nr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ZE(e,t,s){return m.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):Nr(s)&&(s.current=n))},[t])}const kf=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eC="framerAppearId",cb="data-"+kf(eC),ub=m.createContext({});function tC(e,t,s,n,r){var y,w;const{visualElement:a}=m.useContext(sc),o=m.useContext(ab),l=m.useContext(Zh),c=m.useContext(ib).reducedMotion,u=m.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=m.useContext(ub);d&&!d.projection&&r&&(d.type==="html"||d.type==="svg")&&sC(u.current,s,r,h);const f=m.useRef(!1);m.useInsertionEffect(()=>{d&&f.current&&d.update(s,l)});const g=s[cb],v=m.useRef(!!g&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,g))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,g)));return J2(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),bf.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),m.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)==null||p.call(window,g)}),v.current=!1))}),d}function sC(e,t,s,n){const{layoutId:r,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:db(e.parent)),e.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!o||l&&Nr(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function db(e){if(e)return e.options.allowProjection!==!1?e.projection:db(e.parent)}function nC({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:r}){e&&WE(e);function a(l,c){let u;const d={...m.useContext(ib),...l,layoutId:rC(l)},{isStatic:h}=d,f=XE(l),g=n(l,h);if(!h&&Qh){iC();const v=aC(d);u=v.MeasureLayout,f.visualElement=tC(r,g,d,t,v.ProjectionNode)}return i.jsxs(sc.Provider,{value:f,children:[u&&f.visualElement?i.jsx(u,{visualElement:f.visualElement,...d}):null,s(r,l,ZE(g,f.visualElement,c),g,h,f.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const o=m.forwardRef(a);return o[QE]=r,o}function rC({layoutId:e}){const t=m.useContext(my).id;return t&&e!==void 0?t+"-"+e:e}function iC(e,t){m.useContext(ab).strict}function aC(e){const{drag:t,layout:s}=Kr;if(!t&&!s)return{};const n={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(e)||s!=null&&s.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Sa={};function oC(e){for(const t in e)Sa[t]=e[t],lf(t)&&(Sa[t].isCSSVariable=!0)}function hb(e,{layout:t,layoutId:s}){return ai.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Sa[e]||e==="opacity")}const lC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cC=ii.length;function uC(e,t,s){let n="",r=!0;for(let a=0;a<cC;a++){const o=ii[a],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const u=eb(l,yf[o]);if(!c){r=!1;const d=lC[o]||o;n+=`${d}(${u}) `}s&&(t[o]=u)}}return n=n.trim(),s?n=s(t,r?"":n):r&&(n="none"),n}function Nf(e,t,s){const{style:n,vars:r,transformOrigin:a}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(ai.has(c)){o=!0;continue}else if(lf(c)){r[c]=u;continue}else{const d=eb(u,yf[c]);c.startsWith("origin")?(l=!0,a[c]=d):n[c]=d}}if(t.transform||(o||s?n.transform=uC(t,e.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${u} ${d}`}}const _f=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fb(e,t,s){for(const n in t)!at(t[n])&&!hb(n,s)&&(e[n]=t[n])}function dC({transformTemplate:e},t){return m.useMemo(()=>{const s=_f();return Nf(s,t,e),Object.assign({},s.vars,s.style)},[t])}function hC(e,t){const s=e.style||{},n={};return fb(n,s,e),Object.assign(n,dC(e,t)),n}function fC(e,t){const s={},n=hC(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}const mC={offset:"stroke-dashoffset",array:"stroke-dasharray"},pC={offset:"strokeDashoffset",array:"strokeDasharray"};function gC(e,t,s=1,n=0,r=!0){e.pathLength=1;const a=r?mC:pC;e[a.offset]=ae.transform(-n);const o=ae.transform(t),l=ae.transform(s);e[a.array]=`${o} ${l}`}function mb(e,{attrX:t,attrY:s,attrScale:n,pathLength:r,pathSpacing:a=1,pathOffset:o=0,...l},c,u,d){if(Nf(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),s!==void 0&&(h.y=s),n!==void 0&&(h.scale=n),r!==void 0&&gC(h,r,a,o,!1)}const pb=()=>({..._f(),attrs:{}}),gb=e=>typeof e=="string"&&e.toLowerCase()==="svg";function xC(e,t,s,n){const r=m.useMemo(()=>{const a=pb();return mb(a,t,gb(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};fb(a,e.style,e),r.style={...a,...r.style}}return r}const vC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ef(e){return typeof e!="string"||e.includes("-")?!1:!!(vC.indexOf(e)>-1||/[A-Z]/u.test(e))}function yC(e=!1){return(s,n,r,{latestValues:a},o)=>{const c=(Ef(s)?xC:fC)(n,a,o,s),u=KE(n,typeof s=="string",e),d=s!==m.Fragment?{...u,...c,ref:r}:{},{children:h}=n,f=m.useMemo(()=>at(h)?h.get():h,[h]);return m.createElement(s,{...d,children:f})}}function ig(e){const t=[{},{}];return e==null||e.values.forEach((s,n)=>{t[0][n]=s.get(),t[1][n]=s.getVelocity()}),t}function Cf(e,t,s,n){if(typeof t=="function"){const[r,a]=ig(n);t=t(s!==void 0?s:e.custom,r,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[r,a]=ig(n);t=t(s!==void 0?s:e.custom,r,a)}return t}function Wo(e){return at(e)?e.get():e}function bC({scrapeMotionValuesFromProps:e,createRenderState:t},s,n,r){return{latestValues:wC(s,n,r,e),renderState:t()}}const xb=e=>(t,s)=>{const n=m.useContext(sc),r=m.useContext(Zh),a=()=>bC(e,t,n,r);return s?a():H2(a)};function wC(e,t,s,n){const r={},a=n(e,{});for(const f in a)r[f]=Wo(a[f]);let{initial:o,animate:l}=e;const c=rc(e),u=lb(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=s?s.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!nc(h)){const f=Array.isArray(h)?h:[h];for(let g=0;g<f.length;g++){const v=Cf(e,f[g]);if(v){const{transitionEnd:y,transition:w,...p}=v;for(const x in p){let b=p[x];if(Array.isArray(b)){const S=d?b.length-1:0;b=b[S]}b!==null&&(r[x]=b)}for(const x in y)r[x]=y[x]}}}return r}function Tf(e,t,s){var a;const{style:n}=e,r={};for(const o in n)(at(n[o])||t.style&&at(t.style[o])||hb(o,e)||((a=s==null?void 0:s.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(r[o]=n[o]);return r}const jC={useVisualState:xb({scrapeMotionValuesFromProps:Tf,createRenderState:_f})};function vb(e,t,s){const n=Tf(e,t,s);for(const r in e)if(at(e[r])||at(t[r])){const a=ii.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[a]=e[r]}return n}const SC={useVisualState:xb({scrapeMotionValuesFromProps:vb,createRenderState:pb})};function kC(e,t){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...Ef(n)?SC:jC,preloadedFeatures:e,useRender:yC(r),createVisualElement:t,Component:n};return nC(o)}}function ka(e,t,s){const n=e.getProps();return Cf(n,t,s!==void 0?s:n.custom,e)}const Ad=e=>Array.isArray(e);function NC(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,Jr(s))}function _C(e){return Ad(e)?e[e.length-1]||0:e}function EC(e,t){const s=ka(e,t);let{transitionEnd:n={},transition:r={},...a}=s||{};a={...a,...n};for(const o in a){const l=_C(a[o]);NC(e,o,l)}}function CC(e){return!!(at(e)&&e.add)}function Rd(e,t){const s=e.getValue("willChange");if(CC(s))return s.add(t);if(!s&&Ts.WillChange){const n=new Ts.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function yb(e){return e.props[cb]}const TC=e=>e!==null;function PC(e,{repeat:t,repeatType:s="loop"},n){const r=e.filter(TC),a=t&&s!=="loop"&&t%2===1?0:r.length-1;return r[a]}const AC={type:"spring",stiffness:500,damping:25,restSpeed:10},RC=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),IC={type:"keyframes",duration:.8},OC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DC=(e,{keyframes:t})=>t.length>2?IC:ai.has(e)?e.startsWith("scale")?RC(t[1]):AC:OC;function LC({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Pf=(e,t,s,n={},r,a)=>o=>{const l=vf(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-ds(c);const d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:r};LC(l)||Object.assign(d,DC(e,d)),d.duration&&(d.duration=ds(d.duration)),d.repeatDelay&&(d.repeatDelay=ds(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(Ts.instantAnimations||Ts.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!a&&t.get()!==void 0){const f=PC(d.keyframes,l);if(f!==void 0){Pe.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new gf(d):new yE(d)};function MC({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function bb(e,t,{delay:s=0,transitionOverride:n,type:r}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(a=n);const c=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),f=l[d];if(f===void 0||u&&MC(u,d))continue;const g={delay:s,...vf(a||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===v&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const p=yb(e);if(p){const x=window.MotionHandoffAnimation(p,d,Pe);x!==null&&(g.startTime=x,y=!0)}}Rd(e,d),h.start(Pf(d,h,f,e.shouldReduceMotion&&Gy.has(d)?{type:!1}:g,e,y));const w=h.animation;w&&c.push(w)}return o&&Promise.all(c).then(()=>{Pe.update(()=>{o&&EC(e,o)})}),c}function Id(e,t,s={}){var c;const n=ka(e,t,s.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(r=s.transitionOverride);const a=n?()=>Promise.all(bb(e,n,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=r;return $C(e,t,d+u,h,f,s)}:()=>Promise.resolve(),{when:l}=r;if(l){const[u,d]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(s.delay)])}function $C(e,t,s=0,n=0,r=1,a){const o=[],l=(e.variantChildren.size-1)*n,c=r===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(FC).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(Id(u,t,{...a,delay:s+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function FC(e,t){return e.sortNodePosition(t)}function UC(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const r=t.map(a=>Id(e,a,s));n=Promise.all(r)}else if(typeof t=="string")n=Id(e,t,s);else{const r=typeof t=="function"?ka(e,t,s.custom):t;n=Promise.all(bb(e,r,s))}return n.then(()=>{e.notify("AnimationComplete",t)})}function wb(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}const zC=Sf.length;function jb(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?jb(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<zC;s++){const n=Sf[s],r=e.props[n];(ja(r)||r===!1)&&(t[n]=r)}return t}const VC=[...jf].reverse(),qC=jf.length;function BC(e){return t=>Promise.all(t.map(({animation:s,options:n})=>UC(e,s,n)))}function WC(e){let t=BC(e),s=ag(),n=!0;const r=c=>(u,d)=>{var f;const h=ka(e,d,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:g,transitionEnd:v,...y}=h;u={...u,...y,...v}}return u};function a(c){t=c(e)}function o(c){const{props:u}=e,d=jb(e.parent)||{},h=[],f=new Set;let g={},v=1/0;for(let w=0;w<qC;w++){const p=VC[w],x=s[p],b=u[p]!==void 0?u[p]:d[p],S=ja(b),j=p===c?x.isActive:null;j===!1&&(v=w);let N=b===d[p]&&b!==u[p]&&S;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),x.protectedKeys={...g},!x.isActive&&j===null||!b&&!x.prevProp||nc(b)||typeof b=="boolean")continue;const _=HC(x.prevProp,b);let C=_||p===c&&x.isActive&&!N&&S||w>v&&S,I=!1;const M=Array.isArray(b)?b:[b];let V=M.reduce(r(p),{});j===!1&&(V={});const{prevResolvedValues:Z={}}=x,ie={...Z,...V},re=B=>{C=!0,f.has(B)&&(I=!0,f.delete(B)),x.needsAnimating[B]=!0;const P=e.getValue(B);P&&(P.liveStyle=!1)};for(const B in ie){const P=V[B],O=Z[B];if(g.hasOwnProperty(B))continue;let D=!1;Ad(P)&&Ad(O)?D=!wb(P,O):D=P!==O,D?P!=null?re(B):f.add(B):P!==void 0&&f.has(B)?re(B):x.protectedKeys[B]=!0}x.prevProp=b,x.prevResolvedValues=V,x.isActive&&(g={...g,...V}),n&&e.blockInitialAnimation&&(C=!1),C&&(!(N&&_)||I)&&h.push(...M.map(B=>({animation:B,options:{type:p}})))}if(f.size){const w={};if(typeof u.initial!="boolean"){const p=ka(e,Array.isArray(u.initial)?u.initial[0]:u.initial);p&&p.transition&&(w.transition=p.transition)}f.forEach(p=>{const x=e.getBaseTarget(p),b=e.getValue(p);b&&(b.liveStyle=!0),w[p]=x??null}),h.push({animation:w})}let y=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(h):Promise.resolve()}function l(c,u){var h;if(s[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var g;return(g=f.animationState)==null?void 0:g.setActive(c,u)}),s[c].isActive=u;const d=o(c);for(const f in s)s[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>s,reset:()=>{s=ag(),n=!0}}}function HC(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!wb(t,e):!1}function En(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ag(){return{animate:En(!0),whileInView:En(),whileHover:En(),whileTap:En(),whileDrag:En(),whileFocus:En(),exit:En()}}class yn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class JC extends yn{constructor(t){super(t),t.animationState||(t.animationState=WC(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();nc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let KC=0;class GC extends yn{constructor(){super(...arguments),this.id=KC++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);s&&!t&&r.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const YC={animation:{Feature:JC},exit:{Feature:GC}};function Na(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}function Ua(e){return{point:{x:e.pageX,y:e.pageY}}}const XC=e=>t=>wf(t)&&e(t,Ua(t));function Hi(e,t,s,n){return Na(e,t,XC(s),n)}function Sb({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function QC({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ZC(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}const kb=1e-4,eT=1-kb,tT=1+kb,Nb=.01,sT=0-Nb,nT=0+Nb;function ut(e){return e.max-e.min}function rT(e,t,s){return Math.abs(e-t)<=s}function og(e,t,s,n=.5){e.origin=n,e.originPoint=Ee(t.min,t.max,e.origin),e.scale=ut(s)/ut(t),e.translate=Ee(s.min,s.max,e.origin)-e.originPoint,(e.scale>=eT&&e.scale<=tT||isNaN(e.scale))&&(e.scale=1),(e.translate>=sT&&e.translate<=nT||isNaN(e.translate))&&(e.translate=0)}function Ji(e,t,s,n){og(e.x,t.x,s.x,n?n.originX:void 0),og(e.y,t.y,s.y,n?n.originY:void 0)}function lg(e,t,s){e.min=s.min+t.min,e.max=e.min+ut(t)}function iT(e,t,s){lg(e.x,t.x,s.x),lg(e.y,t.y,s.y)}function cg(e,t,s){e.min=t.min-s.min,e.max=e.min+ut(t)}function Ki(e,t,s){cg(e.x,t.x,s.x),cg(e.y,t.y,s.y)}const ug=()=>({translate:0,scale:1,origin:0,originPoint:0}),_r=()=>({x:ug(),y:ug()}),dg=()=>({min:0,max:0}),$e=()=>({x:dg(),y:dg()});function Dt(e){return[e("x"),e("y")]}function eu(e){return e===void 0||e===1}function Od({scale:e,scaleX:t,scaleY:s}){return!eu(e)||!eu(t)||!eu(s)}function An(e){return Od(e)||_b(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function _b(e){return hg(e.x)||hg(e.y)}function hg(e){return e&&e!=="0%"}function _l(e,t,s){const n=e-s,r=t*n;return s+r}function fg(e,t,s,n,r){return r!==void 0&&(e=_l(e,r,n)),_l(e,s,n)+t}function Dd(e,t=0,s=1,n,r){e.min=fg(e.min,t,s,n,r),e.max=fg(e.max,t,s,n,r)}function Eb(e,{x:t,y:s}){Dd(e.x,t.translate,t.scale,t.originPoint),Dd(e.y,s.translate,s.scale,s.originPoint)}const mg=.999999999999,pg=1.0000000000001;function aT(e,t,s,n=!1){const r=s.length;if(!r)return;t.x=t.y=1;let a,o;for(let l=0;l<r;l++){a=s[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Cr(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Eb(e,o)),n&&An(a.latestValues)&&Cr(e,a.latestValues))}t.x<pg&&t.x>mg&&(t.x=1),t.y<pg&&t.y>mg&&(t.y=1)}function Er(e,t){e.min=e.min+t,e.max=e.max+t}function gg(e,t,s,n,r=.5){const a=Ee(e.min,e.max,r);Dd(e,t,s,a,n)}function Cr(e,t){gg(e.x,t.x,t.scaleX,t.scale,t.originX),gg(e.y,t.y,t.scaleY,t.scale,t.originY)}function Cb(e,t){return Sb(ZC(e.getBoundingClientRect(),t))}function oT(e,t,s){const n=Cb(e,s),{scroll:r}=t;return r&&(Er(n.x,r.offset.x),Er(n.y,r.offset.y)),n}const Tb=({current:e})=>e?e.ownerDocument.defaultView:null,xg=(e,t)=>Math.abs(e-t);function lT(e,t){const s=xg(e.x,t.x),n=xg(e.y,t.y);return Math.sqrt(s**2+n**2)}class Pb{constructor(t,s,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=su(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=lT(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:v}=h,{timestamp:y}=Ye;this.history.push({...v,timestamp:y});const{onStart:w,onMove:p}=this.handlers;f||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=tu(f,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=su(h.type==="pointercancel"?this.lastMoveEventInfo:tu(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,w),v&&v(h,w)},!wf(t))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=n,this.contextWindow=r||window;const o=Ua(t),l=tu(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ye;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=s;d&&d(t,su(l,this.history)),this.removeListeners=Ma(Hi(this.contextWindow,"pointermove",this.handlePointerMove),Hi(this.contextWindow,"pointerup",this.handlePointerUp),Hi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),hn(this.updatePoint)}}function tu(e,t){return t?{point:t(e.point)}:e}function vg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function su({point:e},t){return{point:e,delta:vg(e,Ab(t)),offset:vg(e,cT(t)),velocity:uT(t,.1)}}function cT(e){return e[0]}function Ab(e){return e[e.length-1]}function uT(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const r=Ab(e);for(;s>=0&&(n=e[s],!(r.timestamp-n.timestamp>ds(t)));)s--;if(!n)return{x:0,y:0};const a=hs(r.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(r.x-n.x)/a,y:(r.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function dT(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?Ee(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?Ee(s,e,n.max):Math.min(e,s)),e}function yg(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function hT(e,{top:t,left:s,bottom:n,right:r}){return{x:yg(e.x,s,r),y:yg(e.y,t,n)}}function bg(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function fT(e,t){return{x:bg(e.x,t.x),y:bg(e.y,t.y)}}function mT(e,t){let s=.5;const n=ut(e),r=ut(t);return r>n?s=ya(t.min,t.max-n,e.min):n>r&&(s=ya(e.min,e.max-r,t.min)),Cs(0,1,s)}function pT(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Ld=.35;function gT(e=Ld){return e===!1?e=0:e===!0&&(e=Ld),{x:wg(e,"left","right"),y:wg(e,"top","bottom")}}function wg(e,t,s){return{min:jg(e,t),max:jg(e,s)}}function jg(e,t){return typeof e=="number"?e:e[t]||0}const xT=new WeakMap;class vT{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$e(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Ua(d).point)},a=(d,h)=>{const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DE(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dt(w=>{let p=this.getAxisMotionValue(w).get()||0;if(fs.test(p)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[w];b&&(p=ut(b)*(parseFloat(p)/100))}}this.originPoint[w]=p}),v&&Pe.postRender(()=>v(d,h)),Rd(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:v,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:w}=h;if(g&&this.currentDirection===null){this.currentDirection=yT(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>this.stop(d,h),c=()=>Dt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Pb(t,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Tb(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=s;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&Pe.postRender(()=>a(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:r}=this.getProps();if(!n||!No(t,r,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=dT(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,r=this.constraints;t&&Nr(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=hT(n.layoutBox,t):this.constraints=!1,this.elastic=gT(s),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Dt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=pT(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Nr(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=oT(n,r.root,this.visualElement.getTransformPagePoint());let o=fT(r.layout.layoutBox,a);if(s){const l=s(QC(o));this.hasMutatedConstraints=!!l,l&&(o=Sb(l))}return o}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Dt(d=>{if(!No(d,s,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,g=r?40:1e7,v={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return Rd(this.visualElement,t),n.start(Pf(t,n,0,s,this.visualElement,!1))}stopAnimation(){Dt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Dt(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[s];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Dt(s=>{const{drag:n}=this.getProps();if(!No(s,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(s);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[s];a.set(t[s]-Ee(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Nr(s)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Dt(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();r[o]=mT({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Dt(o=>{if(!No(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Ee(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;xT.set(this.visualElement,this);const t=this.visualElement.current,s=Hi(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Nr(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Pe.read(n);const o=Na(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Dt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:o=Ld,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function No(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function yT(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class bT extends yn{constructor(t){super(t),this.removeGroupControls=zt,this.removeListeners=zt,this.controls=new vT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Sg=e=>(t,s)=>{e&&Pe.postRender(()=>e(t,s))};class wT extends yn{constructor(){super(...arguments),this.removePointerDownListener=zt}onPointerDown(t){this.session=new Pb(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Tb(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Sg(t),onStart:Sg(s),onMove:n,onEnd:(a,o)=>{delete this.session,r&&Pe.postRender(()=>r(a,o))}}}mount(){this.removePointerDownListener=Hi(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ho={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ji={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ae.test(e))e=parseFloat(e);else return e;const s=kg(e,t.target.x),n=kg(e,t.target.y);return`${s}% ${n}%`}},jT={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,r=fn.parse(e);if(r.length>5)return n;const a=fn.createTransformer(e),o=typeof r[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;r[0+o]/=l,r[1+o]/=c;const u=Ee(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),a(r)}};class ST extends m.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=t;oC(kT),a&&(s.group&&s.group.add(a),n&&n.register&&r&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ho.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:r,isPresent:a}=this.props,{projection:o}=n;return o&&(o.isPresent=a,r||t.layoutDependency!==s||s===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||Pe.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),bf.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Rb(e){const[t,s]=BE(),n=m.useContext(my);return i.jsx(ST,{...e,layoutGroup:n,switchLayoutGroup:m.useContext(ub),isPresent:t,safeToRemove:s})}const kT={borderRadius:{...ji,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ji,borderTopRightRadius:ji,borderBottomLeftRadius:ji,borderBottomRightRadius:ji,boxShadow:jT};function NT(e,t,s){const n=at(e)?e:Jr(e);return n.start(Pf("",n,t,s)),n.animation}const _T=(e,t)=>e.depth-t.depth;class ET{constructor(){this.children=[],this.isDirty=!1}add(t){ef(this.children,t),this.isDirty=!0}remove(t){tf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(_T),this.isDirty=!1,this.children.forEach(t)}}function CT(e,t){const s=bt.now(),n=({timestamp:r})=>{const a=r-s;a>=t&&(hn(n),e(a-t))};return Pe.setup(n,!0),()=>hn(n)}const Ib=["TopLeft","TopRight","BottomLeft","BottomRight"],TT=Ib.length,Ng=e=>typeof e=="string"?parseFloat(e):e,_g=e=>typeof e=="number"||ae.test(e);function PT(e,t,s,n,r,a){r?(e.opacity=Ee(0,s.opacity??1,AT(n)),e.opacityExit=Ee(t.opacity??1,0,RT(n))):a&&(e.opacity=Ee(t.opacity??1,s.opacity??1,n));for(let o=0;o<TT;o++){const l=`border${Ib[o]}Radius`;let c=Eg(t,l),u=Eg(s,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||_g(c)===_g(u)?(e[l]=Math.max(Ee(Ng(c),Ng(u),n),0),(fs.test(u)||fs.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||s.rotate)&&(e.rotate=Ee(t.rotate||0,s.rotate||0,n))}function Eg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const AT=Ob(0,.5,Ny),RT=Ob(.5,.95,zt);function Ob(e,t,s){return n=>n<e?0:n>t?1:s(ya(e,t,n))}function Cg(e,t){e.min=t.min,e.max=t.max}function Ot(e,t){Cg(e.x,t.x),Cg(e.y,t.y)}function Tg(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Pg(e,t,s,n,r){return e-=t,e=_l(e,1/s,n),r!==void 0&&(e=_l(e,1/r,n)),e}function IT(e,t=0,s=1,n=.5,r,a=e,o=e){if(fs.test(t)&&(t=parseFloat(t),t=Ee(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ee(a.min,a.max,n);e===a&&(l-=t),e.min=Pg(e.min,t,s,l,r),e.max=Pg(e.max,t,s,l,r)}function Ag(e,t,[s,n,r],a,o){IT(e,t[s],t[n],t[r],t.scale,a,o)}const OT=["x","scaleX","originX"],DT=["y","scaleY","originY"];function Rg(e,t,s,n){Ag(e.x,t,OT,s?s.x:void 0,n?n.x:void 0),Ag(e.y,t,DT,s?s.y:void 0,n?n.y:void 0)}function Ig(e){return e.translate===0&&e.scale===1}function Db(e){return Ig(e.x)&&Ig(e.y)}function Og(e,t){return e.min===t.min&&e.max===t.max}function LT(e,t){return Og(e.x,t.x)&&Og(e.y,t.y)}function Dg(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Lb(e,t){return Dg(e.x,t.x)&&Dg(e.y,t.y)}function Lg(e){return ut(e.x)/ut(e.y)}function Mg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class MT{constructor(){this.members=[]}add(t){ef(this.members,t),t.scheduleRender()}remove(t){if(tf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(r=>t===r);if(s===0)return!1;let n;for(let r=s;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $T(e,t,s){let n="";const r=e.x.translate/t.x,a=e.y.translate/t.y,o=(s==null?void 0:s.z)||0;if((r||a||o)&&(n=`translate3d(${r}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:g,skewY:v}=s;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),g&&(n+=`skewX(${g}deg) `),v&&(n+=`skewY(${v}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const nu=["","X","Y","Z"],FT={visibility:"hidden"},UT=1e3;let zT=0;function ru(e,t,s,n){const{latestValues:r}=t;r[e]&&(s[e]=r[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Mb(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=yb(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:r,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Pe,!(r||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Mb(n)}function $b({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=t==null?void 0:t()){this.id=zT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(BT),this.nodes.forEach(GT),this.nodes.forEach(YT),this.nodes.forEach(WT)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new ET)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rf),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=rb(o)&&!zE(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=CT(h,250),Ho.hasAnimatedSinceResize&&(Ho.hasAnimatedSinceResize=!1,this.nodes.forEach(Fg))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||tP,{onLayoutAnimationStart:y,onLayoutAnimationComplete:w}=u.getProps(),p=!this.targetLayout||!Lb(this.targetLayout,g),x=!h&&f;if(this.options.layoutRoot||this.resumeFrom||x||h&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...vf(v,"layout"),onPlay:y,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,x)}else h||Fg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),hn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XT),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Mb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($g);return}this.isUpdating||this.nodes.forEach(JT),this.isUpdating=!1,this.nodes.forEach(KT),this.nodes.forEach(VT),this.nodes.forEach(qT),this.clearAllSnapshots();const l=bt.now();Ye.delta=Cs(0,1e3/60,l-Ye.timestamp),Ye.timestamp=l,Ye.isProcessing=!0,Gc.update.process(Ye),Gc.preRender.process(Ye),Gc.render.process(Ye),Ye.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HT),this.sharedNodes.forEach(QT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ut(this.snapshot.measuredBox.x)&&!ut(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Db(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||An(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),sP(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return $e();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(nP))){const{scroll:d}=this.root;d&&(Er(l.x,d.offset.x),Er(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=$e();if(Ot(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ot(l,o),Er(l.x,h.offset.x),Er(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=$e();Ot(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Cr(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),An(d.latestValues)&&Cr(c,d.latestValues)}return An(this.latestValues)&&Cr(c,this.latestValues),c}removeTransform(o){const l=$e();Ot(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!An(u.latestValues))continue;Od(u.latestValues)&&u.updateSnapshot();const d=$e(),h=u.measurePageBox();Ot(d,h),Rg(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return An(this.latestValues)&&Rg(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ye.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Ye.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),Ki(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$e(),this.targetWithTransforms=$e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),iT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ot(this.target,this.layout.layoutBox),Eb(this.target,this.targetDelta)):Ot(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),Ki(this.relativeTargetOrigin,this.target,g.target),Ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Od(this.parent.latestValues)||_b(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ye.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ot(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;aT(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=$e());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Tg(this.prevProjectionDelta.x,this.projectionDelta.x),Tg(this.prevProjectionDelta.y,this.projectionDelta.y)),Ji(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Mg(this.projectionDelta.x,this.prevProjectionDelta.x)||!Mg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_r(),this.projectionDelta=_r(),this.projectionDeltaWithTransform=_r()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=_r();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=$e(),g=c?c.source:void 0,v=this.layout?this.layout.source:void 0,y=g!==v,w=this.getStack(),p=!w||w.members.length<=1,x=!!(y&&!p&&this.options.crossfade===!0&&!this.path.some(eP));this.animationProgress=0;let b;this.mixTargetDelta=S=>{const j=S/1e3;Ug(h.x,o.x,j),Ug(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ki(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ZT(this.relativeTarget,this.relativeTargetOrigin,f,j),b&&LT(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=$e()),Ot(b,this.relativeTarget)),y&&(this.animationValues=d,PT(d,u,this.latestValues,j,x,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(hn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{Ho.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Jr(0)),this.currentAnimation=NT(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(UT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Fb(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||$e();const h=ut(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=ut(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Ot(l,c),Cr(l,d),Ji(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new MT),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&ru("z",o,u,this.animationValues);for(let d=0;d<nu.length;d++)ru(`rotate${nu[d]}`,o,u,this.animationValues),ru(`skew${nu[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return FT;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=Wo(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Wo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!An(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),l.transform=$T(this.projectionDeltaWithTransform,this.treeScale,d),c&&(l.transform=c(d,l.transform));const{x:h,y:f}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,u.animationValues?l.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Sa){if(d[g]===void 0)continue;const{correct:v,applyTo:y,isCSSVariable:w}=Sa[g],p=l.transform==="none"?d[g]:v(d[g],u);if(y){const x=y.length;for(let b=0;b<x;b++)l[y[b]]=p}else w?this.options.visualElement.renderState.vars[g]=p:l[g]=p}return this.options.layoutId&&(l.pointerEvents=u===this?Wo(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach($g),this.root.sharedNodes.clear()}}}function VT(e){e.updateLayout()}function qT(e){var s;const t=((s=e.resumeFrom)==null?void 0:s.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:a}=e.options,o=t.source!==e.layout.source;a==="size"?Dt(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],g=ut(f);f.min=n[h].min,f.max=f.min+g}):Fb(a,t.layoutBox,n)&&Dt(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],g=ut(n[h]);f.max=f.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const l=_r();Ji(l,n,t.layoutBox);const c=_r();o?Ji(c,e.applyTransform(r,!0),t.measuredBox):Ji(c,n,t.layoutBox);const u=!Db(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const v=$e();Ki(v,t.layoutBox,f.layoutBox);const y=$e();Ki(y,n,g.layoutBox),Lb(v,y)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function BT(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function WT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function HT(e){e.clearSnapshot()}function $g(e){e.clearMeasurements()}function JT(e){e.isLayoutDirty=!1}function KT(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Fg(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function GT(e){e.resolveTargetDelta()}function YT(e){e.calcProjection()}function XT(e){e.resetSkewAndRotation()}function QT(e){e.removeLeadSnapshot()}function Ug(e,t,s){e.translate=Ee(t.translate,0,s),e.scale=Ee(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function zg(e,t,s,n){e.min=Ee(t.min,s.min,n),e.max=Ee(t.max,s.max,n)}function ZT(e,t,s,n){zg(e.x,t.x,s.x,n),zg(e.y,t.y,s.y,n)}function eP(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const tP={duration:.45,ease:[.4,0,.1,1]},Vg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),qg=Vg("applewebkit/")&&!Vg("chrome/")?Math.round:zt;function Bg(e){e.min=qg(e.min),e.max=qg(e.max)}function sP(e){Bg(e.x),Bg(e.y)}function Fb(e,t,s){return e==="position"||e==="preserve-aspect"&&!rT(Lg(t),Lg(s),.2)}function nP(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const rP=$b({attachResizeListener:(e,t)=>Na(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iu={current:void 0},Ub=$b({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!iu.current){const e=new rP({});e.mount(window),e.setOptions({layoutScroll:!0}),iu.current=e}return iu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),iP={pan:{Feature:wT},drag:{Feature:bT,ProjectionNode:Ub,MeasureLayout:Rb}};function Wg(e,t,s){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",s==="Start");const r="onHover"+s,a=n[r];a&&Pe.postRender(()=>a(t,Ua(t)))}class aP extends yn{mount(){const{current:t}=this.node;t&&(this.unmount=LE(t,(s,n)=>(Wg(this.node,n,"Start"),r=>Wg(this.node,r,"End"))))}unmount(){}}class oP extends yn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ma(Na(this.node.current,"focus",()=>this.onFocus()),Na(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Hg(e,t,s){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",s==="Start");const r="onTap"+(s==="End"?"":s),a=n[r];a&&Pe.postRender(()=>a(t,Ua(t)))}class lP extends yn{mount(){const{current:t}=this.node;t&&(this.unmount=UE(t,(s,n)=>(Hg(this.node,n,"Start"),(r,{success:a})=>Hg(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Md=new WeakMap,au=new WeakMap,cP=e=>{const t=Md.get(e.target);t&&t(e)},uP=e=>{e.forEach(cP)};function dP({root:e,...t}){const s=e||document;au.has(s)||au.set(s,{});const n=au.get(s),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver(uP,{root:e,...t})),n[r]}function hP(e,t,s){const n=dP(t);return Md.set(e,s),n.observe(e),()=>{Md.delete(e),n.unobserve(e)}}const fP={some:0,all:1};class mP extends yn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:r="some",once:a}=t,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:fP[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return hP(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(pP(t,s))&&this.startObserver()}unmount(){}}function pP({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const gP={inView:{Feature:mP},tap:{Feature:lP},focus:{Feature:oP},hover:{Feature:aP}},xP={layout:{ProjectionNode:Ub,MeasureLayout:Rb}},$d={current:null},zb={current:!1};function vP(){if(zb.current=!0,!!Qh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>$d.current=e.matches;e.addListener(t),t()}else $d.current=!1}const yP=new WeakMap;function bP(e,t,s){for(const n in t){const r=t[n],a=s[n];if(at(r))e.addValue(n,r);else if(at(a))e.addValue(n,Jr(r,{owner:e}));else if(a!==r)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=e.getStaticValue(n);e.addValue(n,Jr(o!==void 0?o:r,{owner:e}))}}for(const n in s)t[n]===void 0&&e.removeValue(n);return t}const Jg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wP{scrapeMotionValuesFromProps(t,s,n){return{}}constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=bt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Pe.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=rc(s),this.isVariantNode=lb(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in h){const g=h[f];c[f]!==void 0&&at(g)&&g.set(c[f],!1)}}mount(t){this.current=t,yP.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),zb.current||vP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$d.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),hn(this.notifyUpdate),hn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ai.has(t);n&&this.onBindTransform&&this.onBindTransform();const r=s.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Pe.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{r(),a(),o&&o(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Kr){const s=Kr[t];if(!s)continue;const{isEnabled:n,Feature:r}=s;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$e()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Jg.length;n++){const r=Jg[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,o=t[a];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=bP(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const n=this.values.get(t);s!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=Jr(s===null?void 0:s,{owner:this}),this.addValue(t,n)),n}readValue(t,s){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(py(n)||xy(n))?n=parseFloat(n):!qE(n)&&fn.test(s)&&(n=Zy(t,s)),this.setBaseTarget(t,at(n)?n.get():n)),at(n)?n.get():n}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var a;const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const o=Cf(this.props,s,(a=this.presenceContext)==null?void 0:a.custom);o&&(n=o[t])}if(s&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!at(r)?r:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new rf),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class Vb extends wP{constructor(){super(...arguments),this.KeyframeResolver=AE}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;at(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function qb(e,{style:t,vars:s},n,r){Object.assign(e.style,t,r&&r.getProjectionStyles(n));for(const a in s)e.style.setProperty(a,s[a])}function jP(e){return window.getComputedStyle(e)}class SP extends Vb{constructor(){super(...arguments),this.type="html",this.renderInstance=qb}readValueFromInstance(t,s){var n;if(ai.has(s))return(n=this.projection)!=null&&n.isProjecting?Nd(s):Y_(t,s);{const r=jP(t),a=(lf(s)?r.getPropertyValue(s):r[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return Cb(t,s)}build(t,s,n){Nf(t,s,n.transformTemplate)}scrapeMotionValuesFromProps(t,s,n){return Tf(t,s,n)}}const Bb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kP(e,t,s,n){qb(e,t,void 0,n);for(const r in t.attrs)e.setAttribute(Bb.has(r)?r:kf(r),t.attrs[r])}class NP extends Vb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$e}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(ai.has(s)){const n=Qy(s);return n&&n.default||0}return s=Bb.has(s)?s:kf(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,n){return vb(t,s,n)}build(t,s,n){mb(t,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,s,n,r){kP(t,s,n,r)}mount(t){this.isSVGTag=gb(t.tagName),super.mount(t)}}const _P=(e,t)=>Ef(e)?new NP(t):new SP(t,{allowProjection:e!==m.Fragment}),EP=kC({...YC,...gP,...iP,...xP},_P),Wb=GE(EP);function CP(){var f;const[e,t]=m.useState(""),[s,n]=m.useState(""),[r,a]=m.useState(null),[o,l]=m.useState(!1),c=Ke(),d=(f=Os().state)==null?void 0:f.message,h=async g=>{g.preventDefault(),a(null),l(!0);try{const{data:v,error:y}=await k.auth.signInWithPassword({email:e,password:s});if(y)throw y;v!=null&&v.user&&c("/dashboard")}catch(v){v instanceof Error?v.message.includes("Invalid login credentials")?a("Invalid email or password"):v.message.includes("Email not confirmed")?a("Please confirm your email address before logging in"):a(v.message):a("An unexpected error occurred during login")}finally{l(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#1a365d] to-[#0f2942] py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs(Wb.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("img",{src:nr,alt:"Accreda Logo",className:"h-24 w-auto mb-6 cursor-pointer",onClick:()=>c("/")}),i.jsx("h2",{className:"text-2xl font-bold text-[#1a365d]",children:"Welcome back"}),i.jsx("p",{className:"mt-2 text-sm text-[#4a5568]",children:"Sign in to your EIT Track account"})]}),d&&i.jsx("div",{className:"rounded-lg bg-green-50 p-4 border border-green-100",children:i.jsx("div",{className:"text-sm text-green-700",children:d})}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[r&&i.jsx("div",{className:"rounded-lg bg-red-50 p-4 border border-red-100",children:i.jsx("div",{className:"text-sm text-red-700",children:r})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-[#1a365d] mb-1",children:"Email address"}),i.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-200 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1a365d] focus:border-transparent sm:text-sm transition-colors",placeholder:"Enter your email",value:e,onChange:g=>t(g.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-[#1a365d] mb-1",children:"Password"}),i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-200 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1a365d] focus:border-transparent sm:text-sm transition-colors",placeholder:"Enter your password",value:s,onChange:g=>n(g.target.value)})]})]}),i.jsx("div",{className:"flex items-center justify-end",children:i.jsx("div",{className:"text-sm",children:i.jsx($t,{to:"/forgot-password",className:"font-medium text-[#1a365d] hover:text-[#2c5282] transition-colors",children:"Forgot your password?"})})}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2.5 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-[#1a365d] hover:bg-[#2c5282] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1a365d] transition-all duration-300 transform hover:scale-105 disabled:opacity-75 disabled:cursor-not-allowed",children:o?"Signing in...":"Sign in"})}),i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-sm text-[#4a5568]",children:["Don't have an account?"," ",i.jsx($t,{to:"/signup",className:"font-medium text-[#1a365d] hover:text-[#2c5282] transition-colors",children:"Create one now"})]})})]})]})})}function TP(){const[e,t]=m.useState({email:"",password:"",confirmPassword:"",fullName:"",organization:"",accountType:"eit",startDate:"",targetDate:""}),[s,n]=m.useState(null),[r,a]=m.useState(!1),[o,l]=m.useState(null),c=Ke(),u=async d=>{d.preventDefault(),n(null),a(!0);try{if(e.password!==e.confirmPassword)throw new Error("Passwords do not match");if(e.password.length<6)throw new Error("Password must be at least 6 characters long");if(!e.fullName.trim())throw new Error("Full name is required");if(e.accountType==="supervisor"&&!e.organization.trim())throw new Error("Organization is required for supervisors");if(e.accountType==="eit"&&(!e.startDate||!e.targetDate))throw new Error("Please provide your program start and expected end date.");const{data:h,error:f}=await k.auth.signUp({email:e.email,password:e.password,options:{emailRedirectTo:`${window.location.origin}/login`}});if(f)throw new Error(`Authentication error: ${f.message}`);if(!h.user)throw new Error("Failed to create user account");const g={id:h.user.id,email:e.email,full_name:e.fullName,account_type:e.accountType,...e.accountType==="supervisor"&&{organization:e.organization},...e.accountType==="eit"&&{start_date:e.startDate,target_date:e.targetDate}},{error:v}=await k.from(e.accountType==="eit"?"eit_profiles":"supervisor_profiles").insert([g]);if(v)throw new Error(`Failed to create profile: ${v.message}`);l("Account created successfully! Please check your email for verification."),t({email:"",password:"",confirmPassword:"",fullName:"",organization:"",accountType:"eit",startDate:"",targetDate:""}),c("/login",{state:{message:"Please check your email to confirm your account. You can now sign in."}})}catch(h){let f=h instanceof Error?h.message:"An error occurred during signup";(f.includes("duplicate key value")||f.includes("unique constraint")||f.toLowerCase().includes("already exists"))&&(f="An account with this email already exists. Please log in or use a different email address."),n(f)}finally{a(!1)}};return m.useEffect(()=>{k.auth.getSession().then(({data:{session:d}})=>{d&&c("/dashboard")})},[c]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#1a365d] to-[#0f2942] py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs(Wb.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("img",{src:nr,alt:"Accreda Logo",className:"h-24 w-auto mb-6 cursor-pointer",onClick:()=>c("/")}),i.jsx("h2",{className:"text-2xl font-bold text-[#1a365d]",children:"Create your account"}),i.jsx("p",{className:"mt-2 text-sm text-[#4a5568]",children:"Join EIT Track to start your journey"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[s&&i.jsx("div",{className:"rounded-lg bg-red-50 p-4 border border-red-100",children:i.jsx("div",{className:"text-sm text-red-700",children:s})}),o&&i.jsx("div",{className:"rounded-lg bg-green-50 p-4 border border-green-100",children:i.jsx("div",{className:"text-sm text-green-700",children:o})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-center mb-4 gap-3",children:[i.jsx("button",{type:"button",className:`px-4 py-2 rounded-lg border font-semibold transition-all duration-200 transform focus:outline-none focus:ring-2 focus:ring-[#1a365d]
                  ${e.accountType==="eit"?"bg-[#1a365d] text-white scale-105 shadow-lg":"bg-white text-[#1a365d] border-[#1a365d] hover:scale-105 hover:brightness-95"}
                `,onClick:()=>t({...e,accountType:"eit"}),children:"EIT"}),i.jsx("button",{type:"button",className:`px-4 py-2 rounded-lg border font-semibold transition-all duration-200 transform focus:outline-none focus:ring-2 focus:ring-[#1a365d]
                  ${e.accountType==="supervisor"?"bg-[#1a365d] text-white scale-105 shadow-lg":"bg-white text-[#1a365d] border-[#1a365d] hover:scale-105 hover:brightness-95"}
                `,onClick:()=>t({...e,accountType:"supervisor"}),children:"Supervisor"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"full-name",className:"block text-sm font-medium text-[#1a365d] mb-1",children:"Full Name"}),i.jsx("input",{id:"full-name",name:"full-name",type:"text",autoComplete:"name",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-200 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1a365d] focus:border-transparent sm:text-sm transition-colors",placeholder:"Enter your full name",value:e.fullName,onChange:d=>t({...e,fullName:d.target.value})})]}),e.accountType==="supervisor"&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"organization",className:"block text-sm font-medium text-[#1a365d] mb-1",children:"Organization"}),i.jsx("input",{id:"organization",name:"organization",type:"text",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-200 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1a365d] focus:border-transparent sm:text-sm transition-colors",placeholder:"Enter your organization",value:e.organization,onChange:d=>t({...e,organization:d.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-[#1a365d] mb-1",children:"Email address"}),i.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-200 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1a365d] focus:border-transparent sm:text-sm transition-colors",placeholder:"Enter your email",value:e.email,onChange:d=>t({...e,email:d.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-[#1a365d] mb-1",children:"Password"}),i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-200 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1a365d] focus:border-transparent sm:text-sm transition-colors",placeholder:"Create a password",value:e.password,onChange:d=>t({...e,password:d.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-[#1a365d] mb-1",children:"Confirm Password"}),i.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-200 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1a365d] focus:border-transparent sm:text-sm transition-colors",placeholder:"Confirm your password",value:e.confirmPassword,onChange:d=>t({...e,confirmPassword:d.target.value})})]}),e.accountType==="eit"&&i.jsxs("div",{className:"card p-4 mb-2 bg-blue-50/50 border border-blue-100 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("span",{className:"font-semibold text-blue-800",children:"Program Timeline"})]}),i.jsx("p",{className:"text-xs text-blue-700 mb-3",children:"Set your program start and expected end date for personalized progress tracking."}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-blue-900 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",className:"w-full border border-blue-200 rounded px-3 py-2 text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-400",value:e.startDate,onChange:d=>t({...e,startDate:d.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-blue-900 mb-1",children:"Expected End Date"}),i.jsx("input",{type:"date",className:"w-full border border-blue-200 rounded px-3 py-2 text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-400",value:e.targetDate,onChange:d=>t({...e,targetDate:d.target.value}),required:!0})]})]})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2.5 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-[#1a365d] hover:bg-[#2c5282] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1a365d] transition-all duration-300 transform hover:scale-105 disabled:opacity-75 disabled:cursor-not-allowed",children:r?"Creating account...":"Create account"})}),i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-sm text-[#4a5568]",children:["Already have an account?"," ",i.jsx($t,{to:"/login",className:"font-medium text-[#1a365d] hover:text-[#2c5282] transition-colors",children:"Sign in"})]})})]})]})})}function PP(){const[e,t]=m.useState(""),[s,n]=m.useState(null),[r,a]=m.useState(null),[o,l]=m.useState(!1),c=async u=>{u.preventDefault(),n(null),a(null),l(!0);try{const{error:d}=await k.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(d)throw d;a("Password reset instructions have been sent to your email address."),t("")}catch(d){n(d instanceof Error?d.message:"An error occurred while sending reset instructions")}finally{l(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-50 to-slate-100 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("img",{src:nr,alt:"Accreda Logo",className:"h-24 w-auto mb-6"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Reset your password"}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 text-center",children:"Enter your email address and we'll send you instructions to reset your password"})]}),r&&i.jsx("div",{className:"rounded-lg bg-green-50 p-4 border border-green-100",children:i.jsx("div",{className:"text-sm text-green-700",children:r})}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[s&&i.jsx("div",{className:"rounded-lg bg-red-50 p-4 border border-red-100",children:i.jsx("div",{className:"text-sm text-red-700",children:s})}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-slate-700 mb-1",children:"Email address"}),i.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-400 text-slate-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent sm:text-sm transition-colors",placeholder:"Enter your email",value:e,onChange:u=>t(u.target.value)})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2.5 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors disabled:opacity-75 disabled:cursor-not-allowed",children:o?"Sending instructions...":"Send reset instructions"})}),i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-sm text-slate-600",children:["Remember your password?"," ",i.jsx($t,{to:"/login",className:"font-medium text-teal-600 hover:text-teal-500 transition-colors",children:"Sign in"})]})})]})]})})}function AP(){const[e,t]=m.useState(""),[s,n]=m.useState(""),[r,a]=m.useState(null),[o,l]=m.useState(!1),c=Ke();m.useEffect(()=>{k.auth.getSession().then(({data:{session:d}})=>{d||c("/login",{state:{message:"Password reset link is invalid or has expired. Please try again."}})})},[c]);const u=async d=>{if(d.preventDefault(),a(null),e!==s){a("Passwords do not match");return}if(e.length<6){a("Password must be at least 6 characters long");return}l(!0);try{const{error:h}=await k.auth.updateUser({password:e});if(h)throw h;await k.auth.signOut(),c("/login",{state:{message:"Your password has been reset successfully. Please sign in with your new password."}})}catch(h){a(h instanceof Error?h.message:"An error occurred while resetting your password")}finally{l(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-50 to-slate-100 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("img",{src:nr,alt:"Accreda Logo",className:"h-24 w-auto mb-6"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Set new password"}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 text-center",children:"Please enter your new password below"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[r&&i.jsx("div",{className:"rounded-lg bg-red-50 p-4 border border-red-100",children:i.jsx("div",{className:"text-sm text-red-700",children:r})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Password"}),i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-400 text-slate-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent sm:text-sm transition-colors",placeholder:"Enter your new password",value:e,onChange:d=>t(d.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirm New Password"}),i.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-slate-300 placeholder-slate-400 text-slate-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent sm:text-sm transition-colors",placeholder:"Confirm your new password",value:s,onChange:d=>n(d.target.value)})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2.5 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors disabled:opacity-75 disabled:cursor-not-allowed",children:o?"Resetting password...":"Reset password"})})]})]})})}/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(e,t)=>{const s=m.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>m.createElement("svg",{ref:d,...RP,width:r,height:r,stroke:n,strokeWidth:o?Number(a)*24/Number(r):a,className:["lucide",`lucide-${IP(e)}`,l].join(" "),...u},[...t.map(([h,f])=>m.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=X("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=X("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=X("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=X("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=X("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=X("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=X("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=X("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=X("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=X("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=X("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=X("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=X("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=X("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=X("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=X("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=X("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=X("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=X("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=X("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=X("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=X("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=X("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=X("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=X("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=X("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=X("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=X("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=X("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=X("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=X("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=X("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=X("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=X("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=X("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=X("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sA={},Xg=e=>{let t;const s=new Set,n=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const g=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),s.forEach(v=>v(t,g))}},r=()=>t,c={setState:n,getState:r,getInitialState:()=>u,subscribe:d=>(s.add(d),()=>s.delete(d)),destroy:()=>{(sA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},u=t=e(n,r,c);return c},nA=e=>e?Xg(e):Xg;var nw={exports:{}},rw={},iw={exports:{}},aw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yr=m;function rA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iA=typeof Object.is=="function"?Object.is:rA,aA=Yr.useState,oA=Yr.useEffect,lA=Yr.useLayoutEffect,cA=Yr.useDebugValue;function uA(e,t){var s=t(),n=aA({inst:{value:s,getSnapshot:t}}),r=n[0].inst,a=n[1];return lA(function(){r.value=s,r.getSnapshot=t,ou(r)&&a({inst:r})},[e,s,t]),oA(function(){return ou(r)&&a({inst:r}),e(function(){ou(r)&&a({inst:r})})},[e]),cA(s),s}function ou(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!iA(e,s)}catch{return!0}}function dA(e,t){return t()}var hA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dA:uA;aw.useSyncExternalStore=Yr.useSyncExternalStore!==void 0?Yr.useSyncExternalStore:hA;iw.exports=aw;var fA=iw.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc=m,mA=fA;function pA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gA=typeof Object.is=="function"?Object.is:pA,xA=mA.useSyncExternalStore,vA=oc.useRef,yA=oc.useEffect,bA=oc.useMemo,wA=oc.useDebugValue;rw.useSyncExternalStoreWithSelector=function(e,t,s,n,r){var a=vA(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=bA(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),r!==void 0&&o.hasValue){var v=o.value;if(r(v,g))return h=v}return h=g}if(v=h,gA(d,g))return v;var y=n(g);return r!==void 0&&r(v,y)?(d=g,v):(d=g,h=y)}var u=!1,d,h,f=s===void 0?null:s;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,s,n,r]);var l=xA(e,a[0],a[1]);return yA(function(){o.hasValue=!0,o.value=l},[l]),wA(l),l};nw.exports=rw;var jA=nw.exports;const SA=Gd(jA),ow={},{useDebugValue:kA}=Be,{useSyncExternalStoreWithSelector:NA}=SA;let Qg=!1;const _A=e=>e;function EA(e,t=_A,s){(ow?"production":void 0)!=="production"&&s&&!Qg&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Qg=!0);const n=NA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return kA(n),n}const Zg=e=>{(ow?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?nA(e):e,s=(n,r)=>EA(t,n,r);return Object.assign(s,t),s},Bt=e=>e?Zg(e):Zg;function CA(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var lw=CA,TA=typeof it=="object"&&it&&it.Object===Object&&it,PA=TA,AA=PA,RA=typeof self=="object"&&self&&self.Object===Object&&self,IA=AA||RA||Function("return this")(),cw=IA,OA=cw,DA=function(){return OA.Date.now()},LA=DA,MA=/\s/;function $A(e){for(var t=e.length;t--&&MA.test(e.charAt(t)););return t}var FA=$A,UA=FA,zA=/^\s+/;function VA(e){return e&&e.slice(0,UA(e)+1).replace(zA,"")}var qA=VA,BA=cw,WA=BA.Symbol,uw=WA,ex=uw,dw=Object.prototype,HA=dw.hasOwnProperty,JA=dw.toString,Si=ex?ex.toStringTag:void 0;function KA(e){var t=HA.call(e,Si),s=e[Si];try{e[Si]=void 0;var n=!0}catch{}var r=JA.call(e);return n&&(t?e[Si]=s:delete e[Si]),r}var GA=KA,YA=Object.prototype,XA=YA.toString;function QA(e){return XA.call(e)}var ZA=QA,tx=uw,e4=GA,t4=ZA,s4="[object Null]",n4="[object Undefined]",sx=tx?tx.toStringTag:void 0;function r4(e){return e==null?e===void 0?n4:s4:sx&&sx in Object(e)?e4(e):t4(e)}var i4=r4;function a4(e){return e!=null&&typeof e=="object"}var o4=a4,l4=i4,c4=o4,u4="[object Symbol]";function d4(e){return typeof e=="symbol"||c4(e)&&l4(e)==u4}var h4=d4,f4=qA,nx=lw,m4=h4,rx=NaN,p4=/^[-+]0x[0-9a-f]+$/i,g4=/^0b[01]+$/i,x4=/^0o[0-7]+$/i,v4=parseInt;function y4(e){if(typeof e=="number")return e;if(m4(e))return rx;if(nx(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=nx(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=f4(e);var s=g4.test(e);return s||x4.test(e)?v4(e.slice(2),s?2:8):p4.test(e)?rx:+e}var b4=y4,w4=lw,lu=LA,ix=b4,j4="Expected a function",S4=Math.max,k4=Math.min;function N4(e,t,s){var n,r,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(j4);t=ix(t)||0,w4(s)&&(d=!!s.leading,h="maxWait"in s,a=h?S4(ix(s.maxWait)||0,t):a,f="trailing"in s?!!s.trailing:f);function g(N){var _=n,C=r;return n=r=void 0,u=N,o=e.apply(C,_),o}function v(N){return u=N,l=setTimeout(p,t),d?g(N):o}function y(N){var _=N-c,C=N-u,I=t-_;return h?k4(I,a-C):I}function w(N){var _=N-c,C=N-u;return c===void 0||_>=t||_<0||h&&C>=a}function p(){var N=lu();if(w(N))return x(N);l=setTimeout(p,y(N))}function x(N){return l=void 0,f&&n?g(N):(n=r=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,n=c=r=l=void 0}function S(){return l===void 0?o:x(lu())}function j(){var N=lu(),_=w(N);if(n=arguments,r=this,c=N,_){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(p,t),g(c)}return l===void 0&&(l=setTimeout(p,t)),o}return j.cancel=b,j.flush=S,j}var _4=N4;const E4=Gd(_4),C4=Bt(e=>({results:[],loading:!1,error:null,search:E4(async t=>{if(!t.trim()){e({results:[],loading:!1,error:null});return}e({loading:!0,error:null});try{const{data:{user:s}}=await k.auth.getUser();if(!s)throw new Error("No user found");const{data:n,error:r}=await k.rpc("search_all",{search_query:t,user_id:s.id});if(r)throw console.error("Search error:",r),new Error(r.message);const a=(n||[]).map(o=>{const l={id:o.id,type:o.type,title:o.title,description:o.description,category:o.category};switch(o.type){case"job":return{...l,metadata:{company:o.company,location:o.location}};case"reference":return{...l,metadata:{email:o.email,referenceNumber:o.reference_number}};case"validator":return{...l,metadata:{email:o.email,skillName:o.skill_name}};default:return l}});e({results:a,loading:!1})}catch(s){console.error("Search error:",s),e({error:"Failed to search",loading:!1})}},300),clearResults:()=>e({results:[],error:null})})),hw=()=>{const[e,t]=m.useState(""),[s,n]=m.useState(!1),[r,a]=m.useState(null),{results:o,loading:l,error:c,search:u,clearResults:d}=C4(),h=Ke(),f=m.useRef(null);m.useEffect(()=>{const p=x=>{f.current&&!f.current.contains(x.target)&&n(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),m.useEffect(()=>{(async()=>{const{data:{user:x}}=await kt(()=>Promise.resolve().then(()=>Vo),void 0).then(j=>j.supabase.auth.getUser());if(!x)return;const{data:b}=await kt(async()=>{const{data:j}=await Promise.resolve().then(()=>Vo);return{data:j}},void 0).then(j=>j.supabase.from("eit_profiles").select("id").eq("id",x.id).single()),{data:S}=await kt(async()=>{const{data:j}=await Promise.resolve().then(()=>Vo);return{data:j}},void 0).then(j=>j.supabase.from("supervisor_profiles").select("id").eq("id",x.id).single());S?a("supervisor"):b&&a("eit")})()},[]);const g=async p=>{if(t(p),p.trim()){n(!0);try{await u(p)}catch(x){console.error("Search error:",x),n(!0)}}else n(!1),d()},v=p=>{switch(n(!1),t(""),d(),p.type){case"document":h("/dashboard/documents"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("highlight-document",{detail:{documentId:p.id}}))},500);break;case"sao":h("/dashboard/saos"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("highlight-sao",{detail:{saoId:p.id}}))},500);break;case"skill":r==="eit"?(h("/dashboard/skills"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("scroll-to-skill",{detail:{skillId:p.id,timestamp:Date.now()}}))},500)):r==="supervisor"&&(h("/dashboard/supervisor/skills"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("scroll-to-skill",{detail:{skillId:p.id,timestamp:Date.now()}}))},500));break;case"job":h("/dashboard/references"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("scroll-to-item",{detail:{itemId:p.id,itemType:"job"}}))},500);break;case"reference":h("/dashboard/references"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("scroll-to-item",{detail:{itemId:p.id,itemType:"reference"}}))},500);break;case"validator":h("/dashboard/references"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("scroll-to-item",{detail:{itemId:p.id,itemType:"validator"}}))},500);break}},y=p=>{switch(p){case"document":return i.jsx(Ds,{size:16,className:"text-blue-500"});case"sao":return i.jsx(Of,{size:16,className:"text-amber-500"});case"skill":return i.jsx(oi,{size:16,className:"text-green-500"});case"job":return i.jsx(Gi,{size:16,className:"text-purple-500"});case"reference":return i.jsx(Va,{size:16,className:"text-indigo-500"});case"validator":return i.jsx(mn,{size:16,className:"text-teal-500"})}},w=p=>{if(!p.metadata)return null;switch(p.type){case"job":return`${p.metadata.company}  ${p.metadata.location}`;case"reference":return`Reference ${p.metadata.referenceNumber}  ${p.metadata.email}`;case"validator":return`${p.metadata.skillName}  ${p.metadata.email}`;default:return null}};return i.jsxs("div",{className:"relative",ref:f,children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search documents, SAOs, skills, jobs, references...",value:e,onChange:p=>g(p.target.value),className:"pl-9 pr-4 py-2 bg-slate-100 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 w-64"}),i.jsx($f,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),l&&i.jsx(XP,{className:"absolute right-3 top-2.5 text-slate-400 animate-spin",size:18})]}),s&&(e.trim()||o.length>0)&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border border-slate-200 max-h-96 overflow-y-auto z-50",children:c?i.jsx("div",{className:"px-4 py-3 text-sm text-red-500",children:c}):o.length>0?i.jsx("div",{className:"py-2",children:o.map(p=>i.jsxs("button",{onClick:()=>v(p),className:"w-full px-4 py-2 text-left hover:bg-slate-50 flex items-center space-x-3",children:[y(p.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:p.title}),p.description&&i.jsx("p",{className:"text-xs text-slate-500 truncate",children:p.description}),p.category&&i.jsx("p",{className:"text-xs text-slate-500",children:p.category}),w(p)&&i.jsx("p",{className:"text-xs text-slate-500",children:w(p)})]})]},`${p.type}-${p.id}`))}):i.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"No results found"})})]})},fw=()=>{const[e,t]=m.useState(!1),[s,n]=m.useState(""),[r,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState(null),d=m.useRef(null),h=Ke();m.useEffect(()=>{(async()=>{var p,x,b;const{data:{user:w}}=await k.auth.getUser();if(w){a(w.email||""),n(((p=w.user_metadata)==null?void 0:p.full_name)||((x=w.email)==null?void 0:x.split("@")[0])||"User"),l(((b=w.user_metadata)==null?void 0:b.avatar_url)||"");const{data:S}=await k.from("eit_profiles").select("id").eq("id",w.id).single(),{data:j}=await k.from("supervisor_profiles").select("id").eq("id",w.id).single();j?u("supervisor"):S&&u("eit")}})()},[]),m.useEffect(()=>{const y=w=>{d.current&&!d.current.contains(w.target)&&t(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]);const f=async()=>{try{await k.auth.signOut(),h("/login")}catch(y){console.error("Error signing out:",y)}},g=y=>y.split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2),v=()=>{h(c==="supervisor"?"/dashboard/supervisor/settings":"/dashboard/settings"),t(!1)};return i.jsxs("div",{className:"relative",ref:d,children:[i.jsxs("button",{className:"flex items-center space-x-2 focus:outline-none",onClick:()=>t(!e),children:[o?i.jsx("img",{src:o,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover bg-teal-500 text-white"}):i.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-500 flex items-center justify-center text-white",children:i.jsx("span",{className:"text-sm font-semibold",children:g(s)})}),i.jsx("span",{className:"hidden md:block text-sm font-medium",children:s}),i.jsx(za,{size:16,className:`text-slate-500 transition-transform ${e?"rotate-180":""}`})]}),e&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 z-50 border border-slate-200 animate-in fade-in slide-in-from-top-3 duration-200",children:[i.jsxs("div",{className:"px-4 py-2 border-b border-slate-200",children:[i.jsx("p",{className:"text-sm font-semibold",children:s}),i.jsx("p",{className:"text-xs text-slate-500",children:r})]}),i.jsxs("ul",{children:[i.jsx("li",{children:i.jsxs("button",{onClick:v,className:"w-full flex items-center px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",children:[i.jsx(Ff,{size:16,className:"mr-2"}),"Settings"]})}),i.jsx("li",{className:"border-t border-slate-200 mt-1",children:i.jsxs("button",{onClick:f,className:"w-full flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[i.jsx(Df,{size:16,className:"mr-2"}),"Sign out"]})})]})]})]})},mw=Bt((e,t)=>({notifications:[],unreadCount:0,loading:!1,initialized:!1,initialize:async()=>{try{e({loading:!0});const{data:{user:s}}=await k.auth.getUser();if(!s)return;const{data:n,error:r}=await k.from("notifications").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});if(r)throw r;e({notifications:n||[],unreadCount:(n==null?void 0:n.filter(a=>!a.read).length)||0,loading:!1,initialized:!0}),await t().setupRealtimeSubscriptions()}catch(s){console.error("Error initializing notifications:",s),e({loading:!1,initialized:!1})}},markAsRead:async s=>{try{const{error:n}=await k.from("notifications").update({read:!0}).eq("id",s);if(n)throw n;e(r=>({notifications:r.notifications.map(a=>a.id===s?{...a,read:!0}:a),unreadCount:r.unreadCount-1}))}catch(n){console.error("Error marking notification as read:",n)}},markAllAsRead:async()=>{try{const{data:{user:s}}=await k.auth.getUser();if(!s)return;const{error:n}=await k.from("notifications").update({read:!0}).eq("user_id",s.id).eq("read",!1);if(n)throw n;e(r=>({notifications:r.notifications.map(a=>({...a,read:!0})),unreadCount:0}))}catch(s){console.error("Error marking all notifications as read:",s)}},clearNotifications:()=>{e({notifications:[],unreadCount:0})},setupRealtimeSubscriptions:async()=>{const{data:{user:s}}=await k.auth.getUser();if(!s)return;const n=k.channel("notifications-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s.id}`},r=>{const a=r.new;e(o=>({notifications:[a,...o.notifications],unreadCount:a.read?o.unreadCount:o.unreadCount+1}))}).subscribe();window.addEventListener("unload",()=>{n.unsubscribe()})}}));function Xe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function T4(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const _o=43200,ax=1440;let P4={};function A4(){return P4}function ox(e){const t=Xe(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function Jo(e,t){const s=Xe(e),n=Xe(t),r=s.getTime()-n.getTime();return r<0?-1:r>0?1:r}function R4(e){return T4(e,Date.now())}function I4(e,t){const s=Xe(e),n=Xe(t),r=s.getFullYear()-n.getFullYear(),a=s.getMonth()-n.getMonth();return r*12+a}function O4(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function D4(e,t){return+Xe(e)-+Xe(t)}function L4(e){const t=Xe(e);return t.setHours(23,59,59,999),t}function M4(e){const t=Xe(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function $4(e){const t=Xe(e);return+L4(t)==+M4(t)}function F4(e,t){const s=Xe(e),n=Xe(t),r=Jo(s,n),a=Math.abs(I4(s,n));let o;if(a<1)o=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-r*a);let l=Jo(s,n)===-r;$4(Xe(e))&&a===1&&Jo(e,n)===1&&(l=!1),o=r*(a-Number(l))}return o===0?0:o}function U4(e,t,s){const n=D4(e,t)/1e3;return O4(s==null?void 0:s.roundingMethod)(n)}const z4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},V4=(e,t,s)=>{let n;const r=z4[e];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function cu(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const q4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},B4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},W4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},H4={date:cu({formats:q4,defaultWidth:"full"}),time:cu({formats:B4,defaultWidth:"full"}),dateTime:cu({formats:W4,defaultWidth:"full"})},J4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},K4=(e,t,s,n)=>J4[e];function ki(e){return(t,s)=>{const n=s!=null&&s.context?String(s.context):"standalone";let r;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=s!=null&&s.width?String(s.width):o;r=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=s!=null&&s.width?String(s.width):e.defaultWidth;r=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return r[a]}}const G4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Y4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},X4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Q4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Z4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tR=(e,t)=>{const s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},sR={ordinalNumber:tR,era:ki({values:G4,defaultWidth:"wide"}),quarter:ki({values:Y4,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ki({values:X4,defaultWidth:"wide"}),day:ki({values:Q4,defaultWidth:"wide"}),dayPeriod:ki({values:Z4,defaultWidth:"wide",formattingValues:eR,defaultFormattingWidth:"wide"})};function Ni(e){return(t,s={})=>{const n=s.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(r);if(!a)return null;const o=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?rR(l,h=>h.test(o)):nR(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=s.valueCallback?s.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function nR(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}function rR(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}function iR(e){return(t,s={})=>{const n=t.match(e.matchPattern);if(!n)return null;const r=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=s.valueCallback?s.valueCallback(o):o;const l=t.slice(r.length);return{value:o,rest:l}}}const aR=/^(\d+)(th|st|nd|rd)?/i,oR=/\d+/i,lR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cR={any:[/^b/i,/^(a|c)/i]},uR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dR={any:[/1/i,/2/i,/3/i,/4/i]},hR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vR={ordinalNumber:iR({matchPattern:aR,parsePattern:oR,valueCallback:e=>parseInt(e,10)}),era:Ni({matchPatterns:lR,defaultMatchWidth:"wide",parsePatterns:cR,defaultParseWidth:"any"}),quarter:Ni({matchPatterns:uR,defaultMatchWidth:"wide",parsePatterns:dR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ni({matchPatterns:hR,defaultMatchWidth:"wide",parsePatterns:fR,defaultParseWidth:"any"}),day:Ni({matchPatterns:mR,defaultMatchWidth:"wide",parsePatterns:pR,defaultParseWidth:"any"}),dayPeriod:Ni({matchPatterns:gR,defaultMatchWidth:"any",parsePatterns:xR,defaultParseWidth:"any"})},yR={code:"en-US",formatDistance:V4,formatLong:H4,formatRelative:K4,localize:sR,match:vR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bR(e,t,s){const n=A4(),r=(s==null?void 0:s.locale)??n.locale??yR,a=2520,o=Jo(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o});let c,u;o>0?(c=Xe(t),u=Xe(e)):(c=Xe(e),u=Xe(t));const d=U4(u,c),h=(ox(u)-ox(c))/1e3,f=Math.round((d-h)/60);let g;if(f<2)return s!=null&&s.includeSeconds?d<5?r.formatDistance("lessThanXSeconds",5,l):d<10?r.formatDistance("lessThanXSeconds",10,l):d<20?r.formatDistance("lessThanXSeconds",20,l):d<40?r.formatDistance("halfAMinute",0,l):d<60?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",1,l):f===0?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",f,l);if(f<45)return r.formatDistance("xMinutes",f,l);if(f<90)return r.formatDistance("aboutXHours",1,l);if(f<ax){const v=Math.round(f/60);return r.formatDistance("aboutXHours",v,l)}else{if(f<a)return r.formatDistance("xDays",1,l);if(f<_o){const v=Math.round(f/ax);return r.formatDistance("xDays",v,l)}else if(f<_o*2)return g=Math.round(f/_o),r.formatDistance("aboutXMonths",g,l)}if(g=F4(u,c),g<12){const v=Math.round(f/_o);return r.formatDistance("xMonths",v,l)}else{const v=g%12,y=Math.trunc(g/12);return v<3?r.formatDistance("aboutXYears",y,l):v<9?r.formatDistance("overXYears",y,l):r.formatDistance("almostXYears",y+1,l)}}function wR(e,t){return bR(e,R4(e),t)}const pw=()=>{const[e,t]=m.useState(!1),s=m.useRef(null),{notifications:n,unreadCount:r,markAsRead:a,markAllAsRead:o}=mw(),l=Ke();m.useEffect(()=>{const d=h=>{s.current&&!s.current.contains(h.target)&&t(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=async d=>{switch(d.read||await a(d.id),d.type){case"validation_request":l("/dashboard/supervisor/validation-requests"),setTimeout(()=>{const h=document.getElementById("validation-requests");h&&(h.scrollIntoView({behavior:"smooth"}),h.classList.add("highlight"),setTimeout(()=>h.classList.remove("highlight"),2e3))},100);break;case"request":l("/dashboard/supervisor/team");break;case"score":l("/dashboard/eit/skills");break;case"approval":l("/dashboard/eit/skills");break;case"sao_feedback":l("/dashboard/supervisor/sao-feedback");break}t(!1)},u=d=>{switch(d){case"request":return"";case"score":return"";case"approval":return"";case"validation_request":return"";case"sao_feedback":return"";case"nudge":return"";default:return""}};return i.jsxs("div",{className:"relative",ref:s,children:[i.jsxs("button",{className:"p-2 rounded-lg text-slate-500 hover:bg-slate-100 relative",onClick:()=>t(!e),"aria-label":"Notifications",children:[i.jsx(_a,{size:20}),r>0&&i.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e&&i.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-slate-200 z-50",children:[i.jsxs("div",{className:"p-3 border-b border-slate-200 flex justify-between items-center",children:[i.jsx("h3",{className:"font-semibold text-slate-800",children:"Notifications"}),r>0&&i.jsx("button",{onClick:()=>o(),className:"text-sm text-teal-600 hover:text-teal-700",children:"Mark all as read"})]}),i.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length>0?n.map(d=>i.jsx("div",{className:`p-3 border-b border-slate-100 hover:bg-slate-50 cursor-pointer ${d.read?"":"bg-slate-50"}`,onClick:()=>c(d),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-xl",children:u(d.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-slate-800",children:d.title}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:d.message}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:wR(new Date(d.created_at),{addSuffix:!0})})]}),!d.read&&i.jsx("span",{className:"w-2 h-2 bg-teal-500 rounded-full mt-2"})]})},d.id)):i.jsx("div",{className:"p-4 text-center text-slate-500",children:"No notifications"})})]})]})},jR=({onMenuClick:e})=>i.jsxs("header",{className:"fixed top-0 right-0 left-0 md:left-64 bg-white/80 backdrop-blur-md z-10 border-b border-slate-200 px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:e,className:"p-2 rounded-lg text-slate-500 hover:bg-slate-100 md:hidden","aria-label":"Menu",children:i.jsx(Xb,{size:24})}),i.jsx("div",{className:"ml-2 md:ml-0",children:i.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"EIT Progress"})})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"hidden md:block",children:i.jsx(hw,{})}),i.jsx(pw,{}),i.jsx(fw,{})]})]}),SR=()=>{const e=[{name:"Home",path:"/dashboard",icon:i.jsx(ac,{size:20})},{name:"Skills",path:"/dashboard/skills",icon:i.jsx(WP,{size:20})},{name:"Documents",path:"/dashboard/documents",icon:i.jsx(Ds,{size:20})},{name:"Essays",path:"/dashboard/essays",icon:i.jsx(Qb,{size:20})},{name:"Help",path:"/dashboard/help",icon:i.jsx(Gr,{size:20})}];return i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 p-2 z-10",children:i.jsx("ul",{className:"flex justify-around",children:e.map(t=>i.jsx("li",{children:i.jsxs(xa,{to:t.path,className:({isActive:s})=>`flex flex-col items-center p-2 rounded-lg transition-colors ${s?"text-teal-600":"text-slate-500 hover:text-teal-600"}`,children:[i.jsx("span",{children:t.icon}),i.jsx("span",{className:"text-xs mt-1",children:t.name})]})},t.name))})})},kR=()=>{const[e,t]=m.useState(!1),[s,n]=m.useState(!0),r=m.useRef(0);m.useEffect(()=>{const l=()=>{const c=window.pageYOffset;c>r.current&&(r.current=c),c>300?(t(!0),n(!1)):c===0?(t(!0),n(!0)):(t(!1),n(!1))};return window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)}},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},o=()=>{window.scrollTo({top:r.current,behavior:"smooth"})};return i.jsx("div",{className:`fixed bottom-20 md:bottom-6 right-6 transition-all duration-300 z-50 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:i.jsx("button",{onClick:s?o:a,className:`p-3 text-white rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 active:scale-95 ${s?"bg-slate-600 hover:bg-slate-700":"bg-teal-600 hover:bg-teal-700"}`,"aria-label":s?"Scroll to last position":"Scroll to top",children:s?i.jsx(OP,{size:20}):i.jsx(LP,{size:20})})})},Eo=[{name:"Category 1  Technical Competence",skills:[{id:"temp-1",name:"1.1 Regulations, Codes & Standards",status:"not-started",rank:void 0},{id:"temp-2",name:"1.2 Technical & Design Constraints",status:"not-started",rank:void 0},{id:"temp-3",name:"1.3 Risk Management for Technical Work",status:"not-started",rank:void 0},{id:"temp-4",name:"1.4 Application of Theory",status:"not-started",rank:void 0},{id:"temp-5",name:"1.5 Solution Techniques  Results Verification",status:"not-started",rank:void 0},{id:"temp-6",name:"1.6 Safety in Design & Technical Work",status:"not-started",rank:void 0},{id:"temp-7",name:"1.7 Systems & Their Components",status:"not-started",rank:void 0},{id:"temp-8",name:"1.8 Project or Asset Life-Cycle Awareness",status:"not-started",rank:void 0},{id:"temp-9",name:"1.9 Quality Assurance",status:"not-started",rank:void 0},{id:"temp-10",name:"1.10 Engineering Documentation",status:"not-started",rank:void 0}]},{name:"Category 2  Communication",skills:[{id:"temp-11",name:"2.1 Oral Communication (English)",status:"not-started",rank:void 0},{id:"temp-12",name:"2.2 Written Communication (English)",status:"not-started",rank:void 0},{id:"temp-13",name:"2.3 Reading & Comprehension (English)",status:"not-started",rank:void 0}]},{name:"Category 3  Project & Financial Management",skills:[{id:"temp-14",name:"3.1 Project Management Principles",status:"not-started",rank:void 0},{id:"temp-15",name:"3.2 Finances & Budget",status:"not-started",rank:void 0}]},{name:"Category 4  Team Effectiveness",skills:[{id:"temp-16",name:"4.1 Promote Team Effectiveness & Resolve Conflict",status:"not-started",rank:void 0}]},{name:"Category 5  Professional Accountability",skills:[{id:"temp-17",name:"5.1 Professional Accountability (Ethics, Liability, Limits)",status:"not-started",rank:void 0}]},{name:"Category 6  Social, Economic, Environmental & Sustainability",skills:[{id:"temp-18",name:"6.1 Protection of the Public Interest",status:"not-started",rank:void 0},{id:"temp-19",name:"6.2 Benefits of Engineering to the Public",status:"not-started",rank:void 0},{id:"temp-20",name:"6.3 Role of Regulatory Bodies",status:"not-started",rank:void 0},{id:"temp-21",name:"6.4 Application of Sustainability Principles",status:"not-started",rank:void 0},{id:"temp-22",name:"6.5 Promotion of Sustainability",status:"not-started",rank:void 0}]}],Ps=Bt((e,t)=>({skillCategories:Eo,loading:!1,error:null,skills:[],lastFetched:null,clearState:()=>e({skillCategories:Eo,loading:!1,error:null,skills:[],lastFetched:null}),setSkillCategories:s=>e({skillCategories:s}),loadUserSkills:async(s=!1)=>{var a;const n=Date.now(),r=t().lastFetched;if(!(!s&&r&&n-r<5*60*1e3)){e({loading:!0,error:null});try{console.log("Starting loadUserSkills...");const{data:{user:o}}=await k.auth.getUser();if(!o)throw console.error("No authenticated user found"),new Error("No authenticated user found");console.log("User authenticated:",o.id),await k.from("eit_profiles").upsert({id:o.id,full_name:((a=o.user_metadata)==null?void 0:a.full_name)||"",email:o.email||""});const[l,c]=await Promise.all([k.from("skills").select("id, name, category"),k.from("eit_skills").select("id, eit_id, skill_id, category_name, skill_name, rank, status").eq("eit_id",o.id)]),u=l.data||[];let d=c.data||[];if(console.log("Skills fetched from DB:",u.length),console.log("Existing user skills:",d.length),!d||d.length===0){console.log("No existing skills found, initializing for new user...");const f=Eo.flatMap(w=>w.skills.map(p=>{const x=u.find(b=>b.name===p.name&&b.category===w.name);return x?{eit_id:o.id,skill_id:x.id,category_name:w.name,skill_name:p.name,rank:null,status:"not-started"}:(console.warn(`No matching DB skill found for: ${p.name} in ${w.name}`),null)}).filter(Boolean));console.log("Initializing skills:",f.length);const{error:g}=await k.from("eit_skills").insert(f);if(g)throw console.error("Error initializing user skills:",g),g;console.log("Fetching newly initialized skills...");const{data:v,error:y}=await k.from("eit_skills").select("id, eit_id, skill_id, category_name, skill_name, rank, status").eq("eit_id",o.id);if(y)throw console.error("Error fetching newly initialized skills:",y),y;d=v,console.log("New skills fetched:",d==null?void 0:d.length)}console.log("Updating store with user skills...");const h=Eo.map(f=>({...f,skills:f.skills.map(g=>{const v=u.find(w=>w.name===g.name&&w.category===f.name);if(!v)throw new Error(`No matching DB skill found for: ${g.name} in ${f.name}`);const y=d==null?void 0:d.find(w=>w.skill_id===v.id);return{...g,id:v.id,category_name:v.category,rank:(y==null?void 0:y.rank)||void 0,status:(y==null?void 0:y.status)||"not-started"}})}));console.log("Setting updated categories in store:",h.length),e({skillCategories:h,skills:h.flatMap(f=>f.skills),lastFetched:n})}catch(o){throw console.error("Error in loadUserSkills:",{error:o,message:o.message,details:o.details,hint:o.hint}),e({error:`Failed to load skills: ${o.message||"Unknown error"}`}),o}finally{e({loading:!1})}}},updateSkillRank:async(s,n,r)=>{try{const{data:{user:a},error:o}=await k.auth.getUser();if(o)throw console.error("Auth error:",o),new Error("Authentication error: "+o.message);if(!a)throw console.error("No authenticated user found"),new Error("No authenticated user found");console.log("Updating skill rank:",{categoryIndex:s,skillId:n,rank:r,userId:a.id});const l=t().skillCategories[s],c=l.skills.find(h=>h.id===n);if(!c)throw console.error("Skill not found:",{categoryIndex:s,skillId:n}),new Error("Skill not found");e(h=>({skillCategories:h.skillCategories.map((f,g)=>g===s?{...f,skills:f.skills.map(v=>v.id===n?{...v,rank:r||void 0,status:r?"completed":"not-started"}:v)}:f)}));const u={eit_id:a.id,skill_id:n,category_name:c.category_name||l.name,skill_name:c.name,rank:r||null,status:r?"completed":"not-started"};console.log("Sending update to Supabase:",u);const{error:d}=await k.from("eit_skills").upsert(u,{onConflict:"eit_id,skill_id"});if(d)throw console.error("Supabase error:",{error:d,message:d.message,details:d.details,hint:d.hint,code:d.code}),await t().loadUserSkills(),d;console.log("Successfully updated skill rank")}catch(a){console.error("Error updating skill rank:",{error:a,message:a.message,details:a.details,hint:a.hint,code:a.code}),e({error:`Failed to update skill rank: ${a.message||"Unknown error"}`})}},consoleLogSkillCategories:()=>{console.log("Skill categories in store:",t().skillCategories)}})),Ca=Bt((e,t)=>({overallProgress:0,completedSkills:0,totalSkills:22,documentedExperiences:0,totalExperiences:24,supervisorApprovals:0,totalApprovals:24,lastUpdated:new Date().toISOString(),loading:!1,initialized:!1,lastFetched:null,clearState:()=>e({overallProgress:0,completedSkills:0,documentedExperiences:0,supervisorApprovals:0,lastUpdated:new Date().toISOString(),loading:!1,initialized:!1,lastFetched:null}),setupRealtimeSubscriptions:async()=>{const{data:{user:s}}=await k.auth.getUser();if(!s)return;const n=k.channel("experiences-changes").on("postgres_changes",{event:"*",schema:"public",table:"experiences",filter:`eit_id=eq.${s.id}`},()=>{console.log(" Experience change detected, updating progress..."),t().updateProgress()}).subscribe(),r=k.channel("skills-changes").on("postgres_changes",{event:"*",schema:"public",table:"skills",filter:`eit_id=eq.${s.id}`},()=>{console.log(" Skill change detected, updating progress..."),t().updateProgress()}).subscribe(),a=()=>{n.unsubscribe(),r.unsubscribe()};window.addEventListener("unload",a)},initialize:async(s=!1)=>{if(t().loading)return;const n=Date.now(),r=t().lastFetched;if(!(!s&&r&&n-r<5*60*1e3)){e({loading:!0});try{const{data:{user:a}}=await k.auth.getUser();if(!a)throw new Error("No user found");const o=Ps.getState();o.skillCategories.length===0&&await o.loadUserSkills(),await new Promise(w=>setTimeout(w,100));const l=o.skillCategories.reduce((w,p)=>w+p.skills.filter(x=>x.rank!==void 0).length,0),{data:c,error:u}=await k.from("experiences").select("*").eq("eit_id",a.id);if(u)throw u;const{data:d,error:h}=await k.from("experiences").select("*").eq("eit_id",a.id).eq("supervisor_approved",!0);if(h)throw h;const f=l/22,g=((c==null?void 0:c.length)||0)/24,v=((d==null?void 0:d.length)||0)/24,y=Math.round((f+g+v)/3*100);console.log("Progress calculation:",{completedSkills:l,skillsProgress:f,experiencesProgress:g,approvalsProgress:v,overallProgress:y}),e({overallProgress:y,completedSkills:l,documentedExperiences:(c==null?void 0:c.length)||0,supervisorApprovals:(d==null?void 0:d.length)||0,lastUpdated:new Date().toISOString(),loading:!1,initialized:!0,lastFetched:n}),await t().setupRealtimeSubscriptions()}catch(a){console.error("Error initializing progress:",a),e({loading:!1,initialized:!1})}}},updateProgress:async(s=!1)=>{if(t().loading)return;const n=Date.now(),r=t().lastFetched;if(!(!s&&r&&n-r<5*60*1e3)){e({loading:!0});try{const{data:{user:a}}=await k.auth.getUser();if(!a)throw new Error("No user found");const o=Ps.getState();o.skillCategories.length===0&&await o.loadUserSkills(),await new Promise(w=>setTimeout(w,100));const l=o.skillCategories.reduce((w,p)=>w+p.skills.filter(x=>x.rank!==void 0).length,0),{data:c,error:u}=await k.from("experiences").select("*").eq("eit_id",a.id);if(u)throw u;const{data:d,error:h}=await k.from("experiences").select("*").eq("eit_id",a.id).eq("supervisor_approved",!0);if(h)throw h;const f=l/22,g=((c==null?void 0:c.length)||0)/24,v=((d==null?void 0:d.length)||0)/24,y=Math.round((f+g+v)/3*100);console.log("Progress update calculation:",{completedSkills:l,skillsProgress:f,experiencesProgress:g,approvalsProgress:v,overallProgress:y}),e({overallProgress:y,completedSkills:l,documentedExperiences:(c==null?void 0:c.length)||0,supervisorApprovals:(d==null?void 0:d.length)||0,lastUpdated:new Date().toISOString(),loading:!1,lastFetched:n})}catch(a){console.error("Error updating progress:",a),e({loading:!1})}}}})),NR=[{name:"Dashboard",path:"/dashboard",icon:i.jsx(ac,{size:20})},{name:"Skills",path:"/dashboard/skills",icon:i.jsx(oi,{size:20})},{name:"SAOs",path:"/dashboard/saos",icon:i.jsx(Of,{size:20})},{name:"Documents",path:"/dashboard/documents",icon:i.jsx(Ds,{size:20})},{name:"Jobs",path:"/dashboard/references",icon:i.jsx(Jb,{size:20})},{name:"Settings",path:"/dashboard/settings",icon:i.jsx(Ff,{size:20})}],_R=[{name:"Help & Support",path:"/dashboard/help",icon:i.jsx(Gr,{size:20})}],ER=({onClose:e})=>{const{overallProgress:t,loading:s}=Ca(),n=Os(),r=async()=>{await k.auth.signOut()},a=o=>o==="/dashboard"?n.pathname==="/dashboard":n.pathname.startsWith(o);return i.jsxs("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white flex flex-col",children:[i.jsx("div",{className:"p-4 border-b border-slate-800 flex items-center justify-center",children:i.jsx("img",{src:nr,alt:"Accreda Logo",className:"h-28 w-auto"})}),i.jsxs("nav",{className:"flex-1 py-6",children:[i.jsx("ul",{className:"space-y-1 px-3",children:NR.map(o=>i.jsx("li",{children:i.jsxs(xa,{to:o.path,className:({isActive:l})=>`flex items-center px-3 py-2.5 rounded-lg transition-colors ${a(o.path)?"bg-teal-600 text-white":"text-slate-300 hover:text-white hover:bg-slate-800"}`,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),e==null||e()},children:[i.jsx("span",{className:"mr-3",children:o.icon}),i.jsx("span",{children:o.name})]})},o.name))}),i.jsxs("div",{className:"mt-10 px-4",children:[i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-2 px-3",children:"Support"}),i.jsxs("ul",{className:"space-y-1 px-3",children:[_R.map(o=>i.jsx("li",{children:i.jsxs(xa,{to:o.path,className:({isActive:l})=>`flex items-center px-3 py-2.5 rounded-lg transition-colors ${a(o.path)?"bg-slate-800 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"}`,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),e==null||e()},children:[i.jsx("span",{className:"mr-3",children:o.icon}),i.jsx("span",{children:o.name})]})},o.name)),i.jsx("li",{children:i.jsxs("button",{onClick:r,className:"flex items-center px-3 py-2.5 rounded-lg transition-colors w-full text-slate-400 hover:text-white hover:bg-slate-800",children:[i.jsx(Df,{size:20,className:"mr-3"}),i.jsx("span",{children:"Sign Out"})]})})]})]})]}),i.jsxs("div",{className:"p-4 border-t border-slate-800 sticky bottom-0 bg-slate-900",children:[i.jsxs("div",{className:"mb-2 flex justify-between items-center",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Program Progress"}),i.jsx("span",{className:"text-sm font-semibold text-teal-400",children:s?i.jsx("span",{className:"animate-pulse",children:"..."}):`${t}%`})]}),i.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-teal-500 rounded-full transition-all duration-300",style:{width:s?"0%":`${t}%`}})})]})]})},CR=[{to:"/dashboard/supervisor",label:"Dashboard",icon:i.jsx(ac,{size:20})},{to:"/dashboard/supervisor/skills",label:"Skills",icon:i.jsx(oi,{size:20})},{to:"/dashboard/supervisor/team",label:"Team",icon:i.jsx(Va,{size:20})},{to:"/dashboard/supervisor/reviews",label:"Reviews",icon:i.jsx(qP,{size:20})},{to:"/dashboard/supervisor/documents",label:"Documents",icon:i.jsx(Ds,{size:20})},{to:"/dashboard/supervisor/settings",label:"Settings",icon:i.jsx(Ff,{size:20})}],TR=[{to:"/dashboard/supervisor/support",label:"Help & Support",icon:i.jsx(Gr,{size:20})}],Vd=({onClose:e})=>{const t=Ke(),[s,n]=m.useState(0),[r,a]=m.useState(0);m.useEffect(()=>{(async()=>{const{data:{user:c}}=await k.auth.getUser();if(!c)return;const{count:u}=await k.from("sao_feedback").select("*",{count:"exact",head:!0}).eq("supervisor_id",c.id).eq("status","pending");n(u||0);const{count:d}=await k.from("validators").select("*",{count:"exact",head:!0}).eq("email",c.email).eq("status","pending");a(d||0)})()},[]);const o=async()=>{await k.auth.signOut(),t("/login")};return i.jsxs("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white flex flex-col",children:[i.jsx("div",{className:"p-4 border-b border-slate-800 flex items-center justify-center",children:i.jsx("img",{src:nr,alt:"Accreda Logo",className:"h-28 w-auto"})}),i.jsxs("nav",{className:"flex-1 py-6",children:[i.jsx("ul",{className:"space-y-1 px-3",children:CR.map(l=>i.jsx("li",{className:"relative",children:i.jsxs(xa,{to:l.to,className:({isActive:c})=>`flex items-center px-3 py-2.5 rounded-lg transition-colors font-medium ${c?"bg-teal-600 text-white":"text-slate-300 hover:text-white hover:bg-slate-800"}`,end:l.to==="/dashboard/supervisor",onClick:e,children:[i.jsx("span",{className:"mr-3",children:l.icon}),i.jsx("span",{children:l.label}),l.label==="Reviews"&&s>0&&i.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"}),l.label==="Skills"&&r>0&&i.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]})},l.to))}),i.jsxs("div",{className:"mt-10 px-4",children:[i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-2 px-3",children:"Help & Support"}),i.jsxs("ul",{className:"space-y-1 px-3",children:[TR.map(l=>i.jsx("li",{children:i.jsxs(xa,{to:l.to,className:({isActive:c})=>`flex items-center px-3 py-2.5 rounded-lg transition-colors font-medium ${c?"bg-slate-800 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"}`,onClick:e,children:[i.jsx("span",{className:"mr-3",children:l.icon}),i.jsx("span",{children:l.label})]})},l.to)),i.jsx("li",{children:i.jsxs("button",{onClick:()=>{o(),e==null||e()},className:"flex items-center px-3 py-2.5 rounded-lg transition-colors w-full text-slate-400 hover:text-white hover:bg-slate-800",children:[i.jsx(Df,{size:20,className:"mr-3"}),i.jsx("span",{children:"Sign Out"})]})})]})]})]})]})},PR=()=>i.jsxs("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white flex flex-col animate-pulse [animation-duration:2s]",children:[i.jsx("div",{className:"p-4 border-b border-slate-800 flex items-center justify-center",children:i.jsx("img",{src:nr,alt:"Accreda Logo",className:"h-28 w-auto"})}),i.jsx("div",{className:"flex-1 py-6 space-y-4 px-6",children:[...Array(6)].map((e,t)=>i.jsx("div",{className:"h-8 bg-slate-800/80 rounded-lg"},t))}),i.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900",children:[i.jsx("div",{className:"h-4 bg-slate-800/80 rounded w-1/2 mb-2"}),i.jsx("div",{className:"h-2 bg-slate-800/80 rounded w-full"})]})]}),lx=({onClose:e})=>{const[t,s]=m.useState(null),[n,r]=m.useState(!0);return m.useEffect(()=>{(async()=>{r(!0);const{data:{user:o}}=await k.auth.getUser();if(o){const{data:l}=await k.from("eit_profiles").select("id").eq("id",o.id).single(),{data:c}=await k.from("supervisor_profiles").select("id").eq("id",o.id).single();s(c?"supervisor":l?"eit":null)}r(!1)})()},[]),n?i.jsx(PR,{}):t==="supervisor"?i.jsx(Vd,{onClose:e}):i.jsx(ER,{onClose:e})},AR=({appLoaded:e})=>{const[t,s]=m.useState(!1);return i.jsxs("div",{className:"min-h-screen bg-[#F5F7FA]",children:[i.jsx("div",{className:"hidden md:block",children:i.jsx(lx,{})}),t&&i.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[i.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>s(!1)}),i.jsx("div",{className:"fixed inset-y-0 left-0 w-full max-w-xs bg-white shadow-xl",children:i.jsx(lx,{onClose:()=>s(!1)})})]}),i.jsxs("div",{className:"md:pl-64 flex flex-col min-h-screen",children:[i.jsx(jR,{onMenuClick:()=>s(!0)}),i.jsx("main",{className:"flex-1 p-4 md:p-6 pt-20 md:pt-24 pb-20 md:pb-6",children:i.jsx(zv,{context:{appLoaded:e}})}),i.jsx("div",{className:"md:hidden",children:i.jsx(SR,{})}),i.jsx(kR,{})]})]})},gw="https://openrouter.ai/api/v1/chat/completions",xw="https://accreda.com",vw="Accreda",yw="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",RR=async e=>{var r,a,o;const t=`You are an expert in writing professional Situation-Action-Outcome (SAO) statements. Please enhance the following SAO statement following these specific guidelines:

1. Structure:
   - Situation: Clearly describe the context, challenge, or problem faced
   - Action: Detail the specific steps taken, emphasizing your personal involvement
   - Outcome: Quantify results and highlight the impact of your actions

2. Best Practices:
   - Use active voice and strong action verbs
   - Include specific metrics and numbers where possible
   - Focus on your personal contributions and leadership
   - Highlight problem-solving and decision-making skills
   - Maintain a professional and confident tone
   - Keep the statement concise but impactful

3. Key Elements to Include:
   - Clear problem statement
   - Specific actions taken
   - Measurable results
   - Skills demonstrated
   - Impact on the organization/team

Please enhance the following SAO statement while maintaining its core message and following these guidelines:

${e}

Format the response as a clear SAO statement with Situation, Action, and Outcome sections clearly separated.`,s=await fetch(gw,{method:"POST",headers:{Authorization:`Bearer ${yw}`,"HTTP-Referer":xw,"X-Title":vw,"Content-Type":"application/json"},body:JSON.stringify({model:"meta-llama/llama-3.1-8b-instruct:free",messages:[{role:"user",content:t}]})});if(!s.ok){const l=await s.text();throw new Error(`OpenRouter API error: ${s.status} - ${l}`)}return((o=(a=(r=(await s.json()).choices)==null?void 0:r[0])==null?void 0:a.message)==null?void 0:o.content)||""},IR=async e=>{var r,a,o;const t=`You are an expert in improving the clarity and grammar of professional writing. Please enhance the following text by:

1. Fixing any grammatical errors
2. Improving sentence structure and flow
3. Enhancing clarity while maintaining the original meaning
4. Using more precise and professional language
5. Maintaining the original tone and style
6. Preserving all specific details, numbers, and technical terms

Please provide the enhanced version with clear markdown formatting to show the changes:

${e}

Format the response as a markdown diff, showing the original text with strikethrough and the improved text in bold.`,s=await fetch(gw,{method:"POST",headers:{Authorization:`Bearer ${yw}`,"HTTP-Referer":xw,"X-Title":vw,"Content-Type":"application/json"},body:JSON.stringify({model:"meta-llama/llama-3.1-8b-instruct:free",messages:[{role:"user",content:t}]})});if(!s.ok){const l=await s.text();throw new Error(`OpenRouter API error: ${s.status} - ${l}`)}return((o=(a=(r=(await s.json()).choices)==null?void 0:r[0])==null?void 0:a.message)==null?void 0:o.content)||""},Uf=({feedback:e,onResolve:t,onSubmitFeedback:s,isSupervisor:n,saoContent:r})=>{const[a,o]=m.useState(""),[l,c]=m.useState(!1),[u,d]=m.useState(0),[h,f]=m.useState(!1),[g,v]=m.useState(null);m.useEffect(()=>{(async()=>{if(e.length>0){const{count:N}=await k.from("sao_annotation").select("id",{count:"exact",head:!0}).eq("sao_id",e[0].sao_id);d(N||0)}})()},[e]);const y=async j=>{if(j.preventDefault(),!(!a.trim()&&u===0)){c(!0);try{await s(e[0].sao_id,a),o("")}catch(N){console.error("Error submitting feedback:",N)}finally{c(!1)}}},w=async()=>{if(r){f(!0);try{const j=await IR(r);v(j)}catch(j){console.error("Error in handleEnhanceClarity:",j),alert(j instanceof Error?j.message:"Failed to enhance text. Please try again.")}finally{f(!1)}}},p=()=>{g&&(o(j=>{const N=g.replace(/~~(.*?)~~/g,"").replace(/\*\*(.*?)\*\*/g,"$1");return j?`${j}

Enhanced Version:
${N}`:`Enhanced Version:
${N}`}),v(null))},x=()=>{v(null)},b=j=>{switch(j){case"pending":return i.jsx(Xn,{className:"text-yellow-500",size:16});case"submitted":return i.jsx(mn,{className:"text-green-500",size:16});case"resolved":return i.jsx(sw,{className:"text-slate-400",size:16});default:return null}},S=j=>{switch(j){case"pending":return"Pending Review";case"submitted":return"Feedback Submitted";case"resolved":return"Resolved";default:return j}};return i.jsxs("div",{className:"mt-6 border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Supervisor Feedback"}),e.length>0?i.jsx("div",{className:"space-y-4",children:e.map(j=>i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[b(j.status),i.jsx("span",{className:"text-sm font-medium text-slate-700",children:S(j.status)})]}),n&&j.status==="submitted"&&!1]}),j.feedback&&i.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:j.feedback}),i.jsx("div",{className:"mt-2 text-xs text-slate-500",children:new Date(j.updated_at).toLocaleDateString()})]},j.id))}):i.jsx("p",{className:"text-slate-500 italic",children:"No feedback yet."}),n&&e.length>0&&e[0].status==="pending"&&i.jsxs("form",{onSubmit:y,className:"mt-4",children:[r&&i.jsx("div",{className:"mb-4",children:i.jsxs("button",{type:"button",onClick:w,disabled:!r||l||h,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded-md transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Zb,{size:16,className:h?"animate-pulse":""}),h?"Enhancing...":"Enhance Clarity"]})}),g&&i.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[i.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:g}}),i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-md transition-all duration-300 hover:scale-105 active:scale-95",children:"Accept Changes"}),i.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-md transition-all duration-300 hover:scale-105 active:scale-95",children:"Decline"})]})]}),i.jsx("textarea",{value:a,onChange:j=>o(j.target.value),placeholder:"Enter your feedback...",className:"w-full px-4 py-3 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",rows:4,disabled:l}),i.jsx("div",{className:"mt-2 flex justify-end",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l||!a.trim()&&u===0,children:l?"Submitting...":"Submit Feedback"})})]})]})},OR=({isOpen:e,onClose:t,skillName:s,saos:n,jobs:r})=>{const a=Ke();if(!e)return null;const o=c=>{a(`/saos?saoId=${c}`),t()},l=c=>{a(`/references?jobId=${c}`),t()};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Linked Items for ",s]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-slate-900 mb-3",children:"Linked SAOs"}),i.jsx("div",{className:"space-y-4",children:n.length>0?n.map(c=>i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-slate-50",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-slate-900",children:c.title}),c.feedback&&c.feedback.length>0&&i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Xn,{size:14,className:"text-blue-500"}),i.jsx("span",{className:"text-xs text-blue-600",children:c.feedback.some(u=>u.status==="pending")?"Feedback Pending":"Has Feedback"})]})]}),i.jsx("button",{onClick:()=>o(c.id),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Open SAO",children:i.jsx(If,{size:18})})]}),i.jsx("p",{className:"text-sm text-slate-600",children:c.content}),c.feedback&&c.feedback.length>0&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:i.jsx(Uf,{feedback:c.feedback,onResolve:async()=>Promise.resolve(),onSubmitFeedback:async()=>Promise.resolve(),isSupervisor:!1})}),i.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Created: ",new Date(c.created_at).toLocaleDateString()]})]},c.id)):i.jsx("p",{className:"text-slate-500 italic",children:"No SAOs linked to this skill yet."})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-slate-900 mb-3",children:"Linked Jobs"}),i.jsx("div",{className:"space-y-4",children:r.length>0?r.map(c=>i.jsxs("div",{className:"border rounded-lg p-4 hover:bg-slate-50",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-slate-900",children:c.title}),i.jsx("p",{className:"text-sm text-slate-600",children:c.company})]}),i.jsx("button",{onClick:()=>l(c.id),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Open Job",children:i.jsx(Gi,{size:18})})]}),i.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[new Date(c.start_date).toLocaleDateString()," - ",c.end_date?new Date(c.end_date).toLocaleDateString():"Present"]})]},c.id)):i.jsx("p",{className:"text-slate-500 italic",children:"No jobs linked to this skill yet."})})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:t,className:"btn btn-primary",children:"Close"})})]})})},DR=m.memo(({skill:e,categoryIndex:t,onRankChange:s,getStatusIcon:n,getStatusLabel:r,getStatusClass:a,getRankColor:o,getRankLabel:l,skillRef:c,linkedSkillIds:u,fetchLinkedItems:d})=>{const[h,f]=m.useState(!1),[g,v]=m.useState([]),[y,w]=m.useState([]),[p,x]=m.useState(!1),b=u.has(e.id),S=async()=>{x(!0);try{const{saos:j,jobs:N}=await d(e.id);v(j),w(N),f(!0)}catch(j){console.error("Error fetching linked items:",j)}finally{x(!1)}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{ref:c,className:"flex items-center justify-between p-3 rounded-lg border hover:border-slate-300 hover:bg-slate-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-3",children:n(e)}),i.jsx("span",{className:"font-medium",children:e.name})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:S,className:`p-2 rounded-full transition-colors ${b?"text-amber-500 hover:text-amber-600 hover:bg-amber-50 shadow-[0_0_8px_rgba(245,158,11,0.5)]":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,title:b?"View linked items":"No linked items",disabled:p,children:i.jsx(Ds,{size:18,className:p?"animate-pulse":""})}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:e.rank||"",onChange:j=>{s(t,e.id,Number(j.target.value))},className:`appearance-none px-3 py-1.5 rounded-full text-sm font-medium ${o(e.rank)} border-0 focus:ring-2 focus:ring-teal-500 focus:outline-none cursor-pointer`,children:[i.jsx("option",{value:"",children:"Not Ranked"}),[1,2,3,4,5].map(j=>i.jsxs("option",{value:j,children:[j," - ",l(j)]},j))]}),i.jsx(za,{size:16,className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-current"})]}),i.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${a(e)}`,children:r(e)})]})]}),i.jsx(OR,{isOpen:h,onClose:()=>f(!1),skillName:e.name,saos:g,jobs:y})]})}),LR=m.memo(({category:e,categoryIndex:t,onRankChange:s,getStatusIcon:n,getStatusLabel:r,getStatusClass:a,getRankColor:o,getRankLabel:l,getCategoryProgress:c,calculateCategoryMean:u,getMeanColor:d,showRequirementWarning:h,getRequirementMessage:f,skillRefs:g,linkedSkillIds:v,fetchLinkedItems:y})=>{const w=c(e.skills),{mean:p,isComplete:x}=u(e.skills);return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h2",{className:"text-lg font-semibold",children:e.name}),x&&i.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full ${d(p)}`,children:[i.jsx(ic,{size:16}),i.jsxs("span",{className:"text-sm font-medium",children:["Mean Score: ",p]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-green-100 text-green-700 mr-2",children:i.jsx("span",{className:"text-sm font-bold",children:w.completed})}),i.jsx("div",{children:i.jsx("p",{className:"text-xs font-medium",children:"Completed"})})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-slate-100 text-slate-700 mr-2",children:i.jsx("span",{className:"text-sm font-bold",children:w.notStarted})}),i.jsx("div",{children:i.jsx("p",{className:"text-xs font-medium",children:"Not Started"})})]})]})]}),x&&h(e.name,p)&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Af,{size:18,className:"text-red-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Warning: This category does not meet the minimum requirements"}),i.jsx("p",{className:"text-sm text-red-600 mt-1",children:f(e.name,p)})]})]})}),i.jsx("div",{className:"space-y-3",children:e.skills.map(b=>i.jsx(DR,{skill:b,categoryIndex:t,onRankChange:s,getStatusIcon:n,getStatusLabel:r,getStatusClass:a,getRankColor:o,getRankLabel:l,skillRef:S=>g.current[b.id]=S,linkedSkillIds:v,fetchLinkedItems:y},b.id))})]})}),MR=()=>{const{skillCategories:e,updateSkillRank:t,loadUserSkills:s,loading:n,error:r}=Ps(),a=m.useRef({}),[o,l]=m.useState(new Set),c=m.useRef({});m.useEffect(()=>{s()},[s]),m.useEffect(()=>{(async()=>{try{const{data:{user:C}}=await k.auth.getUser();if(!C)return;const[{data:I},{data:M}]=await Promise.all([k.from("saos").select("*, sao_skills(skill_id)").eq("eit_id",C.id),k.from("jobs").select("id, skills").eq("eit_id",C.id)]),V=I||[],Z=M||[],ie=new Set;V.forEach(re=>{re.sao_skills&&re.sao_skills.forEach(oe=>ie.add(oe.skill_id))}),Z.forEach(re=>{Array.isArray(re.skills)&&re.skills.forEach(oe=>ie.add(oe))}),l(ie)}catch(C){console.error("Error fetching all linked items:",C)}})()},[s]);const u=async _=>{if(c.current[_])return c.current[_];const{data:{user:C}}=await k.auth.getUser();if(!C)return{saos:[],jobs:[]};const{data:I}=await k.from("saos").select("*, sao_skills!inner(skill_id)").eq("eit_id",C.id).eq("sao_skills.skill_id",_),M=I||[],{data:V}=await k.from("jobs").select("*").eq("eit_id",C.id).contains("skills",[_]),Z=V||[];return c.current[_]={saos:M,jobs:Z},{saos:M,jobs:Z}};m.useEffect(()=>{const _=C=>{const{skillId:I,timestamp:M}=C.detail;console.log("Scroll event received:",{skillId:I,timestamp:M}),setTimeout(()=>{const V=a.current[I];console.log("Looking for element:",{skillId:I,element:V}),V?(console.log("Scrolling to element"),V.scrollIntoView({behavior:"smooth",block:"center"}),V.classList.add("ring","ring-teal-400"),setTimeout(()=>V.classList.remove("ring","ring-teal-400"),1500)):(console.log("Element not found, retrying in 100ms"),setTimeout(()=>{const Z=a.current[I];Z&&(Z.scrollIntoView({behavior:"smooth",block:"center"}),Z.classList.add("ring","ring-teal-400"),setTimeout(()=>Z.classList.remove("ring","ring-teal-400"),1500))},100))},100)};return window.addEventListener("scroll-to-skill",_),()=>window.removeEventListener("scroll-to-skill",_)},[]);const d=m.useCallback(async(_,C,I)=>{try{console.log("Updating skill rank for skillId:",C,typeof C),await t(_,C,I)}catch(M){console.error("Error in handleRankChange:",M)}},[t]),h=m.useCallback(_=>_.reduce((C,I)=>(I.rank!==void 0?C.completed++:C.notStarted++,C),{completed:0,notStarted:0}),[]),f=m.useCallback(_=>{const C=_.filter(M=>M.rank!==void 0);if(C.length!==_.length)return{mean:0,isComplete:!1};const I=C.reduce((M,V)=>M+(V.rank||0),0);return{mean:Number((I/_.length).toFixed(1)),isComplete:!0}},[]),g=m.useCallback(_=>_>=4.5?"bg-green-100 text-green-700":_>=3.5?"bg-blue-100 text-blue-700":_>=2.5?"bg-yellow-100 text-yellow-700":_>=1.5?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700",[]),v=m.useCallback(_=>_.status==="completed"?i.jsx(mn,{size:18,className:"text-green-500"}):_.status==="in-progress"?i.jsx(QP,{size:18,className:"text-amber-500"}):_.rank!==void 0?i.jsx(zP,{size:18,className:"text-green-500"}):i.jsx(VP,{size:18,className:"text-slate-300"}),[]),y=m.useCallback(_=>_.rank!==void 0||_.status==="completed"?"Completed":_.status==="in-progress"?"In Progress":"Not Started",[]),w=m.useCallback(_=>_.rank!==void 0||_.status==="completed"?"bg-green-100 text-green-800":_.status==="in-progress"?"bg-amber-100 text-amber-800":"bg-slate-100 text-slate-800",[]),p=m.useCallback(_=>{if(!_)return"bg-slate-100 text-slate-600";switch(_){case 1:return"bg-red-100 text-red-600";case 2:return"bg-orange-100 text-orange-600";case 3:return"bg-yellow-100 text-yellow-600";case 4:return"bg-blue-100 text-blue-600";case 5:return"bg-green-100 text-green-600";default:return"bg-slate-100 text-slate-600"}},[]),x=m.useCallback(_=>{if(!_)return"Not Ranked";switch(_){case 1:return"Beginner";case 2:return"Basic";case 3:return"Intermediate";case 4:return"Advanced";case 5:return"Expert";default:return"Not Ranked"}},[]),b={"Category 1  Technical Competence":3,"Category 2  Communication":3,"Category 3  Project & Financial Management":2,"Category 4  Team Effectiveness":3,"Category 5  Professional Accountability":3,"Category 6  Social, Economic, Environmental & Sustainability":2},S=m.useCallback((_,C)=>{const I=b[_];return C<I},[]),j=m.useCallback((_,C)=>`A minimum average score of ${b[_]} is required for ${_}. Current average: ${C}`,[]),N=m.useMemo(()=>e.reduce((_,C)=>(C.skills.forEach(I=>{I.rank!==void 0?_.completed++:_.notStarted++}),_),{completed:0,notStarted:0}),[e]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:"Skills & Competencies"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Track and document your EIT program competencies"})]}),r&&i.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Af,{size:18,className:"text-red-600 mt-0.5 flex-shrink-0"}),i.jsx("p",{className:"text-sm text-red-800",children:r})]})}),n?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"card p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Overall Progress"}),i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-green-100 text-green-700 mr-3",children:i.jsx("span",{className:"text-lg font-bold",children:N.completed})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Completed"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Skills"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-slate-100 text-slate-700 mr-3",children:i.jsx("span",{className:"text-lg font-bold",children:N.notStarted})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Not Started"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Skills"})]})]})]})]}),i.jsx("div",{className:"space-y-6",children:e.map((_,C)=>i.jsx(LR,{category:_,categoryIndex:C,onRankChange:d,getStatusIcon:v,getStatusLabel:y,getStatusClass:w,getRankColor:p,getRankLabel:x,getCategoryProgress:h,calculateCategoryMean:f,getMeanColor:g,showRequirementWarning:S,getRequirementMessage:j,skillRefs:a,linkedSkillIds:o,fetchLinkedItems:u},_.name))})]})]})},$R=m.memo(MR),bw=Bt((e,t)=>({documents:[],loading:!1,error:null,lastFetched:null,clearState:()=>e({documents:[],loading:!1,error:null,lastFetched:null}),createDocument:async(s,n,r,a,o)=>{var l;e({loading:!0,error:null});try{const{data:{user:c},error:u}=await k.auth.getUser();if(u)throw console.error("Auth error:",u),new Error("Authentication error: "+u.message);if(!c)throw new Error("No authenticated user found");await k.from("eit_profiles").upsert({id:c.id,full_name:((l=c.user_metadata)==null?void 0:l.full_name)||"",email:c.email||""});const d=(a==null?void 0:a.type)||"text/plain",h=(a==null?void 0:a.size)||n.length,f=o||"Uncategorized";let g=n;if(a&&(d==="application/pdf"||d==="application/msword"||d==="application/vnd.openxmlformats-officedocument.wordprocessingml.document")){const w=await a.arrayBuffer();g=btoa(String.fromCharCode(...new Uint8Array(w)))}console.log("Creating document:",{title:s,type:r,eit_id:c.id,file_type:d,file_size:h,category:f});const{data:v,error:y}=await k.from("documents").insert([{eit_id:c.id,title:s,content:g,type:r,status:"draft",word_count:n.split(/\s+/).length,file_type:d,file_size:h,category:f}]).select().single();if(y)throw y;e(w=>({documents:[...w.documents,v],loading:!1}))}catch(c){throw console.error("Error creating document:",c),e({error:c instanceof Error?c.message:"Failed to create document",loading:!1}),c}},updateDocument:async(s,n)=>{e({loading:!0,error:null});try{const{error:r}=await k.from("documents").update(n).eq("id",s);if(r)throw r;e(a=>({documents:a.documents.map(o=>o.id===s?{...o,...n}:o),loading:!1}))}catch(r){throw console.error("Error updating document:",r),e({error:r instanceof Error?r.message:"Failed to update document",loading:!1}),r}},deleteDocument:async s=>{e({loading:!0,error:null});try{const{error:n}=await k.from("documents").delete().eq("id",s);if(n)throw n;e(r=>({documents:r.documents.filter(a=>a.id!==s),loading:!1}))}catch(n){throw console.error("Error deleting document:",n),e({error:n instanceof Error?n.message:"Failed to delete document",loading:!1}),n}},loadUserDocuments:async()=>{e({loading:!0,error:null});try{const{data:{user:s},error:n}=await k.auth.getUser();if(n)throw n;if(!s)throw new Error("No authenticated user found");const{data:r,error:a}=await k.from("documents").select("*").eq("eit_id",s.id).order("created_at",{ascending:!1});if(a)throw a;const o=r.map(l=>{if(l.file_type&&(l.file_type==="application/pdf"||l.file_type==="application/msword"||l.file_type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"))try{const c=atob(l.content),u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=c.charCodeAt(d);l.content=u.buffer}catch(c){console.error("Error processing document content:",c)}return l});e({documents:o,loading:!1,lastFetched:new Date().toISOString()})}catch(s){console.error("Error loading documents:",s),e({error:s instanceof Error?s.message:"Failed to load documents",loading:!1})}}})),qa=Bt((e,t)=>{let s=null;return{tier:"free",documentLimit:5,saoLimit:5,supervisorLimit:1,hasAiAccess:!1,isLoading:!1,error:null,fetchSubscription:async()=>{e({isLoading:!0,error:null});try{const{data:{user:n}}=await k.auth.getUser();if(!n)throw new Error("No user found");const{data:r,error:a}=await k.from("subscriptions").select("*").eq("user_id",n.id).single();if(a)throw a;if(r)e({tier:r.tier,documentLimit:r.document_limit,saoLimit:r.sao_limit,supervisorLimit:r.supervisor_limit,hasAiAccess:r.has_ai_access});else{const{error:o}=await k.from("subscriptions").insert([{user_id:n.id}]);if(o)throw o}s&&s.unsubscribe(),s=k.channel("subscription_changes").on("postgres_changes",{event:"*",schema:"public",table:"subscriptions",filter:`user_id=eq.${n.id}`},o=>{if(o.new){const l=o.new;e({tier:l.tier,documentLimit:l.document_limit,saoLimit:l.sao_limit,supervisorLimit:l.supervisor_limit,hasAiAccess:l.has_ai_access})}}).subscribe()}catch(n){e({error:n instanceof Error?n.message:"Failed to fetch subscription"})}finally{e({isLoading:!1})}},checkDocumentLimit:async()=>{const{documentLimit:n}=t();if(n===2147483647)return!0;const{data:{user:r}}=await k.auth.getUser();if(!r)return!1;const{count:a}=await k.from("documents").select("*",{count:"exact",head:!0}).eq("user_id",r.id);return(a||0)<n},checkSaoLimit:async()=>{const{saoLimit:n}=t();if(n===2147483647)return!0;const{data:{user:r}}=await k.auth.getUser();if(!r)return!1;const{count:a}=await k.from("saos").select("*",{count:"exact",head:!0}).eq("eit_id",r.id);return(a||0)<n},checkSupervisorLimit:async()=>{const{supervisorLimit:n}=t();if(n===2147483647)return!0;const{data:{user:r}}=await k.auth.getUser();if(!r)return!1;const{count:a}=await k.from("supervisor_eit_relationships").select("*",{count:"exact",head:!0}).eq("eit_id",r.id).eq("status","active");return(a||0)<n}}});function cx(e){const t=atob(e),s=t.length,n=new Uint8Array(s);for(let r=0;r<s;r++)n[r]=t.charCodeAt(r);return n}const FR=({document:e,onClose:t})=>{const[s,n]=m.useState(!0),[r,a]=m.useState(null),o=()=>{if(!e.file_type)return i.jsx("div",{className:"p-4 text-center",children:"No file type information."});if(e.file_type.startsWith("text/"))return typeof e.content=="string"?i.jsx("pre",{className:"whitespace-pre-wrap p-4 bg-slate-50 rounded text-left text-slate-800 max-h-[500px] overflow-auto",children:e.content}):i.jsx("div",{className:"p-4 text-center text-red-600",children:"Error: Text file content is not a string."});if(e.file_type==="application/pdf")try{let l;if(typeof e.content=="string"){const c=cx(e.content);l=new Blob([c],{type:"application/pdf"})}else return a("PDF content is not a string."),null;return i.jsx("iframe",{src:URL.createObjectURL(l),className:"w-full h-[600px]",onLoad:()=>n(!1),title:"PDF Preview"})}catch{return a("Failed to decode or display PDF."),null}return e.file_type==="application/msword"||e.file_type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?i.jsxs("div",{className:"p-4 text-center",children:[i.jsx(Ds,{size:48,className:"mx-auto text-slate-400 mb-4"}),i.jsxs("p",{className:"text-slate-600",children:["Word documents can be previewed after downloading.",i.jsx("br",{}),i.jsxs("button",{onClick:()=>{try{let l;if(typeof e.content=="string"){const d=cx(e.content);l=new Blob([d],{type:e.file_type})}else{a("DOC content is not a string.");return}const c=URL.createObjectURL(l),u=window.document.createElement("a");u.href=c,u.download=e.title,window.document.body.appendChild(u),u.click(),window.document.body.removeChild(u),URL.revokeObjectURL(c)}catch{a("Failed to download DOC file.")}},className:"mt-2 inline-flex items-center gap-2 text-teal-600 hover:text-teal-700",children:[i.jsx(Kb,{size:16}),"Download to View"]})]})]}):i.jsx("div",{className:"p-4 text-center",children:i.jsx("p",{className:"text-slate-600",children:"Preview not available for this file type."})})};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:e.title}),i.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:24})})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[s&&!r&&i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})}),r&&i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-red-600",children:[i.jsx(Yn,{size:32}),i.jsx("div",{className:"mt-2",children:r})]}),!r&&o()]})]})})},UR=()=>{const{documents:e,loading:t,error:s,createDocument:n,updateDocument:r,deleteDocument:a,loadUserDocuments:o}=bw(),{tier:l,documentLimit:c,fetchSubscription:u}=qa(),[d,h]=m.useState(0),[f,g]=m.useState(""),[v,y]=m.useState("all"),[w,p]=m.useState(!1),[x,b]=m.useState("all"),[S,j]=m.useState("date"),[N,_]=m.useState("desc"),[C,I]=m.useState(null),[M,V]=m.useState(""),Z=Be.useRef({}),[ie,re]=m.useState(null);m.useEffect(()=>{console.log("Documents component mounted"),o()},[o]),m.useEffect(()=>{console.log("Documents array updated:",{documentCount:e.length,documents:e})},[e]),m.useEffect(()=>{const L=G=>{const W=G.detail.documentId,ee=Z.current[W];ee&&(ee.scrollIntoView({behavior:"smooth",block:"center"}),ee.classList.add("ring","ring-teal-400","transition-all","duration-300"),setTimeout(()=>{ee.classList.remove("ring","ring-teal-400")},2e3))};return window.addEventListener("scroll-to-document",L),()=>window.removeEventListener("scroll-to-document",L)},[]),m.useEffect(()=>{(async()=>{await u();const{data:{user:G}}=await k.auth.getUser();if(G){const{data:W}=await k.from("subscriptions").select("document_created_count").eq("user_id",G.id).single();W&&typeof W.document_created_count=="number"&&h(W.document_created_count)}})()},[]);const oe=async L=>{var W;const G=(W=L.target.files)==null?void 0:W[0];if(G)try{console.log("Starting document creation process...");let ee="";const $=G.type;$.startsWith("text/")?ee=await G.text():ee=`File type (${$}) not directly viewable. Will be stored.`,await n(G.name,ee,"other",G),console.log("Document creation completed successfully"),L.target.value=""}catch(ee){console.error("Document creation failed:",ee),alert("Failed to create document. Please try again.")}},J=async L=>{try{const G=new Blob([L.content],{type:"text/plain"}),W=URL.createObjectURL(G),ee=document.createElement("a");ee.href=W,ee.download=`${L.title}.txt`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(W)}catch(G){console.error("Download failed:",G),alert("Failed to download document")}},B=async L=>{if(window.confirm("Are you sure you want to delete this document?"))try{await a(L.id)}catch(G){console.error("Delete failed:",G),alert("Failed to delete document")}},P=async L=>{I({id:L.id,title:L.title}),V(L.title)},O=async()=>{if(C)try{if(!e.find(G=>G.id===C.id))throw new Error("Document not found");await r(C.id,{title:M}),I(null)}catch(L){console.error("Update failed:",L),alert("Failed to update document title")}},D=L=>{re(L)},K=e.filter(L=>{const G=L.title.toLowerCase().includes(f.toLowerCase())||L.content.toLowerCase().includes(f.toLowerCase()),W=v==="all"||L.type===v,ee=x==="all"||L.status===x;return G&&W&&ee}).sort((L,G)=>S==="date"?N==="asc"?new Date(L.created_at).getTime()-new Date(G.created_at).getTime():new Date(G.created_at).getTime()-new Date(L.created_at).getTime():N==="asc"?L.title.localeCompare(G.title):G.title.localeCompare(L.title)),se=["all",...new Set(e.map(L=>L.type))];return i.jsxs("div",{className:"space-y-6",children:[l==="free"&&i.jsx("div",{className:"p-4 mb-4 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-900 text-center font-semibold",children:d<c?`You have ${c-d} document${c-d===1?"":"s"} left on the Free plan.`:"You have reached your document upload limit for the Free plan. Upgrade to add more."}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:"Documents"}),i.jsxs("label",{className:`btn flex items-center cursor-pointer ${l==="free"&&d>=c?"bg-gray-300 text-gray-500 border-gray-300 cursor-not-allowed":"btn-primary"}`,children:[i.jsx(eA,{size:16,className:"mr-1.5"}),"Upload Document",i.jsx("input",{type:"file",className:"hidden",onChange:oe,disabled:l==="free"&&d>=c})]})]}),i.jsxs("div",{className:"card p-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsxs("div",{className:"relative",children:[i.jsx($f,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),i.jsx("input",{type:"text",value:f,onChange:L=>g(L.target.value),placeholder:"Search documents...",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"}),f&&i.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:16})})]})}),i.jsxs("button",{onClick:()=>p(!w),className:"btn btn-secondary flex items-center",children:[i.jsx(BP,{size:16,className:"mr-1.5"}),"Filters"]})]}),w&&i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Type"}),i.jsx("select",{value:v,onChange:L=>y(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:se.map(L=>i.jsx("option",{value:L,children:L.charAt(0).toUpperCase()+L.slice(1)},L))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),i.jsxs("select",{value:x,onChange:L=>b(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"all",children:"All Statuses"}),i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"submitted",children:"Submitted"}),i.jsx("option",{value:"approved",children:"Approved"}),i.jsx("option",{value:"rejected",children:"Rejected"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sort By"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:S,onChange:L=>j(L.target.value),className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"date",children:"Date"}),i.jsx("option",{value:"name",children:"Name"})]}),i.jsx("button",{onClick:()=>_(N==="asc"?"desc":"asc"),className:"px-3 py-2 border border-slate-200 rounded-lg hover:bg-slate-50",children:N==="asc"?"":""})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(L=>i.jsxs("div",{ref:G=>Z.current[L.id]=G,"data-document-id":L.id,className:"document-card bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 ease-in-out",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[(C==null?void 0:C.id)===L.id?i.jsx("div",{className:"flex-1 mr-2",children:i.jsx("input",{type:"text",value:M,onChange:G=>V(G.target.value),className:"w-full px-2 py-1 border border-slate-200 rounded",onKeyDown:G=>{G.key==="Enter"&&O(),G.key==="Escape"&&I(null)},autoFocus:!0})}):i.jsx("h3",{className:"font-semibold text-lg text-slate-800",children:L.title}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("button",{className:"p-1.5 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-slate-700",onClick:()=>P(L),children:i.jsx(Yi,{size:16})}),i.jsx("button",{className:"p-1.5 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-slate-700",onClick:()=>D(L),children:i.jsx(Gb,{size:16})}),i.jsx("button",{className:"p-1.5 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-slate-700",onClick:()=>J(L),children:i.jsx(Kb,{size:16})}),i.jsx("button",{className:"p-1.5 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-red-600",onClick:()=>B(L),children:i.jsx(Qn,{size:16})})]})]}),L.file_type&&L.file_type.startsWith("text/")?i.jsx("p",{className:"text-sm text-slate-600 mt-2 line-clamp-2",children:L.content}):null,i.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-slate-100",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:[i.jsx("span",{children:new Date(L.created_at).toLocaleDateString()}),i.jsx("span",{className:"mx-2",children:""}),i.jsx("span",{className:"capitalize",children:L.status})]}),i.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-slate-100 text-slate-600",children:L.type})]})]},L.id))}),ie&&i.jsx(FR,{document:ie,onClose:()=>re(null)}),K.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ds,{size:48,className:"mx-auto text-slate-400"}),i.jsx("h3",{className:"mt-4 text-lg font-medium text-slate-900",children:"No documents found"}),i.jsx("p",{className:"mt-2 text-slate-500",children:f||v!=="all"||x!=="all"?"Try adjusting your search or filters":"Get started by uploading your first document"})]}),t&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-500",children:"Loading documents..."})]}),s&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Yn,{size:48,className:"mx-auto text-red-400"}),i.jsx("h3",{className:"mt-4 text-lg font-medium text-slate-900",children:"Error loading documents"}),i.jsx("p",{className:"mt-2 text-slate-500",children:s})]})]})},zR=()=>{const e=[{id:1,title:"Technical Problem Analysis",description:"Self-Assessment Outcome (SAO) for problem analysis competency",status:"complete",updatedAt:"2025-04-12",wordCount:850},{id:2,title:"Team Leadership Experience",description:"SAO documenting leadership skills in team environments",status:"draft",updatedAt:"2025-04-08",wordCount:620},{id:3,title:"Project Management Methodology",description:"SAO for project planning and execution competency",status:"ai-assisted",updatedAt:"2025-04-02",wordCount:740},{id:4,title:"Professional Ethics Application",description:"SAO for ethical decision making in engineering",status:"in-review",updatedAt:"2025-03-25",wordCount:910}],t={complete:"bg-green-100 text-green-800 border-green-200",draft:"bg-slate-100 text-slate-800 border-slate-200","ai-assisted":"bg-purple-100 text-purple-800 border-purple-200","in-review":"bg-amber-100 text-amber-800 border-amber-200"},s={complete:i.jsx(FP,{size:16,className:"mr-1"}),draft:i.jsx(zd,{size:16,className:"mr-1"}),"ai-assisted":i.jsx(Kg,{size:16,className:"mr-1"}),"in-review":i.jsx(li,{size:16,className:"mr-1"})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:"Essays"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Manage your Self-Assessment Outcome (SAO) essays"})]}),i.jsx("div",{className:"card bg-gradient-to-br from-teal-500 to-teal-700 text-white p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[i.jsxs("div",{className:"mb-4 md:mb-0",children:[i.jsx("h2",{className:"text-xl font-bold",children:"AI Essay Assistant"}),i.jsx("p",{className:"mt-1 text-teal-100",children:"Let our AI analyze your documented experiences and draft SAO essays that highlight your key competencies."})]}),i.jsxs("button",{className:"btn bg-white text-teal-700 hover:bg-teal-50 flex items-center self-start",children:[i.jsx(Kg,{size:16,className:"mr-2"}),"Start New AI-Assisted Essay"]})]})}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between space-y-4 md:space-y-0",children:[i.jsxs("button",{className:"btn btn-primary flex items-center",children:[i.jsx(Qb,{size:16,className:"mr-1.5"}),"Create New Essay"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("select",{className:"px-3 py-2 rounded-lg border border-slate-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"all",children:"All Essays"}),i.jsx("option",{value:"complete",children:"Completed"}),i.jsx("option",{value:"draft",children:"Drafts"}),i.jsx("option",{value:"ai-assisted",children:"AI-Assisted"}),i.jsx("option",{value:"in-review",children:"In Review"})]}),i.jsxs("select",{className:"px-3 py-2 rounded-lg border border-slate-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"recent",children:"Recently Updated"}),i.jsx("option",{value:"oldest",children:"Oldest First"}),i.jsx("option",{value:"alphabetical",children:"Alphabetical"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(n=>i.jsxs("div",{className:"card hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-800",children:n.title}),i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${t[n.status]}`,children:[s[n.status],n.status==="ai-assisted"?"AI Assisted":n.status.charAt(0).toUpperCase()+n.status.slice(1)]})]}),i.jsx("p",{className:"text-sm text-slate-600 mt-2",children:n.description}),i.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-slate-100",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:[i.jsxs("span",{children:["Updated ",new Date(n.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),i.jsx("span",{className:"mx-2",children:""}),i.jsxs("span",{children:[n.wordCount," words"]})]}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("button",{className:"p-1.5 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:i.jsx(Gb,{size:16})}),i.jsx("button",{className:"p-1.5 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:i.jsx(zd,{size:16})}),i.jsx("button",{className:"p-1.5 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-red-600",children:i.jsx(Qn,{size:16})})]})]})]},n.id))})]})},VR={};function qR(e,t){let s;try{s=e()}catch{return}return{getItem:r=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=s.getItem(r))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,a)=>s.setItem(r,JSON.stringify(a,void 0)),removeItem:r=>s.removeItem(r)}}const Ta=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then(n){return Ta(n)(s)},catch(n){return this}}}catch(s){return{then(n){return this},catch(n){return Ta(n)(s)}}}},BR=(e,t)=>(s,n,r)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,p)=>({...p,...w}),...t},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),s(...w)},n,r);const d=Ta(a.serialize),h=()=>{const w=a.partialize({...n()});let p;const x=d({state:w,version:a.version}).then(b=>u.setItem(a.name,b)).catch(b=>{p=b});if(p)throw p;return x},f=r.setState;r.setState=(w,p)=>{f(w,p),h()};const g=e((...w)=>{s(...w),h()},n,r);let v;const y=()=>{var w;if(!u)return;o=!1,l.forEach(x=>x(n()));const p=((w=a.onRehydrateStorage)==null?void 0:w.call(a,n()))||void 0;return Ta(u.getItem.bind(u))(a.name).then(x=>{if(x)return a.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return a.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return v=a.merge(x,(b=n())!=null?b:g),s(v,!0),h()}).then(()=>{p==null||p(v,void 0),o=!0,c.forEach(x=>x(v))}).catch(x=>{p==null||p(void 0,x)})};return r.persist={setOptions:w=>{a={...a,...w},w.getStorage&&(u=w.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},y(),v||g},WR=(e,t)=>(s,n,r)=>{let a={storage:qR(()=>localStorage),partialize:y=>y,version:0,merge:(y,w)=>({...w,...y}),...t},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),s(...y)},n,r);const d=()=>{const y=a.partialize({...n()});return u.setItem(a.name,{state:y,version:a.version})},h=r.setState;r.setState=(y,w)=>{h(y,w),d()};const f=e((...y)=>{s(...y),d()},n,r);r.getInitialState=()=>f;let g;const v=()=>{var y,w;if(!u)return;o=!1,l.forEach(x=>{var b;return x((b=n())!=null?b:f)});const p=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(y=n())!=null?y:f))||void 0;return Ta(u.getItem.bind(u))(a.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return[!0,a.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[S,j]=x;if(g=a.merge(j,(b=n())!=null?b:f),s(g,!0),S)return d()}).then(()=>{p==null||p(g,void 0),g=n(),o=!0,c.forEach(x=>x(g))}).catch(x=>{p==null||p(void 0,x)})};return r.persist={setOptions:y=>{a={...a,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},a.skipHydration||v(),g||f},HR=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((VR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),BR(e,t)):WR(e,t),zf=HR,ww=Bt()(zf((e,t)=>({documents:[],loading:!1,error:null,addDocument:(s,n,r)=>{const a={id:Date.now().toString(),name:s,content:n,category:r,size:`${(n.length/1024).toFixed(1)} KB`,created_at:new Date().toISOString(),attachments:[]};e(o=>({documents:[a,...o.documents]}))},getDocuments:()=>t().documents,getDocument:s=>t().documents.find(n=>n.id===s),updateDocument:(s,n)=>{e(r=>({documents:r.documents.map(a=>{if(a.id===s){const o={...a,...n};return n.content&&(o.size=`${(n.content.length/1024).toFixed(1)} KB`),o}return a})}))},deleteDocument:s=>{e(n=>({documents:n.documents.filter(r=>r.id!==s)}))}}),{name:"local-documents-storage"})),jw=({content:e,onChange:t,onSave:s,onCancel:n})=>{const[r,a]=m.useState(!1),[o,l]=m.useState(""),[c,u]=m.useState(!1),[d,h]=m.useState(""),f=w=>{document.execCommand(w,!1)},g=()=>{o&&(document.execCommand("createLink",!1,o),a(!1),l(""))},v=()=>{d&&(document.execCommand("insertImage",!1,d),u(!1),h(""))},y=w=>{var x;const p=(x=w.target.files)==null?void 0:x[0];p&&console.log("File selected:",p)};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 p-2 bg-slate-50 rounded-lg border border-slate-200",children:[i.jsx("button",{onClick:()=>f("bold"),className:"p-2 rounded hover:bg-slate-200",title:"Bold",children:i.jsx($P,{size:16})}),i.jsx("button",{onClick:()=>f("italic"),className:"p-2 rounded hover:bg-slate-200",title:"Italic",children:i.jsx(JP,{size:16})}),i.jsx("button",{onClick:()=>f("underline"),className:"p-2 rounded hover:bg-slate-200",title:"Underline",children:i.jsx(ZP,{size:16})}),i.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),i.jsx("button",{onClick:()=>f("insertUnorderedList"),className:"p-2 rounded hover:bg-slate-200",title:"Bullet List",children:i.jsx(YP,{size:16})}),i.jsx("button",{onClick:()=>f("insertOrderedList"),className:"p-2 rounded hover:bg-slate-200",title:"Numbered List",children:i.jsx(GP,{size:16})}),i.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),i.jsx("button",{onClick:()=>a(!0),className:"p-2 rounded hover:bg-slate-200",title:"Insert Link",children:i.jsx(KP,{size:16})}),i.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded hover:bg-slate-200",title:"Insert Image",children:i.jsx(HP,{size:16})}),i.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),i.jsxs("label",{className:"p-2 rounded hover:bg-slate-200 cursor-pointer",title:"Attach File",children:[i.jsx(Ea,{size:16}),i.jsx("input",{type:"file",className:"hidden",onChange:y})]})]}),r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Insert Link"}),i.jsx("input",{type:"url",value:o,onChange:w=>l(w.target.value),placeholder:"Enter URL",className:"w-full px-3 py-2 border rounded-lg mb-2"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),i.jsx("button",{onClick:g,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700",children:"Insert"})]})]})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Insert Image"}),i.jsx("input",{type:"url",value:d,onChange:w=>h(w.target.value),placeholder:"Enter image URL",className:"w-full px-3 py-2 border rounded-lg mb-2"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),i.jsx("button",{onClick:v,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700",children:"Insert"})]})]})}),i.jsx("div",{contentEditable:!0,className:"min-h-[400px] p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",onInput:w=>t(w.currentTarget.innerHTML),dangerouslySetInnerHTML:{__html:e}}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsxs("button",{onClick:n,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg flex items-center",children:[i.jsx(Nt,{size:16,className:"mr-1"}),"Cancel"]}),i.jsxs("button",{onClick:s,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 flex items-center",children:[i.jsx(Mf,{size:16,className:"mr-1"}),"Save"]})]})]})},JR=()=>{const[e,t]=m.useState(""),[s,n]=m.useState(""),[r,a]=m.useState("Experience Reports"),[o,l]=m.useState([]),[c,u]=m.useState(!1),d=Ke(),{addDocument:h}=ww(),f=async()=>{try{if(!s.trim()){alert("Please enter a document name");return}u(!0),h(s,e,r),d("/documents")}catch(y){console.error("Error saving document:",y),alert("Error saving document. Please try again.")}finally{u(!1)}},g=async y=>{var p;const w=(p=y.target.files)==null?void 0:p[0];if(w)try{const x={id:Date.now().toString(),name:w.name,type:w.type,size:w.size,url:URL.createObjectURL(w)};l(b=>[...b,x])}catch(x){console.error("Error uploading file:",x),alert("Error uploading file. Please try again.")}},v=y=>{l(w=>w.filter(p=>p.id!==y))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>d("/documents"),className:"p-2 rounded-lg text-slate-500 hover:bg-slate-100",children:i.jsx(Hb,{size:20})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:"New Text Document"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Write and save your text"})]})]}),i.jsxs("div",{className:"card space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Document Name"}),i.jsx("input",{id:"documentName",type:"text",value:s,onChange:y=>n(y.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter document name..."})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 mb-1",children:"Category"}),i.jsxs("select",{id:"category",value:r,onChange:y=>a(y.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"Experience Reports",children:"Experience Reports"}),i.jsx("option",{value:"Technical Reports",children:"Technical Reports"}),i.jsx("option",{value:"Certificates",children:"Certificates"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Content"}),i.jsx(jw,{content:e,onChange:t,onSave:f,onCancel:()=>d("/documents")})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Attachments"}),i.jsxs("div",{className:"space-y-2",children:[o.map(y=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ea,{size:16,className:"text-slate-500"}),i.jsx("span",{className:"text-sm text-slate-700",children:y.name}),i.jsxs("span",{className:"text-xs text-slate-500",children:["(",(y.size/1024).toFixed(1)," KB)"]})]}),i.jsx("button",{onClick:()=>v(y.id),className:"p-1 text-slate-500 hover:text-red-600",children:i.jsx(Nt,{size:16})})]},y.id)),i.jsxs("label",{className:"flex items-center space-x-2 p-2 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-teal-500",children:[i.jsx(Ea,{size:16,className:"text-slate-500"}),i.jsx("span",{className:"text-sm text-slate-700",children:"Add attachment"}),i.jsx("input",{type:"file",className:"hidden",onChange:g})]})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:f,disabled:c,className:"btn btn-primary flex items-center",children:[i.jsx(Mf,{size:16,className:"mr-1.5"}),c?"Saving...":"Save Document"]})})]})},KR=()=>i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#F5F7FA] p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-9xl font-bold text-teal-600",children:"404"}),i.jsx("h2",{className:"text-3xl font-semibold text-slate-800 mt-4",children:"Page Not Found"}),i.jsx("p",{className:"text-slate-500 max-w-md mx-auto mt-2",children:"The page you're looking for doesn't exist or has been moved."}),i.jsxs($t,{to:"/",className:"inline-flex items-center px-4 py-2 mt-6 rounded-lg bg-teal-600 text-white hover:bg-teal-700 transition-colors",children:[i.jsx(ac,{size:18,className:"mr-2"}),"Back to Dashboard"]})]})}),GR=()=>{const{id:e}=QS(),t=Ke(),{getDocument:s,updateDocument:n}=ww(),[r,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState("Experience Reports"),[d,h]=m.useState([]),[f,g]=m.useState(!1);m.useEffect(()=>{if(e){const p=s(e);p?(a(p.content),l(p.name),u(p.category),p.attachments&&h(p.attachments)):t("/documents")}},[e,s,t]);const v=async()=>{try{if(!o.trim()){alert("Please enter a document name");return}g(!0),e&&(await n(e,{name:o,content:r,category:c,attachments:d}),t("/documents"))}catch(p){console.error("Error updating document:",p),alert("Error updating document. Please try again.")}finally{g(!1)}},y=async p=>{var b;const x=(b=p.target.files)==null?void 0:b[0];if(x)try{const S={id:Date.now().toString(),name:x.name,type:x.type,size:x.size,url:URL.createObjectURL(x)};h(j=>[...j,S])}catch(S){console.error("Error uploading file:",S),alert("Error uploading file. Please try again.")}},w=p=>{h(x=>x.filter(b=>b.id!==p))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/documents"),className:"p-2 rounded-lg text-slate-500 hover:bg-slate-100",children:i.jsx(Hb,{size:20})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:"Edit Document"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Modify your document"})]})]}),i.jsxs("div",{className:"card space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Document Name"}),i.jsx("input",{id:"documentName",type:"text",value:o,onChange:p=>l(p.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter document name..."})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 mb-1",children:"Category"}),i.jsxs("select",{id:"category",value:c,onChange:p=>u(p.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"Experience Reports",children:"Experience Reports"}),i.jsx("option",{value:"Technical Reports",children:"Technical Reports"}),i.jsx("option",{value:"Certificates",children:"Certificates"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Content"}),i.jsx(jw,{content:r,onChange:a,onSave:v,onCancel:()=>t("/documents")})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Attachments"}),i.jsxs("div",{className:"space-y-2",children:[d.map(p=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ea,{size:16,className:"text-slate-500"}),i.jsx("span",{className:"text-sm text-slate-700",children:p.name}),i.jsxs("span",{className:"text-xs text-slate-500",children:["(",(p.size/1024).toFixed(1)," KB)"]})]}),i.jsx("button",{onClick:()=>w(p.id),className:"p-1 text-slate-500 hover:text-red-600",children:i.jsx(Nt,{size:16})})]},p.id)),i.jsxs("label",{className:"flex items-center space-x-2 p-2 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-teal-500",children:[i.jsx(Ea,{size:16,className:"text-slate-500"}),i.jsx("span",{className:"text-sm text-slate-700",children:"Add attachment"}),i.jsx("input",{type:"file",className:"hidden",onChange:y})]})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:v,disabled:f,className:"btn btn-primary flex items-center",children:[i.jsx(Mf,{size:16,className:"mr-1.5"}),f?"Saving...":"Save Changes"]})})]})},Sw=Bt()(zf(e=>({supervisorReviews:!0,saoFeedback:!0,relationships:!0,userSkills:!0,toggleSupervisorReviews:()=>e(t=>({supervisorReviews:!t.supervisorReviews})),toggleSaoFeedback:()=>e(t=>({saoFeedback:!t.saoFeedback})),toggleRelationships:()=>e(t=>({relationships:!t.relationships})),toggleUserSkills:()=>e(t=>({userSkills:!t.userSkills}))}),{name:"notification-preferences"}));var YR=Object.defineProperty,XR=(e,t,s)=>t in e?YR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,uu=(e,t,s)=>(XR(e,typeof t!="symbol"?t+"":t,s),s);let QR=class{constructor(){uu(this,"current",this.detect()),uu(this,"handoffState","pending"),uu(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Mr=new QR,Xr=(e,t)=>{Mr.isServer?m.useEffect(e,t):m.useLayoutEffect(e,t)};function ZR(e){let t=m.useRef(e);return Xr(()=>{t.current=e},[e]),t}let Zs=function(e){let t=ZR(e);return Be.useCallback((...s)=>t.current(...s),[t])};function e3(e,t,s){let[n,r]=m.useState(s),a=e!==void 0,o=m.useRef(a),l=m.useRef(!1),c=m.useRef(!1);return a&&!o.current&&!l.current?(l.current=!0,o.current=a,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!a&&o.current&&!c.current&&(c.current=!0,o.current=a,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[a?e:n,Zs(u=>(a||r(u),t==null?void 0:t(u)))]}function t3(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function kw(){let e=[],t={addEventListener(s,n,r,a){return s.addEventListener(n,r,a),t.add(()=>s.removeEventListener(n,r,a))},requestAnimationFrame(...s){let n=requestAnimationFrame(...s);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...s){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...s))},setTimeout(...s){let n=setTimeout(...s);return t.add(()=>clearTimeout(n))},microTask(...s){let n={current:!0};return t3(()=>{n.current&&s[0]()}),t.add(()=>{n.current=!1})},style(s,n,r){let a=s.style.getPropertyValue(n);return Object.assign(s.style,{[n]:r}),this.add(()=>{Object.assign(s.style,{[n]:a})})},group(s){let n=kw();return s(n),this.add(()=>n.dispose())},add(s){return e.push(s),()=>{let n=e.indexOf(s);if(n>=0)for(let r of e.splice(n,1))r()}},dispose(){for(let s of e.splice(0))s()}};return t}function s3(){let[e]=m.useState(kw);return m.useEffect(()=>()=>e.dispose(),[e]),e}function n3(){let e=typeof document>"u";return"useSyncExternalStore"in fu?(t=>t.useSyncExternalStore)(fu)(()=>()=>{},()=>!1,()=>!e):!1}function r3(){let e=n3(),[t,s]=m.useState(Mr.isHandoffComplete);return t&&Mr.isHandoffComplete===!1&&s(!1),m.useEffect(()=>{t!==!0&&s(!0)},[t]),m.useEffect(()=>Mr.handoff(),[]),e?!1:t}var ux;let Vf=(ux=Be.useId)!=null?ux:function(){let e=r3(),[t,s]=Be.useState(e?()=>Mr.nextId():null);return Xr(()=>{t===null&&s(Mr.nextId())},[t]),t!=null?""+t:void 0};function Nw(e,t,...s){if(e in t){let r=t[e];return typeof r=="function"?r(...s):r}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Nw),n}function dx(e){var t;if(e.type)return e.type;let s=(t=e.as)!=null?t:"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function i3(e,t){let[s,n]=m.useState(()=>dx(e));return Xr(()=>{n(dx(e))},[e.type,e.as]),Xr(()=>{s||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&n("button")},[s,t]),s}let a3=Symbol();function qf(...e){let t=m.useRef(e);m.useEffect(()=>{t.current=e},[e]);let s=Zs(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)});return e.every(n=>n==null||(n==null?void 0:n[a3]))?void 0:s}function hx(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var o3=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(o3||{}),l3=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(l3||{});function Ba({ourProps:e,theirProps:t,slot:s,defaultTag:n,features:r,visible:a=!0,name:o,mergeRefs:l}){l=l??c3;let c=_w(t,e);if(a)return Co(c,s,n,o,l);let u=r??0;if(u&2){let{static:d=!1,...h}=c;if(d)return Co(h,s,n,o,l)}if(u&1){let{unmount:d=!0,...h}=c;return Nw(d?0:1,{0(){return null},1(){return Co({...h,hidden:!0,style:{display:"none"}},s,n,o,l)}})}return Co(c,s,n,o,l)}function Co(e,t={},s,n,r){let{as:a=s,children:o,refName:l="ref",...c}=du(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let f=!1,g=[];for(let[v,y]of Object.entries(t))typeof y=="boolean"&&(f=!0),y===!0&&g.push(v);f&&(h["data-headlessui-state"]=g.join(" "))}if(a===m.Fragment&&Object.keys(qd(c)).length>0){if(!m.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let f=d.props,g=typeof(f==null?void 0:f.className)=="function"?(...y)=>hx(f==null?void 0:f.className(...y),c.className):hx(f==null?void 0:f.className,c.className),v=g?{className:g}:{};return m.cloneElement(d,Object.assign({},_w(d.props,qd(du(c,["ref"]))),h,u,{ref:r(d.ref,u.ref)},v))}return m.createElement(a,Object.assign({},du(c,["ref"]),a!==m.Fragment&&u,a!==m.Fragment&&h),d)}function c3(...e){return e.every(t=>t==null)?void 0:t=>{for(let s of e)s!=null&&(typeof s=="function"?s(t):s.current=t)}}function _w(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},s={};for(let n of e)for(let r in n)r.startsWith("on")&&typeof n[r]=="function"?(s[r]!=null||(s[r]=[]),s[r].push(n[r])):t[r]=n[r];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(s).map(n=>[n,void 0])));for(let n in s)Object.assign(t,{[n](r,...a){let o=s[n];for(let l of o){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...a)}}});return t}function lc(e){var t;return Object.assign(m.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function qd(e){let t=Object.assign({},e);for(let s in t)t[s]===void 0&&delete t[s];return t}function du(e,t=[]){let s=Object.assign({},e);for(let n of t)n in s&&delete s[n];return s}let u3="div";var Ew=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ew||{});function d3(e,t){var s;let{features:n=1,...r}=e,a={ref:t,"aria-hidden":(n&2)===2?!0:(s=r["aria-hidden"])!=null?s:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return Ba({ourProps:a,theirProps:r,slot:{},defaultTag:u3,name:"Hidden"})}let h3=lc(d3);function f3(e){let t=e.parentElement,s=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(s=t),t=t.parentElement;let n=(t==null?void 0:t.getAttribute("disabled"))==="";return n&&m3(s)?!1:n}function m3(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function p3(e){var t,s;let n=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(n){for(let r of n.elements)if(r!==e&&(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image")){r.click();return}(s=n.requestSubmit)==null||s.call(n)}}var Bd=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Bd||{});let Cw=m.createContext(null);function Tw(){let e=m.useContext(Cw);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Tw),t}return e}function g3(){let[e,t]=m.useState([]);return[e.length>0?e.join(" "):void 0,m.useMemo(()=>function(s){let n=Zs(a=>(t(o=>[...o,a]),()=>t(o=>{let l=o.slice(),c=l.indexOf(a);return c!==-1&&l.splice(c,1),l}))),r=m.useMemo(()=>({register:n,slot:s.slot,name:s.name,props:s.props}),[n,s.slot,s.name,s.props]);return Be.createElement(Cw.Provider,{value:r},s.children)},[t])]}let x3="p";function v3(e,t){let s=Vf(),{id:n=`headlessui-description-${s}`,...r}=e,a=Tw(),o=qf(t);Xr(()=>a.register(n),[n,a.register]);let l={ref:o,...a.props,id:n};return Ba({ourProps:l,theirProps:r,slot:a.slot||{},defaultTag:x3,name:a.name||"Description"})}let y3=lc(v3),b3=Object.assign(y3,{}),Pw=m.createContext(null);function Aw(){let e=m.useContext(Pw);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Aw),t}return e}function w3(){let[e,t]=m.useState([]);return[e.length>0?e.join(" "):void 0,m.useMemo(()=>function(s){let n=Zs(a=>(t(o=>[...o,a]),()=>t(o=>{let l=o.slice(),c=l.indexOf(a);return c!==-1&&l.splice(c,1),l}))),r=m.useMemo(()=>({register:n,slot:s.slot,name:s.name,props:s.props}),[n,s.slot,s.name,s.props]);return Be.createElement(Pw.Provider,{value:r},s.children)},[t])]}let j3="label";function S3(e,t){let s=Vf(),{id:n=`headlessui-label-${s}`,passive:r=!1,...a}=e,o=Aw(),l=qf(t);Xr(()=>o.register(n),[n,o.register]);let c={ref:l,...o.props,id:n};return r&&("onClick"in c&&(delete c.htmlFor,delete c.onClick),"onClick"in a&&delete a.onClick),Ba({ourProps:c,theirProps:a,slot:o.slot||{},defaultTag:j3,name:o.name||"Label"})}let k3=lc(S3),N3=Object.assign(k3,{}),Bf=m.createContext(null);Bf.displayName="GroupContext";let _3=m.Fragment;function E3(e){var t;let[s,n]=m.useState(null),[r,a]=w3(),[o,l]=g3(),c=m.useMemo(()=>({switch:s,setSwitch:n,labelledby:r,describedby:o}),[s,n,r,o]),u={},d=e;return Be.createElement(l,{name:"Switch.Description"},Be.createElement(a,{name:"Switch.Label",props:{htmlFor:(t=c.switch)==null?void 0:t.id,onClick(h){s&&(h.currentTarget.tagName==="LABEL"&&h.preventDefault(),s.click(),s.focus({preventScroll:!0}))}}},Be.createElement(Bf.Provider,{value:c},Ba({ourProps:u,theirProps:d,defaultTag:_3,name:"Switch.Group"}))))}let C3="button";function T3(e,t){var s;let n=Vf(),{id:r=`headlessui-switch-${n}`,checked:a,defaultChecked:o=!1,onChange:l,disabled:c=!1,name:u,value:d,form:h,...f}=e,g=m.useContext(Bf),v=m.useRef(null),y=qf(v,t,g===null?null:g.setSwitch),[w,p]=e3(a,l,o),x=Zs(()=>p==null?void 0:p(!w)),b=Zs(I=>{if(f3(I.currentTarget))return I.preventDefault();I.preventDefault(),x()}),S=Zs(I=>{I.key===Bd.Space?(I.preventDefault(),x()):I.key===Bd.Enter&&p3(I.currentTarget)}),j=Zs(I=>I.preventDefault()),N=m.useMemo(()=>({checked:w}),[w]),_={id:r,ref:y,role:"switch",type:i3(e,v),tabIndex:e.tabIndex===-1?0:(s=e.tabIndex)!=null?s:0,"aria-checked":w,"aria-labelledby":g==null?void 0:g.labelledby,"aria-describedby":g==null?void 0:g.describedby,disabled:c,onClick:b,onKeyUp:S,onKeyPress:j},C=s3();return m.useEffect(()=>{var I;let M=(I=v.current)==null?void 0:I.closest("form");M&&o!==void 0&&C.addEventListener(M,"reset",()=>{p(o)})},[v,p]),Be.createElement(Be.Fragment,null,u!=null&&w&&Be.createElement(h3,{features:Ew.Hidden,...qd({as:"input",type:"checkbox",hidden:!0,readOnly:!0,disabled:c,form:h,checked:w,name:u,value:d})}),Ba({ourProps:_,theirProps:f,slot:N,defaultTag:C3,name:"Switch"}))}let P3=lc(T3),A3=E3,Fn=Object.assign(P3,{Group:A3,Label:N3,Description:b3});const ci=async(e,t,s,n,r)=>{try{const{error:a}=await k.from("notifications").insert({user_id:e,type:t,title:s,message:n,data:r,read:!1});if(a)throw a;return!0}catch(a){return console.error("Error sending notification:",a),!1}},R3=async(e,t)=>ci(e,"request","New EIT Connection Request",`${t} has requested to connect with you as their supervisor.`,{type:"supervisor_request"}),I3=async(e,t,s)=>ci(e,"score","New Skill Score",`You received a score of ${s} for ${t}.`,{type:"skill_score",skillName:t,score:s}),Wd=async(e,t,s)=>ci(e,"validation_request","New Skill Validation Request",`${t} has requested your validation for ${s}.`,{type:"validation_request",skillName:s}),O3=async(e,t,s)=>ci(e,"score","New SAO Score",`You received a score of ${s} for your SAO: "${t}".`,{type:"sao_score",saoTitle:t,score:s}),D3=async(e,t,s)=>ci(e,"validation_request","New SAO Validation Request",`${t} has requested your validation for SAO: "${s}".`,{type:"sao_validation_request",saoTitle:s}),L3=()=>{const[e,t]=m.useState(null),[s,n]=m.useState(""),[r,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(!1),[f,g]=m.useState({type:"",text:""}),[v,y]=m.useState(!1),[w,p]=m.useState(!1),[x,b]=m.useState(!1),[S,j]=m.useState(""),[N,_]=m.useState(""),[C,I]=m.useState(""),[M,V]=m.useState(""),[Z,ie]=m.useState("Free"),[re,oe]=m.useState(null),[J,B]=m.useState(""),[P,O]=m.useState(null),[D,K]=m.useState(""),[se,L]=m.useState("idle"),[G,W]=m.useState(""),[ee,$]=m.useState([]),[he,ue]=m.useState(!1),[z,de]=m.useState(""),[A,E]=m.useState(""),[R,T]=m.useState(""),[q,H]=m.useState("idle"),[le,xe]=m.useState(""),[mt,lt]=m.useState(!1),[et,pt]=m.useState(!1),[Ls,Wt]=m.useState(""),[wn,je]=m.useState(""),[De,Ms]=m.useState(""),[$s,jn]=m.useState(""),[ps,Sn]=m.useState(!1),[Ht,ui]=m.useState(null),[Wf,di]=m.useState(!1),[uc,Ka]=m.useState(""),[Ga,Ya]=m.useState(""),[hi,te]=m.useState(""),[ne,Le]=m.useState(!1),[Ue,_t]=m.useState(null),[Xa,kn]=m.useState(!1),[Fw,dc]=m.useState(!1),[Hf,Jf]=m.useState(""),[Kf,Gf]=m.useState(""),[Yf,Xf]=m.useState(""),[ir,Qf]=m.useState(!1),[Zf,Qa]=m.useState(null),[Uw,Za]=m.useState(!1),[ss,em]=m.useState(""),[ns,tm]=m.useState(""),{supervisorReviews:hc,saoFeedback:fc,relationships:mc,userSkills:pc,toggleSupervisorReviews:zw,toggleSaoFeedback:Vw,toggleRelationships:qw,toggleUserSkills:Bw}=Sw(),{tier:rs,documentLimit:hI,saoLimit:fI,supervisorLimit:eo,hasAiAccess:mI,fetchSubscription:sm,checkDocumentLimit:pI,checkSaoLimit:gI,checkSupervisorLimit:xI}=qa();m.useEffect(()=>{(async()=>{var fe,Me;const{data:{user:Y}}=await k.auth.getUser();if(Y){t(Y),n(((fe=Y.user_metadata)==null?void 0:fe.full_name)||""),a(Y.email||""),l(Y.email||""),u(((Me=Y.user_metadata)==null?void 0:Me.avatar_url)||"");const{data:gs}=await k.from("eit_profiles").select("id, start_date, target_date").eq("id",Y.id).single();gs&&(O("eit"),em(gs.start_date||""),tm(gs.target_date||""));const{data:Nn}=await k.from("supervisor_profiles").select("id").eq("id",Y.id).single();Nn&&O("supervisor")}})(),sm()},[]),m.useEffect(()=>{P==="eit"&&e&&nm(e.id)},[P,e]),m.useEffect(()=>{e&&k.auth.mfa.listFactors().then(({data:F})=>{var fe;const Y=(fe=F==null?void 0:F.all)==null?void 0:fe.find(Me=>Me.factor_type==="totp"&&Me.status==="verified");ue(!!Y)})},[e]),m.useEffect(()=>{sm()},[]);const Ww=F=>F.split(" ").map(Y=>Y[0]).join("").toUpperCase(),Hw=async()=>{if(!(!re||!e)){h(!0);try{const F=re.name.split(".").pop(),Y=`${e.id}.${F}`,{error:fe}=await k.storage.from("avatars").upload(Y,re,{upsert:!0});if(fe)throw fe;const{data:Me}=k.storage.from("avatars").getPublicUrl(Y),gs=Me.publicUrl,{error:Nn}=await k.auth.updateUser({data:{...e.user_metadata,avatar_url:gs}});if(Nn)throw Nn;u(gs),g({type:"success",text:"Profile picture updated!"}),oe(null),B("")}catch{g({type:"error",text:"Failed to update avatar."})}finally{h(!1)}}},Jw=async()=>{if(e){h(!0);try{const{error:F}=await k.auth.updateUser({data:{...e.user_metadata,avatar_url:""}});if(F)throw F;u(""),g({type:"success",text:"Profile picture removed."})}catch{g({type:"error",text:"Failed to remove avatar."})}finally{h(!1)}}},Kw=async F=>{F.preventDefault(),h(!0),g({type:"",text:""});try{const Y={};v&&(Y.data={full_name:s}),w&&o!==r&&(Y.email=o);const{error:fe}=await k.auth.updateUser(Y);if(fe)throw fe;g({type:"success",text:"Profile updated successfully!"}),y(!1),p(!1);const{data:{user:Me}}=await k.auth.getUser();Me&&(t(Me),a(Me.email||""),l(Me.email||""))}catch(Y){g({type:"error",text:"Failed to update profile. Please try again."}),console.error("Error updating profile:",Y)}finally{h(!1)}},nm=async F=>{const{data:Y}=await k.from("supervisor_eit_relationships").select("supervisor_profiles (id, full_name, email)").eq("eit_id",F).eq("status","active");Y&&$(Y.map(fe=>fe.supervisor_profiles).filter(fe=>fe))},Gw=async F=>{var Y;if(F.preventDefault(),L("idle"),W(""),!!D){h(!0);try{const{data:fe}=await k.from("supervisor_profiles").select("id, email, full_name").eq("email",D).single();if(!fe){L("notfound"),W("No supervisor found with that email."),h(!1);return}const{data:Me}=await k.from("supervisor_eit_relationships").select("id, status").eq("supervisor_id",fe.id).eq("eit_id",e==null?void 0:e.id).maybeSingle();if(Me&&Me.status==="pending"){L("pending"),W("A request is already pending for this supervisor."),h(!1);return}if(Me&&Me.status==="active"){L("already"),W("This supervisor is already connected."),h(!1);return}const{count:gs,error:Nn}=await k.from("supervisor_eit_relationships").select("id",{count:"exact",head:!0}).eq("supervisor_id",fe.id).eq("status","active");if(Nn)throw Nn;if(rs==="free"&&(typeof gs=="number"?gs:0)>=eo){L("error"),W("This supervisor has reached their free plan EIT limit and cannot accept more requests."),h(!1);return}const{error:rm}=await k.from("supervisor_eit_relationships").upsert({supervisor_id:fe.id,eit_id:e==null?void 0:e.id,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(rm)throw rm;if(!e){L("error"),W("User not found. Please re-login."),h(!1);return}await R3(fe.id,((Y=e.user_metadata)==null?void 0:Y.full_name)||e.email),L("success"),W("Request sent! Your supervisor will see it in their dashboard."),K(""),e&&nm(e.id)}catch(fe){console.error(fe),L("error"),W("Failed to send request. Please try again.")}finally{h(!1)}}};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"space-y-8 divide-y divide-gray-200",children:[i.jsxs("div",{className:"space-y-6 pt-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Profile"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Update your profile information and preferences."})]}),i.jsxs("section",{className:"card p-6 flex flex-col md:flex-row gap-6 items-center",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"relative",children:[J||c?i.jsx("img",{src:J||c,className:"w-24 h-24 rounded-full object-cover bg-slate-100",alt:"Profile"}):i.jsx("div",{className:"w-24 h-24 rounded-full bg-teal-500 flex items-center justify-center text-white text-3xl font-bold",children:Ww(s||r)}),(J||c)&&i.jsx("button",{className:"absolute -top-2 -right-2 bg-slate-100 rounded-full p-1 shadow hover:bg-slate-200",onClick:Jw,disabled:d,title:"Remove profile picture",style:{zIndex:10},children:i.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",className:"text-red-600",children:i.jsx("path",{d:"M6 6l8 8M6 14L14 6",strokeWidth:"2"})})})]}),re&&i.jsx("button",{className:"btn btn-primary mt-2",onClick:Hw,disabled:d,children:d?"Uploading...":"Save Photo"})]}),i.jsxs("form",{className:"flex-1 space-y-4",onSubmit:Kw,children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[i.jsx(tw,{})," Profile Information",P&&i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P==="eit"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:P.toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fullName",className:"label",children:"Full Name"}),v?i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"text",id:"fullName",value:s,onChange:F=>n(F.target.value),className:"input",placeholder:"Enter your full name"}),i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{type:"button",onClick:()=>y(!1),className:"btn btn-secondary",children:"Cancel"})})]}):i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{children:s||"Not set"}),i.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-teal-600 hover:text-teal-700",children:"Edit"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),w?i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"email",id:"newEmail",value:o,onChange:F=>l(F.target.value),className:"input",placeholder:"Enter your new email"}),i.jsx("p",{className:"text-sm text-slate-500",children:"After changing your email, you'll need to use the new email address to log in."}),i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn btn-secondary",children:"Cancel"})})]}):i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{children:r}),i.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-sm text-teal-600 hover:text-teal-700",children:"Edit"})]})]}),(v||w)&&i.jsx("button",{type:"submit",disabled:d,className:"btn btn-primary",children:d?"Saving...":"Save Changes"})]})]})]}),P==="eit"&&i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[i.jsx(El,{})," Program Timeline"]}),i.jsxs("form",{className:"flex flex-col gap-6",onSubmit:async F=>{if(F.preventDefault(),h(!0),g({type:"",text:""}),ss&&ns&&new Date(ns)<=new Date(ss)){g({type:"error",text:"End date must be after start date."}),h(!1);return}try{const{error:Y}=await k.from("eit_profiles").update({start_date:ss,target_date:ns}).eq("id",e==null?void 0:e.id);if(Y)throw Y;g({type:"success",text:"Timeline updated!"})}catch{g({type:"error",text:"Failed to update timeline."})}finally{h(!1)}},children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center w-full",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",value:ss||"",onChange:F=>em(F.target.value),className:"input"}),ss&&i.jsx("span",{className:"text-xs text-slate-500 mt-1",children:new Date(ss).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[i.jsxs("div",{className:"w-full max-w-xs flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-teal-500"}),i.jsx("div",{className:"flex-1 h-1 bg-slate-200 rounded-full relative",children:ss&&ns&&i.jsx("div",{className:"h-1 bg-teal-400 rounded-full absolute top-0 left-0",style:{width:(()=>{const F=new Date().getTime(),Y=new Date(ss).getTime(),fe=new Date(ns).getTime();return fe<=Y?"0%":`${Math.max(0,Math.min(100,(F-Y)/(fe-Y)*100))}%`})(),transition:"width 0.5s"}})}),i.jsx("span",{className:"w-2 h-2 rounded-full bg-teal-500"})]}),i.jsxs("div",{className:"flex justify-between w-full max-w-xs text-xs text-slate-400 mt-1",children:[i.jsx("span",{children:ss?new Date(ss).toLocaleDateString(void 0,{month:"short",year:"numeric"}):""}),i.jsx("span",{children:ns?new Date(ns).toLocaleDateString(void 0,{month:"short",year:"numeric"}):""})]})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Expected End Date"}),i.jsx("input",{type:"date",value:ns||"",onChange:F=>tm(F.target.value),className:"input"}),ns&&i.jsx("span",{className:"text-xs text-slate-500 mt-1",children:new Date(ns).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]})]}),i.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Saving...":"Save Dates"}),f.type==="success"&&i.jsxs("span",{className:"text-green-600 flex items-center gap-1 font-medium",children:[i.jsx(UP,{size:18})," Saved!"]}),f.type==="error"&&i.jsx("span",{className:"text-red-600 text-sm",children:f.text})]})]})]}),i.jsxs("div",{className:"pt-8",children:[i.jsxs("div",{className:"mb-6 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-2",children:"Choose Your Plan"}),i.jsx("p",{className:"text-gray-600 text-md max-w-2xl mx-auto",children:"Select the plan that best fits your needs"})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[i.jsxs("div",{className:`border ${rs==="free"?"border-blue-500":"border-gray-200"} rounded-2xl p-8 bg-gradient-to-br from-blue-50 to-white flex flex-col items-center shadow-sm`,children:[i.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2",children:"Free"}),i.jsx("p",{className:"text-5xl font-extrabold text-blue-800 mb-4",children:"$0"}),i.jsxs("ul",{className:"mb-6 w-full space-y-3",children:[i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""}),"Up to 5 documents"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""}),"Up to 5 SAOs"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""}),"Connect with 1 supervisor"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Standard support"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-red-500 mr-2",children:""})," AI Features"]})]}),rs==="free"?i.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-semibold text-sm shadow",children:"Current Plan"}):i.jsx("button",{onClick:()=>window.location.href="mailto:contact@accreda.com?subject=Downgrade to Free Plan",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full font-semibold text-sm shadow transition-colors",children:"Contact to Downgrade"})]}),i.jsxs("div",{className:`border ${rs==="pro"?"border-teal-500":"border-gray-200"} rounded-2xl p-8 bg-gradient-to-br from-teal-50 to-white flex flex-col items-center shadow-sm relative`,children:[i.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:i.jsx("span",{className:"bg-teal-500 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"Most Popular"})}),i.jsx("h3",{className:"text-2xl font-bold text-teal-900 mb-2",children:"Pro"}),i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("p",{className:"text-5xl font-extrabold text-teal-800",children:"$19.99"}),i.jsx("p",{className:"text-sm text-gray-600",children:"per month"}),i.jsx("p",{className:"text-sm text-teal-600 font-medium mt-1",children:"or $17.49/month billed yearly"})]}),i.jsxs("ul",{className:"mb-6 w-full space-y-3",children:[i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Unlimited documents"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Unlimited SAOs"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Unlimited supervisors"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Priority support"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," AI Features"]})]}),rs==="pro"?i.jsx("button",{onClick:()=>dc(!0),className:"inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full font-semibold text-sm shadow transition-colors",children:"Downgrade to Free"}):i.jsx("button",{onClick:()=>pt(!0),className:"inline-block bg-teal-600 hover:bg-teal-700 text-white px-6 py-2 rounded-full font-semibold text-sm shadow transition-colors",children:"Upgrade to Pro"})]}),i.jsxs("div",{className:`border ${rs==="enterprise"?"border-purple-500":"border-gray-200"} rounded-2xl p-8 bg-gradient-to-br from-purple-50 to-white flex flex-col items-center shadow-sm`,children:[i.jsx("h3",{className:"text-2xl font-bold text-purple-900 mb-2",children:"Enterprise"}),i.jsx("p",{className:"text-base font-semibold text-purple-800 mb-4",children:"Custom Pricing"}),i.jsxs("ul",{className:"mb-6 w-full space-y-3",children:[i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Everything in Pro"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Priority support"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Dedicated account manager"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Access to Supervisor Dashboard"]})]}),rs==="enterprise"?i.jsx("span",{className:"inline-block bg-purple-100 text-purple-800 px-4 py-2 rounded-full font-semibold text-sm shadow",children:"Current Plan"}):i.jsx("button",{onClick:()=>lt(!0),className:"inline-block bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-full font-semibold text-sm shadow transition-colors",children:"Contact Us"})]})]})]}),i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[i.jsx(Yb,{})," Security"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"label",children:"Password"}),x?i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{type:"password",id:"currentPassword",value:S,onChange:F=>j(F.target.value),className:"input",placeholder:"Current password"}),i.jsx("input",{type:"password",id:"newPassword",value:N,onChange:F=>_(F.target.value),className:"input",placeholder:"New password"}),i.jsx("input",{type:"password",id:"confirmPassword",value:C,onChange:F=>I(F.target.value),className:"input",placeholder:"Confirm new password"}),M&&i.jsx("p",{className:"text-sm text-red-600",children:M}),i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{type:"button",onClick:()=>b(!1),className:"btn btn-secondary",children:"Cancel"})})]}):i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{children:""}),i.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-teal-600 hover:text-teal-700",children:"Change"})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"label",children:"Two-Factor Authentication"}),he?i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-green-700 font-medium",children:"Enabled (TOTP)"}),i.jsx("button",{className:"btn btn-danger w-fit",onClick:async()=>{var F;H("idle"),xe("");try{const{data:Y}=await k.auth.mfa.listFactors(),fe=(F=Y==null?void 0:Y.all)==null?void 0:F.find(Me=>Me.factor_type==="totp"&&Me.status==="verified");fe&&(await k.auth.mfa.unenroll({factorId:fe.id}),ue(!1))}catch{xe("Failed to disable 2FA.")}},children:"Disable 2FA"}),le&&i.jsx("span",{className:"text-red-600 text-sm",children:le})]}):q==="enrolling"?i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{children:"Scan this QR code with your authenticator app:"}),z&&i.jsx("img",{src:z,alt:"TOTP QR Code",className:"w-40 h-40"}),i.jsx("input",{type:"text",className:"input mt-2",placeholder:"Enter 6-digit code",value:R,onChange:F=>T(F.target.value),maxLength:6}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"btn btn-primary w-fit",onClick:async()=>{H("verifying"),xe("");try{const{data:F,error:Y}=await k.auth.mfa.challenge({factorId:A});if(Y)throw Y;const{error:fe}=await k.auth.mfa.verify({factorId:A,challengeId:F.id,code:R});if(fe)throw fe;ue(!0),H("enabled")}catch{xe("Invalid code. Please try again."),H("enrolling")}},disabled:R.length!==6,children:"Verify"}),i.jsx("button",{className:"btn btn-secondary w-fit",onClick:async()=>{H("idle"),de(""),E(""),T(""),xe("");try{const{data:F}=await k.auth.mfa.listFactors();if(F!=null&&F.all)for(const Y of F.all)Y.factor_type==="totp"&&Y.status!=="verified"&&await k.auth.mfa.unenroll({factorId:Y.id})}catch{}},children:"Cancel"})]}),le&&i.jsx("span",{className:"text-red-600 text-sm",children:le})]}):i.jsx("button",{className:"btn btn-primary w-fit",onClick:async()=>{H("enrolling"),xe(""),de(""),E(""),T("");try{const{data:F}=await k.auth.mfa.listFactors();if(F!=null&&F.all)for(const Y of F.all)Y.factor_type==="totp"&&Y.status!=="verified"&&await k.auth.mfa.unenroll({factorId:Y.id})}catch{}try{const{data:F,error:Y}=await k.auth.mfa.enroll({factorType:"totp"});if(Y)throw Y;de(F.totp.qr_code),E(F.id)}catch{xe("Failed to start 2FA enrollment."),H("idle")}},children:"Set up Two-Factor Authentication"})]})]})]}),P==="eit"&&i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[i.jsx(Lf,{})," Supervisor Connections"]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:"Current Connections"}),ee.length===0?i.jsx("div",{className:"text-slate-400",children:"No active supervisor connections."}):i.jsx("ul",{className:"divide-y divide-slate-200",children:ee.map(F=>i.jsxs("li",{className:"py-2 flex flex-col md:flex-row md:items-center md:justify-between",children:[i.jsx("span",{className:"font-medium text-slate-800",children:F.full_name}),i.jsx("span",{className:"text-slate-500 text-sm",children:F.email})]},F.id))})]}),i.jsx("div",{className:"border-t border-slate-200 my-4"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:"Connect with a New Supervisor"}),rs==="free"&&ee.length>=eo&&i.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-yellow-900 font-semibold text-center",children:"You have reached your supervisor connection limit for the Free plan. Upgrade to add more."}),i.jsxs("form",{className:"flex flex-col md:flex-row gap-4 items-start md:items-end",onSubmit:Gw,children:[i.jsxs("div",{className:"flex-1 w-full",children:[i.jsx("label",{htmlFor:"supervisorEmail",className:"label",children:"Supervisor Email"}),i.jsx("input",{type:"email",id:"supervisorEmail",value:D,onChange:F=>K(F.target.value),className:"input w-full",placeholder:"Enter supervisor's email",required:!0,disabled:rs==="free"&&ee.length>=eo})]}),i.jsx("button",{type:"submit",className:"btn btn-primary whitespace-nowrap",disabled:d||rs==="free"&&ee.length>=eo,children:d?"Sending...":"Send Request"})]}),G&&i.jsx("div",{className:`mt-3 text-sm p-2 rounded-md ${se==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:G})]})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(_a,{className:"h-6 w-6 text-gray-400 mr-2"}),i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Notification Preferences"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Supervisor Reviews"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when you receive new reviews or updates"})]}),i.jsx(Fn,{checked:hc,onChange:zw,className:`${hc?"bg-teal-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2`,children:i.jsx("span",{className:`${hc?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"SAO Feedback"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when you receive feedback on your SAOs"})]}),i.jsx(Fn,{checked:fc,onChange:Vw,className:`${fc?"bg-teal-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2`,children:i.jsx("span",{className:`${fc?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Relationship Updates"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when your supervisor relationship status changes"})]}),i.jsx(Fn,{checked:mc,onChange:qw,className:`${mc?"bg-teal-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2`,children:i.jsx("span",{className:`${mc?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Skill Updates"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when your skills are updated or approved"})]}),i.jsx(Fn,{checked:pc,onChange:Bw,className:`${pc?"bg-teal-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2`,children:i.jsx("span",{className:`${pc?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})]})]}),i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[i.jsx(_a,{})," Notifications"]}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Coming soon: Manage your email and in-app notification preferences."})]}),i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[i.jsx(ew,{})," Appearance"]}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Coming soon: Switch between light and dark mode."})]}),i.jsxs("section",{className:"card p-6 border-red-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-red-600 flex items-center gap-2 mb-2",children:[i.jsx(Qn,{})," Danger Zone"]}),i.jsx("button",{className:"btn btn-danger",children:"Delete Account"}),i.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"This action is irreversible. Your data will be permanently deleted."})]}),f.text&&i.jsx("div",{className:`fixed bottom-4 right-4 p-4 rounded-md z-50 ${f.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.text})]})}),et&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600",onClick:()=>{pt(!1),kn(!1),_t(null)},"aria-label":"Close",children:""}),i.jsx("h2",{className:"text-xl font-bold mb-4 text-teal-800",children:"Upgrade to Pro"}),Xa?i.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-md text-sm mb-4",children:"Your request has been sent successfully. We'll get back to you soon!"}):i.jsxs("form",{onSubmit:async F=>{F.preventDefault(),Le(!0),_t(null),kn(!1);try{const Y=await fetch("https://bbixvnkqroskholbxkgj.supabase.co/functions/v1/send-support-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU"},body:JSON.stringify({email:Ga,subject:"Pro Plan Upgrade Request",message:`Name: ${uc}

${hi}`,issueType:"pro",mode:"help"})}),fe=await Y.json();if(!Y.ok)throw new Error(fe.error||"Failed to send message");kn(!0),Ka(""),Ya(""),te("")}catch(Y){_t(Y instanceof Error?Y.message:"Failed to send message. Please try again later.")}finally{Le(!1)}},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",className:"input",value:uc,onChange:F=>Ka(F.target.value),required:!0,disabled:ne})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",className:"input",value:Ga,onChange:F=>Ya(F.target.value),required:!0,disabled:ne})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),i.jsx("textarea",{className:"input",rows:4,value:hi,onChange:F=>te(F.target.value),required:!0,disabled:ne})]}),Ue&&i.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm",children:Ue}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{pt(!1),kn(!1),_t(null)},disabled:ne,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ne,children:ne?"Sending...":"Send Request"})]})]})]})}),mt&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600",onClick:()=>{lt(!1),di(!1),ui(null)},"aria-label":"Close",children:""}),i.jsx("h2",{className:"text-xl font-bold mb-4 text-purple-800",children:"Contact Us"}),Wf?i.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-md text-sm mb-4",children:"Your message has been sent successfully. We'll get back to you soon!"}):i.jsxs("form",{onSubmit:async F=>{F.preventDefault(),Sn(!0),ui(null),di(!1);try{const Y=await fetch("https://bbixvnkqroskholbxkgj.supabase.co/functions/v1/send-support-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU"},body:JSON.stringify({email:wn,subject:"Enterprise Plan Inquiry",message:`Name: ${Ls}
Corporation: ${De}

${$s}`,issueType:"enterprise",mode:"help"})}),fe=await Y.json();if(!Y.ok)throw new Error(fe.error||"Failed to send message");di(!0),Wt(""),je(""),Ms(""),jn("")}catch(Y){ui(Y instanceof Error?Y.message:"Failed to send message. Please try again later.")}finally{Sn(!1)}},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",className:"input",value:Ls,onChange:F=>Wt(F.target.value),required:!0,disabled:ps})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",className:"input",value:wn,onChange:F=>je(F.target.value),required:!0,disabled:ps})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Corporation Name"}),i.jsx("input",{type:"text",className:"input",value:De,onChange:F=>Ms(F.target.value),required:!0,disabled:ps})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),i.jsx("textarea",{className:"input",rows:4,value:$s,onChange:F=>jn(F.target.value),required:!0,disabled:ps})]}),Ht&&i.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm",children:Ht}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{lt(!1),di(!1),ui(null)},disabled:ps,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ps,children:ps?"Sending...":"Send Message"})]})]})]})}),Fw&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600",onClick:()=>{dc(!1),Za(!1),Qa(null)},"aria-label":"Close",children:""}),i.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-800",children:"Downgrade to Free"}),Uw?i.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-md text-sm mb-4",children:"Your downgrade request has been sent successfully. We'll get back to you soon!"}):i.jsxs("form",{onSubmit:async F=>{F.preventDefault(),Qf(!0),Qa(null),Za(!1);try{const Y=await fetch("https://bbixvnkqroskholbxkgj.supabase.co/functions/v1/send-support-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU"},body:JSON.stringify({email:Kf,subject:"Downgrade to Free Plan Request",message:`Name: ${Hf}

${Yf}`,issueType:"downgrade",mode:"help"})}),fe=await Y.json();if(!Y.ok)throw new Error(fe.error||"Failed to send message");Za(!0),Jf(""),Gf(""),Xf("")}catch(Y){Qa(Y instanceof Error?Y.message:"Failed to send message. Please try again later.")}finally{Qf(!1)}},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",className:"input",value:Hf,onChange:F=>Jf(F.target.value),required:!0,disabled:ir})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",className:"input",value:Kf,onChange:F=>Gf(F.target.value),required:!0,disabled:ir})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),i.jsx("textarea",{className:"input",rows:4,value:Yf,onChange:F=>Xf(F.target.value),required:!0,disabled:ir})]}),Zf&&i.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm",children:Zf}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{dc(!1),Za(!1),Qa(null)},disabled:ir,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ir,children:ir?"Sending...":"Send Request"})]})]})]})})]})},Wa=Bt((e,t)=>({saos:[],loading:!1,error:null,lastFetched:null,clearState:()=>e({saos:[],loading:!1,error:null,lastFetched:null}),createSAO:async(s,n,r,a)=>{var o;e({loading:!0,error:null});try{console.log("Creating new SAO...");const{data:{user:l},error:c}=await k.auth.getUser();if(c)throw console.error("Auth error:",c),new Error("Authentication error: "+c.message);if(!l)throw new Error("No authenticated user found");await k.from("eit_profiles").upsert({id:l.id,full_name:((o=l.user_metadata)==null?void 0:o.full_name)||"",email:l.email||""}),console.log("Creating SAO:",{title:s,content:n,skills:r,eit_id:l.id});const{data:u,error:d}=await k.from("saos").insert([{eit_id:l.id,title:s,content:n,status:a}]).select().single();if(d)throw console.error("Error creating SAO:",{error:d,message:d.message,details:d.details,hint:d.hint,code:d.code}),d;console.log("SAO created successfully:",u);const h=r.map(g=>({sao_id:u.id,skill_id:g.id,category_name:g.category_name||""}));console.log("Creating SAO skills relationships:",h);const{error:f}=await k.from("sao_skills").insert(h);if(f)throw console.error("Error creating SAO skills:",{error:f,message:f.message,details:f.details,hint:f.hint,code:f.code}),f;console.log("SAO skills created successfully"),await t().loadUserSAOs()}catch(l){throw console.error("Error in createSAO:",{error:l,message:l.message,details:l.details,hint:l.hint}),e({error:`Failed to create SAO: ${l.message||"Unknown error"}`}),l}finally{e({loading:!1})}},updateSAO:async(s,n,r,a,o)=>{e({loading:!0,error:null});try{console.log("Updating SAO:",{id:s,title:n,content:r,skills:a});const{data:{user:l},error:c}=await k.auth.getUser();if(c)throw console.error("Auth error:",c),new Error("Authentication error: "+c.message);if(!l)throw new Error("No authenticated user found");const{error:u}=await k.from("saos").update({title:n,content:r,status:o}).eq("id",s).eq("eit_id",l.id);if(u)throw console.error("Error updating SAO:",u),u;const{error:d}=await k.from("sao_skills").delete().eq("sao_id",s);if(d)throw console.error("Error deleting existing SAO skills:",d),d;const h=a.map(g=>({sao_id:s,skill_id:g.id,category_name:g.category_name||""})),{error:f}=await k.from("sao_skills").insert(h);if(f)throw console.error("Error updating SAO skills:",f),f;e(g=>({saos:g.saos.map(v=>v.id===s?{...v,title:n,content:r,status:o,skills:a}:v)})),await t().loadUserSAOs()}catch(l){throw console.error("Error in updateSAO:",{error:l,message:l.message,details:l.details,hint:l.hint}),e({error:`Failed to update SAO: ${l.message||"Unknown error"}`}),l}finally{e({loading:!1})}},deleteSAO:async s=>{e({loading:!0,error:null});try{console.log("Deleting SAO:",s);const{data:{user:n},error:r}=await k.auth.getUser();if(r)throw console.error("Auth error:",r),new Error("Authentication error: "+r.message);if(!n)throw new Error("No authenticated user found");const{error:a}=await k.from("sao_skills").delete().eq("sao_id",s);if(a)throw console.error("Error deleting SAO skills:",a),a;const{error:o}=await k.from("saos").delete().eq("id",s).eq("eit_id",n.id);if(o)throw console.error("Error deleting SAO:",o),o;e(l=>({saos:l.saos.filter(c=>c.id!==s)}))}catch(n){throw console.error("Error in deleteSAO:",{error:n,message:n.message,details:n.details,hint:n.hint}),e({error:`Failed to delete SAO: ${n.message||"Unknown error"}`}),n}finally{e({loading:!1})}},requestFeedback:async(s,n)=>{var r;e({loading:!0,error:null});try{const{data:{user:a}}=await k.auth.getUser();if(!a)throw new Error("No authenticated user found");const{data:o}=await k.from("saos").select("title").eq("id",s).single();await k.from("sao_feedback").delete().eq("sao_id",s),await k.from("saos").update({status:"in-review"}).eq("id",s),await k.from("sao_feedback").insert([{sao_id:s,supervisor_id:n,feedback:"",status:"pending"}]),await D3(n,((r=a.user_metadata)==null?void 0:r.full_name)||a.email,(o==null?void 0:o.title)||"SAO"),await t().loadUserSAOs(!0)}catch(a){throw e({error:`Failed to request feedback: ${a.message||"Unknown error"}`}),a}finally{e({loading:!1})}},submitFeedback:async(s,n)=>{e({loading:!0,error:null});try{const{data:{user:r}}=await k.auth.getUser();if(!r)throw new Error("No authenticated user found");const{data:a}=await k.from("saos").select("eit_id, title").eq("id",s).single();await k.from("sao_feedback").update({feedback:n,status:"submitted"}).eq("sao_id",s).eq("supervisor_id",r.id),a!=null&&a.eit_id&&await O3(a.eit_id,(a==null?void 0:a.title)||"SAO",1),await t().loadUserSAOs(!0)}catch(r){throw e({error:`Failed to submit feedback: ${r.message||"Unknown error"}`}),r}finally{e({loading:!1})}},resolveFeedback:async s=>{e({loading:!0,error:null});try{const{error:n}=await k.from("sao_feedback").update({status:"resolved"}).eq("id",s);if(n)throw n;await t().loadUserSAOs(!0)}catch(n){throw e({error:`Failed to resolve feedback: ${n.message||"Unknown error"}`}),n}finally{e({loading:!1})}},loadUserSAOs:async(s=!1)=>{const n=Date.now(),r=t().lastFetched;if(!(!s&&r&&n-r<5*60*1e3)){e({loading:!0,error:null});try{console.log("Loading user SAOs...");const{data:{user:a},error:o}=await k.auth.getUser();if(o)throw console.error("Auth error:",o),new Error("Authentication error: "+o.message);if(!a)throw new Error("No authenticated user found");console.log("Fetching SAOs for user:",a.id);const{data:l,error:c}=await k.from("saos").select(`
          *,
          sao_skills (
            skill_id,
            category_name
          ),
          sao_feedback:sao_feedback_sao_id_fkey (
            id,
            supervisor_id,
            feedback,
            status,
            created_at,
            updated_at
          )
        `).eq("eit_id",a.id).order("created_at",{ascending:!1});if(c)throw console.error("Error fetching SAOs:",c),c;console.log("SAOs fetched:",l==null?void 0:l.length);const u=(l==null?void 0:l.map(d=>({...d,skills:d.sao_skills.map(h=>({id:h.skill_id,name:"",category_name:h.category_name,status:"not-started"})),feedback:d.sao_feedback||[]})))||[];console.log("Transformed SAOs:",u.length),e({saos:u,lastFetched:n})}catch(a){throw console.error("Error in loadUserSAOs:",{error:a,message:a.message,details:a.details,hint:a.hint}),e({error:`Failed to load SAOs: ${a.message||"Unknown error"}`}),a}finally{e({loading:!1})}}},fetchAnnotations:async s=>{e({loading:!0,error:null});try{const{data:n,error:r}=await k.from("sao_annotation").select("*").eq("sao_id",s).order("created_at",{ascending:!0});if(r)throw r;return n}catch(n){return e({error:`Failed to fetch annotations: ${n.message||"Unknown error"}`}),[]}finally{e({loading:!1})}},addAnnotation:async(s,n,r)=>{var a;e({loading:!0,error:null});try{const{data:{user:o},error:l}=await k.auth.getUser();if(l)throw l;if(!o)throw new Error("No authenticated user found");let c=null,u="eit",d=((a=o.user_metadata)==null?void 0:a.full_name)||o.email||"Unknown";const{data:h}=await k.from("supervisor_profiles").select("id, full_name").eq("id",o.id).single();if(h)c=h.id,u="supervisor",d=h.full_name||d;else{const{data:g}=await k.from("eit_profiles").select("full_name").eq("id",o.id).single();g&&g.full_name&&(d=g.full_name)}const{error:f}=await k.from("sao_annotation").insert([{sao_id:s,supervisor_id:c,created_by:o.id,author_name:d,author_role:u,location:n,annotation:r,status:"active"}]);if(f)throw f}catch(o){throw e({error:`Failed to add annotation: ${o.message||"Unknown error"}`}),o}finally{e({loading:!1})}},fetchReplies:async s=>{e({loading:!0,error:null});try{const{data:n,error:r}=await k.from("sao_annotation_replies").select("*").eq("annotation_id",s).order("created_at",{ascending:!0});if(r)throw r;return n||[]}catch(n){return e({error:`Failed to fetch replies: ${n.message||"Unknown error"}`}),[]}finally{e({loading:!1})}},addReply:async(s,n)=>{e({loading:!0,error:null});try{const{data:{user:r},error:a}=await k.auth.getUser();if(a)throw a;if(!r)throw new Error("No authenticated user found");const{error:o}=await k.from("sao_annotation_replies").insert([{annotation_id:s,content:n,author_id:r.id}]);if(o)throw o}catch(r){throw e({error:`Failed to add reply: ${r.message||"Unknown error"}`}),r}finally{e({loading:!1})}},resolveAnnotation:async s=>{e({loading:!0,error:null});try{const{error:n}=await k.from("sao_annotation").update({resolved:!0}).eq("id",s);if(n)throw n}catch(n){throw e({error:`Failed to resolve annotation: ${n.message||"Unknown error"}`}),n}finally{e({loading:!1})}},deleteAnnotation:async s=>{e({loading:!0,error:null});try{const{error:n}=await k.from("sao_annotation").delete().eq("id",s);if(n)throw n}catch(n){throw e({error:`Failed to delete annotation: ${n.message||"Unknown error"}`}),n}finally{e({loading:!1})}},updateAnnotationStatus:async(s,n)=>{e({loading:!0,error:null});try{const{error:r}=await k.from("sao_annotation").update({status:n}).eq("id",s);if(r)throw r}catch(r){throw e({error:`Failed to update annotation status: ${r.message||"Unknown error"}`}),r}finally{e({loading:!1})}}})),Hd=({isOpen:e,onClose:t,children:s})=>e?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-lg w-full relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600 text-xl font-bold",onClick:t,"aria-label":"Close",children:""}),s]})}):null,Rw=({saoId:e,content:t,readOnly:s})=>{const{fetchAnnotations:n,addAnnotation:r,fetchReplies:a,addReply:o,resolveAnnotation:l,deleteAnnotation:c}=Wa(),[u,d]=m.useState([]),[h,f]=m.useState({}),[g,v]=m.useState(null),[y,w]=m.useState(null),[p,x]=m.useState(""),[b,S]=m.useState(!1),[j,N]=m.useState(null),[_,C]=m.useState(!1),[I,M]=m.useState(null),[V,Z]=m.useState(null),[ie,re]=m.useState({}),[oe,J]=m.useState(null),[B,P]=m.useState({}),O=m.useRef(null),D=m.useRef({}),K=m.useRef({});m.useEffect(()=>{(async()=>{const he=await n(e);d(he);const ue={},z={};for(const de of he)ue[de.id]=await a(de.id);f(ue),P(z)})()},[e,n,a]),u.map($=>({id:$.id,start:$.location.start,end:$.location.end,comment:$.annotation,author_role:$.author_role,author_name:$.author_name}));const se=u.filter($=>!$.resolved);function L($,he,ue){let z=0;function de(A){if(A===he)return z+=ue,!0;if(A.nodeType===Node.TEXT_NODE)z+=(A.textContent||"").length;else for(let E of Array.from(A.childNodes))if(de(E))return!0;return!1}return de($),z}const G=$=>{const he=window.getSelection();if(!he||!he.rangeCount){Z(null);return}const ue=he.getRangeAt(0);if(!O.current||!O.current.contains(ue.commonAncestorContainer)){Z(null);return}if(he.isCollapsed){Z(null);return}const z=L(O.current,ue.startContainer,ue.startOffset),de=L(O.current,ue.endContainer,ue.endOffset);if(z!==de){const A=ue.getBoundingClientRect();Z({x:A.right-O.current.getBoundingClientRect().left,y:A.bottom-O.current.getBoundingClientRect().top+window.scrollY}),N({start:Math.min(z,de),end:Math.max(z,de)})}else Z(null)},W=()=>{if(!se.length)return t;let $=[],he=0;return[...se].sort((z,de)=>z.location.start-de.location.start).forEach((z,de)=>{const A=z.author_role==="supervisor",E=z.resolved,R=E?"#e9ecef":A?g===z.id||y===z.id?"#ffe066":"#fff3bf":g===z.id||y===z.id?"#d0ebff":"#e7f5ff",T=A?"#ffd43b":"#228be6";$.push(t.slice(he,z.location.start)),$.push(i.jsxs("span",{ref:q=>D.current[z.id]=q,style:{background:R,borderRadius:3,boxShadow:g===z.id||y===z.id?`0 0 0 2px ${T}`:void 0,cursor:"pointer",position:"relative",transition:"background 0.2s, box-shadow 0.2s",padding:"0 2px",opacity:E?.6:1},onClick:q=>{v(z.id),J(z.id),setTimeout(()=>{var H;(H=K.current[z.id])==null||H.scrollIntoView({behavior:"smooth",block:"center"})},100)},onMouseEnter:()=>w(z.id),onMouseLeave:()=>w(null),children:[t.slice(z.location.start,z.location.end),i.jsx("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:2,color:A?"#fab005":"#228be6",cursor:"pointer",position:"relative",top:2},title:"View comment",onClick:q=>{var H;q.stopPropagation(),v(z.id),J(z.id),(H=K.current[z.id])==null||H.scrollIntoView({behavior:"smooth",block:"center"})},children:i.jsx(Xn,{size:14})}),oe===z.id&&g===z.id&&i.jsxs("div",{style:{position:"absolute",left:0,top:"100%",zIndex:100,background:"white",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",minWidth:280,padding:12,marginTop:4},onClick:q=>q.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"text-xs text-slate-500",children:[z.author_name," (",A?"Supervisor":"EIT",")",E&&i.jsx("span",{className:"ml-2 text-green-600 font-semibold",children:"[Resolved]"})]}),i.jsx("button",{onClick:()=>J(null),className:"text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:16})})]}),i.jsx("div",{className:"text-slate-800 text-sm mb-2",children:z.annotation}),h[z.id]&&h[z.id].length>0&&i.jsx("div",{className:"mb-2",children:h[z.id].map(q=>i.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[i.jsx(Gg,{size:14,className:"mt-1 text-slate-400"}),i.jsx("div",{children:i.jsx("span",{className:"text-xs text-slate-500",children:q.content})})]},q.id))}),!E&&i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx("input",{type:"text",className:"input input-sm flex-1",placeholder:"Reply...",value:ie[z.id]||"",onChange:q=>re({...ie,[z.id]:q.target.value})}),i.jsx("button",{className:"btn btn-primary btn-sm",onClick:async()=>{var H;if(!z.id){console.error("Tried to fetch replies for undefined annotation id");return}if(!((H=ie[z.id])!=null&&H.trim()))return;await o(z.id,ie[z.id]),re({...ie,[z.id]:""});const q=await a(z.id);f(le=>({...le,[z.id]:q}))},children:"Reply"})]}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[!E&&i.jsxs("button",{className:"btn btn-success btn-xs",onClick:async()=>{if(!z.id){console.error("Tried to resolve annotation with undefined id");return}await l(z.id);const q=await n(e);d(q),P(H=>({...H,[z.id]:!0})),g===z.id&&v(null),oe===z.id&&J(null)},children:[i.jsx(Fd,{size:14,className:"mr-1"}),"Resolve"]}),E&&i.jsxs("button",{className:"btn btn-danger btn-xs",onClick:async()=>{if(!z.id){console.error("Tried to delete annotation with undefined id");return}await c(z.id);const q=await n(e);d(q),oe===z.id&&J(null),g===z.id&&v(null)},children:[i.jsx(Qn,{size:14,className:"mr-1"}),"Delete"]})]})]})]},z.id)),he=z.location.end}),$.push(t.slice(he)),$},ee=async()=>{if(!(!j||!p.trim())){C(!0),M(null);try{await r(e,j,p),x(""),N(null),S(!1),Z(null);const $=await n(e);d($)}catch($){M($.message||"Failed to save annotation")}finally{C(!1)}}};return m.useEffect(()=>{g&&!se.some($=>$.id===g)&&(J(null),v(null))},[se,g]),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("div",{style:{flex:1,minWidth:0,position:"relative"},children:[i.jsx("div",{ref:O,style:{whiteSpace:"pre-wrap",cursor:s?"default":"text",minHeight:80},onMouseUp:s?void 0:G,children:W()}),!s&&V&&j&&!b&&i.jsx("button",{style:{position:"absolute",left:V.x,top:V.y,zIndex:10,background:"#fab005",color:"white",border:"none",borderRadius:6,padding:"4px 10px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",cursor:"pointer",fontWeight:600},onClick:()=>S(!0),children:"Add comment"}),!s&&b&&i.jsxs("div",{className:"mt-2 flex flex-col gap-2 bg-yellow-50 p-3 rounded shadow max-w-md",style:{position:"absolute",left:(V==null?void 0:V.x)||0,top:(V==null?void 0:V.y)||0,zIndex:20},children:[i.jsx("textarea",{value:p,onChange:$=>x($.target.value),placeholder:"Enter comment...",className:"w-full px-3 py-2 border border-slate-300 rounded-md",rows:2,autoFocus:!0}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"btn btn-primary",onClick:ee,disabled:!p.trim()||_,children:_?"Saving...":"Save Comment"}),i.jsx("button",{className:"btn btn-secondary",onClick:()=>{S(!1),N(null),x(""),Z(null)},disabled:_,children:"Cancel"})]}),I&&i.jsx("div",{className:"text-red-600 text-sm mt-1",children:I})]})]}),i.jsxs("div",{className:"w-72 border-l pl-4 flex flex-col gap-3 bg-slate-50 max-h-[400px] overflow-y-auto",children:[i.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Comments"}),se.length===0&&i.jsx("div",{className:"text-slate-400 text-sm",children:"No comments yet."}),se.map($=>{const he=$.author_role==="supervisor",ue=$.resolved;return i.jsxs("div",{ref:z=>K.current[$.id]=z,className:`p-2 rounded cursor-pointer transition-all ${g===$.id?he?"bg-yellow-100":"bg-blue-100":y===$.id?he?"bg-yellow-50":"bg-blue-50":"hover:bg-slate-100"}`,onClick:()=>v($.id),onMouseEnter:()=>w($.id),onMouseLeave:()=>w(null),style:{borderLeft:g===$.id?he?"3px solid #fab005":"3px solid #228be6":"3px solid transparent",opacity:ue?.6:1},children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-1 italic max-w-full truncate",children:[$.author_name?`${$.author_name} (${he?"Supervisor":"EIT"})`:"",ue&&i.jsx("span",{className:"ml-2 text-green-600 font-semibold",children:"[Resolved]"}),i.jsx("span",{className:"ml-2",children:t.slice($.location.start,$.location.end)})]}),i.jsx("div",{className:"text-slate-800 text-sm mb-1",children:$.annotation}),h[$.id]&&h[$.id].length>0&&i.jsx("div",{className:"mb-1 ml-4",children:h[$.id].map(z=>i.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[i.jsx(Gg,{size:14,className:"mt-1 text-slate-400"}),i.jsx("div",{children:i.jsx("span",{className:"text-xs text-slate-500",children:z.content})})]},z.id))}),!ue&&i.jsxs("div",{className:"flex gap-2 mt-1 ml-4",children:[i.jsx("input",{type:"text",className:"input input-xs flex-1",placeholder:"Reply...",value:ie[$.id]||"",onChange:z=>re({...ie,[$.id]:z.target.value})}),i.jsx("button",{className:"btn btn-primary btn-xs",onClick:async()=>{var de;if(!$.id){console.error("Tried to fetch replies for undefined annotation id");return}if(!((de=ie[$.id])!=null&&de.trim()))return;await o($.id,ie[$.id]),re({...ie,[$.id]:""});const z=await a($.id);f(A=>({...A,[$.id]:z}))},children:"Reply"})]}),i.jsxs("div",{className:"flex gap-2 mt-2 ml-4",children:[!ue&&i.jsxs("button",{className:"btn btn-success btn-xs",onClick:async()=>{if(!$.id){console.error("Tried to resolve annotation with undefined id");return}await l($.id);const z=await n(e);d(z),P(de=>({...de,[$.id]:!0})),g===$.id&&v(null),oe===$.id&&J(null)},children:[i.jsx(Fd,{size:14,className:"mr-1"}),"Resolve"]}),ue&&i.jsxs("button",{className:"btn btn-danger btn-xs",onClick:async()=>{if(!$.id){console.error("Tried to delete annotation with undefined id");return}await c($.id);const z=await n(e);d(z),oe===$.id&&J(null),g===$.id&&v(null)},children:[i.jsx(Qn,{size:14,className:"mr-1"}),"Delete"]})]})]},$.id)})]})]})};let M3={data:""},$3=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||M3,F3=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,U3=/\/\*[^]*?\*\/|  +/g,fx=/\n+/g,Gs=(e,t)=>{let s="",n="",r="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?s=a+" "+o+";":n+=a[1]=="f"?Gs(o,a):a+"{"+Gs(o,a[1]=="k"?"":t)+"}":typeof o=="object"?n+=Gs(o,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Gs.p?Gs.p(a,o):a+":"+o+";")}return s+(t&&r?t+"{"+r+"}":r)+n},xs={},Iw=e=>{if(typeof e=="object"){let t="";for(let s in e)t+=s+Iw(e[s]);return t}return e},z3=(e,t,s,n,r)=>{let a=Iw(e),o=xs[a]||(xs[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!xs[o]){let c=a!==e?e:(u=>{let d,h,f=[{}];for(;d=F3.exec(u.replace(U3,""));)d[4]?f.shift():d[3]?(h=d[3].replace(fx," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][d[1]]=d[2].replace(fx," ").trim();return f[0]})(e);xs[o]=Gs(r?{["@keyframes "+o]:c}:c,s?"":"."+o)}let l=s&&xs.g?xs.g:null;return s&&(xs.g=xs[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(xs[o],t,n,l),o},V3=(e,t,s)=>e.reduce((n,r,a)=>{let o=t[a];if(o&&o.call){let l=o(s),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Gs(l,""):l===!1?"":l}return n+r+(o??"")},"");function cc(e){let t=this||{},s=e.call?e(t.p):e;return z3(s.unshift?s.raw?V3(s,[].slice.call(arguments,1),t.p):s.reduce((n,r)=>Object.assign(n,r&&r.call?r(t.p):r),{}):s,$3(t.target),t.g,t.o,t.k)}let Ow,Jd,Kd;cc.bind({g:1});let As=cc.bind({k:1});function q3(e,t,s,n){Gs.p=t,Ow=e,Jd=s,Kd=n}function bn(e,t){let s=this||{};return function(){let n=arguments;function r(a,o){let l=Object.assign({},a),c=l.className||r.className;s.p=Object.assign({theme:Jd&&Jd()},l),s.o=/ *go\d+/.test(c),l.className=cc.apply(s,n)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Kd&&u[0]&&Kd(l),Ow(u,l)}return r}}var B3=e=>typeof e=="function",Tl=(e,t)=>B3(e)?e(t):e,W3=(()=>{let e=0;return()=>(++e).toString()})(),Dw=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),H3=20,Lw=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,H3)};case 1:return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case 2:let{toast:s}=t;return Lw(e,{type:e.toasts.find(a=>a.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+r}))}}},Ko=[],Un={toasts:[],pausedAt:void 0},rr=e=>{Un=Lw(Un,e),Ko.forEach(t=>{t(Un)})},J3={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},K3=(e={})=>{let[t,s]=m.useState(Un),n=m.useRef(Un);m.useEffect(()=>(n.current!==Un&&s(Un),Ko.push(s),()=>{let a=Ko.indexOf(s);a>-1&&Ko.splice(a,1)}),[]);let r=t.toasts.map(a=>{var o,l,c;return{...e,...e[a.type],...a,removeDelay:a.removeDelay||((o=e[a.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:a.duration||((l=e[a.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||J3[a.type],style:{...e.style,...(c=e[a.type])==null?void 0:c.style,...a.style}}});return{...t,toasts:r}},G3=(e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(s==null?void 0:s.id)||W3()}),Ha=e=>(t,s)=>{let n=G3(t,e,s);return rr({type:2,toast:n}),n.id},Oe=(e,t)=>Ha("blank")(e,t);Oe.error=Ha("error");Oe.success=Ha("success");Oe.loading=Ha("loading");Oe.custom=Ha("custom");Oe.dismiss=e=>{rr({type:3,toastId:e})};Oe.remove=e=>rr({type:4,toastId:e});Oe.promise=(e,t,s)=>{let n=Oe.loading(t.loading,{...s,...s==null?void 0:s.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let a=t.success?Tl(t.success,r):void 0;return a?Oe.success(a,{id:n,...s,...s==null?void 0:s.success}):Oe.dismiss(n),r}).catch(r=>{let a=t.error?Tl(t.error,r):void 0;a?Oe.error(a,{id:n,...s,...s==null?void 0:s.error}):Oe.dismiss(n)}),e};var Y3=(e,t)=>{rr({type:1,toast:{id:e,height:t}})},X3=()=>{rr({type:5,time:Date.now()})},Xi=new Map,Q3=1e3,Z3=(e,t=Q3)=>{if(Xi.has(e))return;let s=setTimeout(()=>{Xi.delete(e),rr({type:4,toastId:e})},t);Xi.set(e,s)},e5=e=>{let{toasts:t,pausedAt:s}=K3(e);m.useEffect(()=>{if(s)return;let a=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&Oe.dismiss(l.id);return}return setTimeout(()=>Oe.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,s]);let n=m.useCallback(()=>{s&&rr({type:6,time:Date.now()})},[s]),r=m.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=t.filter(g=>(g.position||u)===(a.position||u)&&g.height),h=d.findIndex(g=>g.id===a.id),f=d.filter((g,v)=>v<h&&g.visible).length;return d.filter(g=>g.visible).slice(...l?[f+1]:[0,f]).reduce((g,v)=>g+(v.height||0)+c,0)},[t]);return m.useEffect(()=>{t.forEach(a=>{if(a.dismissed)Z3(a.id,a.removeDelay);else{let o=Xi.get(a.id);o&&(clearTimeout(o),Xi.delete(a.id))}})},[t]),{toasts:t,handlers:{updateHeight:Y3,startPause:X3,endPause:n,calculateOffset:r}}},t5=As`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,s5=As`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,n5=As`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,r5=bn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${t5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${s5} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${n5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,i5=As`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,a5=bn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${i5} 1s linear infinite;
`,o5=As`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,l5=As`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,c5=bn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${o5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${l5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,u5=bn("div")`
  position: absolute;
`,d5=bn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,h5=As`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,f5=bn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${h5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,m5=({toast:e})=>{let{icon:t,type:s,iconTheme:n}=e;return t!==void 0?typeof t=="string"?m.createElement(f5,null,t):t:s==="blank"?null:m.createElement(d5,null,m.createElement(a5,{...n}),s!=="loading"&&m.createElement(u5,null,s==="error"?m.createElement(r5,{...n}):m.createElement(c5,{...n})))},p5=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,g5=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,x5="0%{opacity:0;} 100%{opacity:1;}",v5="0%{opacity:1;} 100%{opacity:0;}",y5=bn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,b5=bn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,w5=(e,t)=>{let s=e.includes("top")?1:-1,[n,r]=Dw()?[x5,v5]:[p5(s),g5(s)];return{animation:t?`${As(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${As(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},j5=m.memo(({toast:e,position:t,style:s,children:n})=>{let r=e.height?w5(e.position||t||"top-center",e.visible):{opacity:0},a=m.createElement(m5,{toast:e}),o=m.createElement(b5,{...e.ariaProps},Tl(e.message,e));return m.createElement(y5,{className:e.className,style:{...r,...s,...e.style}},typeof n=="function"?n({icon:a,message:o}):m.createElement(m.Fragment,null,a,o))});q3(m.createElement);var S5=({id:e,className:t,style:s,onHeightUpdate:n,children:r})=>{let a=m.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return m.createElement("div",{ref:a,className:t,style:s},r)},k5=(e,t)=>{let s=e.includes("top"),n=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Dw()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...n,...r}},N5=cc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,To=16,_5=({reverseOrder:e,position:t="top-center",toastOptions:s,gutter:n,children:r,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=e5(s);return m.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:To,left:To,right:To,bottom:To,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||t,h=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),f=k5(d,h);return m.createElement(S5,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?N5:"",style:f},u.type==="custom"?Tl(u.message,u):r?r(u):m.createElement(j5,{toast:u,position:d}))}))},Rn=Oe;function Mw(e){return!e||e.length===0?null:e.reduce((t,s)=>new Date(s.updated_at)>new Date(t.updated_at)?s:t)}const E5=({isOpen:e,onClose:t,editSAO:s,onCreated:n})=>{const[r,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState([]),[d,h]=m.useState("draft"),[f,g]=m.useState(!1),[v,y]=m.useState(!1),[w,p]=m.useState(null),[x,b]=m.useState(""),[S,j]=m.useState([]),{skillCategories:N}=Ps(),{createSAO:_,updateSAO:C,loading:I,error:M,requestFeedback:V,loadUserSAOs:Z}=Wa(),[ie,re]=m.useState(!1),[oe,J]=m.useState(""),{checkSaoLimit:B,tier:P,fetchSubscription:O}=qa(),[D,K]=m.useState(null),[se,L]=m.useState(0),[G,W]=m.useState(!1),ee=s&&s.feedback?Mw(s.feedback):null;m.useEffect(()=>{e&&(async()=>{const{data:{user:R}}=await k.auth.getUser();if(!R)return;const{data:T}=await k.from("supervisor_eit_relationships").select(`
          supervisor_id,
          supervisor_profiles (
            id,
            full_name
          )
        `).eq("eit_id",R.id).eq("status","active");T&&j(T.map(q=>({id:q.supervisor_profiles.id,name:q.supervisor_profiles.full_name})))})()},[e]),m.useEffect(()=>{e&&s?(a(s.title),l(s.content),u(s.skills),h(s.status||"draft")):e&&(a(""),l(""),u([]),h("draft"))},[e,s]),m.useEffect(()=>{(async()=>{await O();const{data:{user:R}}=await k.auth.getUser();if(R){const{data:T}=await k.from("subscriptions").select("sao_created_count").eq("user_id",R.id).single();T&&typeof T.sao_created_count=="number"&&L(T.sao_created_count)}})()},[e]);const $=async E=>{E.preventDefault(),K(null);try{if(!s&&P==="free"&&!await B()){K("You have reached your SAO limit for the Free plan. Upgrade to add more.");return}s?await C(s.id,r,o,c,d):await _(r,o,c,d),a(""),l(""),u([]),b(""),t(),Z(),n&&n()}catch(R){console.error("Error saving SAO:",R)}},he=async()=>{if(o.trim()){y(!0);try{console.log("Starting enhancement process...");const E=await RR(o);console.log("Enhancement completed:",E),p(E)}catch(E){console.error("Error in handleEnhanceWithAI:",E),alert(E instanceof Error?E.message:"Failed to enhance text. Please try again.")}finally{y(!1)}}},ue=()=>{w&&(l(w),p(null))},z=()=>{p(null)},de=async()=>{if(!x||!s)return;const{data:{user:E}}=await k.auth.getUser();if(!E)return;const{count:R}=await k.from("skill_validations").select("*",{count:"exact",head:!0}).eq("eit_id",E.id).eq("validator_id",x);if((R||0)>=20){J("This supervisor has already validated 20 skills for you. Please select a different supervisor."),re(!0);return}await V(s.id,x)},A=G?(s==null?void 0:s.feedback)||[]:s!=null&&s.feedback&&s.feedback.length>0?[s.feedback[s.feedback.length-1]]:[];return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h2",{className:"text-2xl font-semibold",children:s?"Edit SAO":"Create New SAO"}),ee&&ee.status==="pending"&&i.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:"Pending"}),ee&&ee.status==="submitted"&&i.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:"Marked"})]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:24})})]}),D&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-md text-sm font-semibold text-center",children:D}),M&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-md text-sm",children:M}),s&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"font-semibold text-slate-700",children:"Comments & Feedback"}),i.jsx("button",{type:"button",className:"p-1 rounded hover:bg-slate-200",title:G?"Hide Feedback History":"Show Feedback History",onClick:()=>W(E=>!E),children:i.jsx(li,{size:18,className:G?"text-blue-600":"text-slate-400"})})]}),i.jsx(Rw,{saoId:s.id,content:s.content}),G&&A.length>1&&i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"font-semibold text-xs text-slate-500 mb-1",children:"Feedback History"}),A.slice(0,-1).map((E,R)=>i.jsxs("div",{className:"bg-slate-100 rounded p-2 mb-2 text-xs text-slate-700",children:[i.jsx("div",{className:"mb-1",children:E.feedback}),i.jsx("div",{className:"text-slate-400",children:new Date(E.updated_at).toLocaleDateString()})]},E.id))]})]}),s&&s.feedback&&s.feedback.length>0&&i.jsx("div",{className:"mb-6",children:i.jsx(Uf,{feedback:A,onResolve:async()=>Promise.resolve(),onSubmitFeedback:async()=>Promise.resolve(),isSupervisor:!1})}),i.jsxs("form",{onSubmit:$,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700 mb-2",children:"Title"}),i.jsx("input",{type:"text",id:"title",value:r,onChange:E=>a(E.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 text-lg",placeholder:"Enter SAO title",required:!0,disabled:I})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"sao",className:"block text-sm font-medium text-slate-700 mb-2",children:"Situation-Action-Outcome"}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{id:"sao",value:w||o,onChange:E=>{w||l(E.target.value)},className:"w-full px-4 py-3 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 min-h-[400px] text-lg",placeholder:"Describe your situation, actions, and outcomes...",required:!0,disabled:I||v}),P!=="free"&&i.jsxs("button",{type:"button",onClick:he,disabled:!o.trim()||I||v,className:"absolute top-4 right-4 p-3 text-slate-400 hover:text-teal-600 hover:bg-slate-100 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed group",title:"Enhance with AI",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Zb,{size:24,className:`${v?"animate-pulse":""} transition-transform duration-300 group-hover:scale-110`}),v&&i.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-teal-400 opacity-20"})]}),i.jsx("span",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 bg-slate-800 text-white px-3 py-1.5 rounded text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:"Enhance with AI"})]})]}),w&&i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("span",{className:"text-sm text-slate-600",children:"AI Enhancement Preview"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:ue,className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-md transition-all duration-300 hover:scale-105 active:scale-95",children:"Accept"}),i.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-md transition-all duration-300 hover:scale-105 active:scale-95",children:"Decline"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{type:"button",className:`px-4 py-2 rounded-full border text-sm font-semibold transition-colors duration-200 ${d==="draft"?"bg-slate-200 text-slate-800 border-slate-400":"bg-white text-slate-500 border-slate-200"}`,onClick:()=>h("draft"),"aria-pressed":d==="draft",children:"Draft"}),i.jsx("button",{type:"button",className:`px-4 py-2 rounded-full border text-sm font-semibold transition-colors duration-200 ${d==="complete"?"bg-green-200 text-green-800 border-green-400":"bg-white text-slate-500 border-slate-200"}`,onClick:()=>h("complete"),"aria-pressed":d==="complete",children:"Completed"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Relevant Skills"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:c.map(E=>i.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-teal-100 text-teal-800",children:[E.name,i.jsx("button",{type:"button",onClick:()=>u(R=>R.filter(T=>T.id!==E.id)),className:"ml-2 text-teal-600 hover:text-teal-800",disabled:I,children:i.jsx(Nt,{size:16})})]},E.id))}),i.jsxs("button",{type:"button",onClick:()=>g(!0),className:"btn btn-secondary w-full flex items-center justify-center gap-2 py-3 text-lg",disabled:I,children:[i.jsx(Tr,{size:20}),"Select Skills"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Supervisor Selection"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("select",{value:x,onChange:E=>b(E.target.value),className:"flex-1 px-4 py-3 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 text-lg",disabled:I||S.length===0,children:[i.jsx("option",{value:"",children:"Select a supervisor"}),S.map(E=>i.jsx("option",{value:E.id,children:E.name},E.id))]}),i.jsx("button",{type:"button",onClick:de,disabled:!x||I||!s,className:"px-4 py-3 bg-teal-600 text-white rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send for Validation"})]}),S.length===0&&i.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No active supervisors found. Connect with a supervisor first."})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[i.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary px-6 py-3 text-lg",disabled:I,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn btn-primary px-6 py-3 text-lg",disabled:I,children:I?"Saving...":s?"Update SAO":"Create SAO"})]})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-2xl font-semibold",children:"Select Skills"}),i.jsx("button",{onClick:()=>g(!1),className:"text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:24})})]}),i.jsx("div",{className:"space-y-6",children:N.map(E=>i.jsxs("div",{className:"border rounded-lg p-6",children:[i.jsx("h4",{className:"font-medium text-slate-900 text-lg mb-4",children:E.name}),i.jsx("div",{className:"space-y-3",children:E.skills.map(R=>i.jsxs("label",{className:"flex items-center space-x-3 p-3 hover:bg-slate-50 rounded cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:c.some(T=>T.id===R.id),onChange:T=>{T.target.checked?u(q=>[...q,{...R,category_name:E.name}]):u(q=>q.filter(H=>H.id!==R.id))},className:"rounded text-teal-600 focus:ring-teal-500 w-5 h-5"}),i.jsx("span",{className:"text-base",children:R.name})]},R.id))})]},E.name))}),i.jsx("div",{className:"flex justify-end mt-8",children:i.jsx("button",{onClick:()=>g(!1),className:"btn btn-primary px-6 py-3 text-lg",children:"Done"})})]})}),i.jsx(Hd,{isOpen:ie,onClose:()=>re(!1),children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4 text-red-700",children:"Validation Rule Violation"}),i.jsx("p",{className:"text-slate-700 mb-4",children:oe}),i.jsx("button",{className:"btn btn-primary",onClick:()=>re(!1),children:"OK"})]})})]})}):null},C5=({sao:e,onDelete:t,onEdit:s})=>{const n=m.useRef(null),[r]=qv(),a=r.get("saoId"),o=e.feedback?Mw(e.feedback):null;return m.useEffect(()=>{var l,c;a===e.id&&((l=n.current)==null||l.scrollIntoView({behavior:"smooth",block:"center"}),(c=n.current)==null||c.classList.add("ring","ring-teal-400"),setTimeout(()=>{var u;(u=n.current)==null||u.classList.remove("ring","ring-teal-400")},1500))},[a,e.id]),i.jsxs("div",{ref:n,className:"bg-white rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:e.title}),o&&o.status==="pending"&&i.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:"Pending"}),o&&o.status==="submitted"&&i.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:"Marked"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="draft"&&i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold bg-slate-200 text-slate-700",children:"Draft"}),e.status==="complete"&&i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Complete"}),i.jsx("button",{onClick:()=>s(e),className:"text-slate-400 hover:text-teal-600 transition-colors",title:"Edit SAO",children:i.jsx(Yi,{size:18})}),i.jsx("button",{onClick:()=>t(e.id),className:"text-slate-400 hover:text-red-600 transition-colors",title:"Delete SAO",children:i.jsx(Qn,{size:18})})]})]}),i.jsx("p",{className:"text-slate-600 whitespace-pre-wrap mb-4",children:e.content}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.skills.map(l=>i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-teal-100 text-teal-800",children:l.name},l.id))}),i.jsxs("div",{className:"mt-4 text-sm text-slate-500",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]})},T5=()=>{const[e,t]=m.useState(!1),[s,n]=m.useState(),{saos:r,loading:a,error:o,loadUserSAOs:l,deleteSAO:c}=Wa(),{tier:u,saoLimit:d,fetchSubscription:h}=qa(),[f]=qv(),g=f.get("saoId"),[v,y]=m.useState(0),[w,p]=m.useState(null);m.useEffect(()=>{(async()=>{await h();const{data:{user:N}}=await k.auth.getUser();if(N){const{data:_}=await k.from("subscriptions").select("sao_created_count").eq("user_id",N.id).single();_&&typeof _.sao_created_count=="number"&&y(_.sao_created_count)}})()},[e]),m.useEffect(()=>{l()},[l]),m.useEffect(()=>{if(g&&r.length>0){const j=r.find(N=>N.id===g);j&&(n(j),t(!0))}},[g,r]),m.useEffect(()=>{(async()=>{const{data:{user:N}}=await k.auth.getUser();if(!N)return;const{data:_}=await k.from("supervisor_profiles").select("id").eq("id",N.id).single();p(_?"supervisor":"eit")})()},[]);const x=async j=>{window.confirm("Are you sure you want to delete this SAO?")&&await c(j)},b=j=>{n(j),t(!0)},S=()=>{t(!1),n(void 0),l()};return i.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[u==="free"&&i.jsx("div",{className:"p-4 mb-4 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-900 text-center font-semibold",children:v<d?`You have ${d-v} SAO${d-v===1?"":"s"} left on the Free plan.`:"You have reached your SAO limit for the Free plan. Upgrade to add more."}),i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Situation-Action-Outcome (SAO)"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Write and manage your SAO essays."})]}),i.jsxs("div",{className:"flex gap-2 items-center",children:[w==="eit"&&i.jsx("button",{className:`btn btn-primary ${a?"opacity-75 cursor-not-allowed":""}`,onClick:()=>l(!0),disabled:a,children:a?"Refreshing...":"Refresh"}),i.jsxs("button",{onClick:()=>{v<d&&t(!0)},className:`btn flex items-center gap-2 ${v>=d?"bg-gray-300 text-gray-500 border-gray-300 cursor-not-allowed":"btn-primary"}`,disabled:v>=d,"aria-disabled":v>=d,title:v>=d?"You have reached your SAO limit for the Free plan.":"Start a new SAO",children:[i.jsx(Tr,{size:18}),"Start New SAO"]})]})]}),o&&i.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-red-600",children:"Error:"}),i.jsx("p",{className:"text-sm text-red-800",children:o})]})}),a?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})}):r.length>0?i.jsx("div",{className:"space-y-4",children:r.map(j=>i.jsx(C5,{sao:j,onDelete:x,onEdit:b},j.id))}):i.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Of,{className:"mx-auto h-12 w-12 text-slate-400"}),i.jsx("h3",{className:"mt-4 text-lg font-medium text-slate-900",children:"No SAOs yet"}),i.jsx("p",{className:"mt-2 text-slate-500",children:"Get started by writing your first SAO essay."}),i.jsx("button",{onClick:()=>t(!0),className:"mt-4 btn btn-primary",children:"Start Writing"})]})}),i.jsx(E5,{isOpen:e,onClose:S,editSAO:s,onCreated:()=>{l(),t(!1)}})]})},P5=()=>{const[e,t]=m.useState(""),[s,n]=m.useState(""),[r,a]=m.useState(""),[o,l]=m.useState(!1),[c,u]=m.useState(null),[d,h]=m.useState(!1),[f,g]=m.useState(null),[v,y]=m.useState("general"),[w,p]=m.useState("help"),x=async j=>{j.preventDefault(),l(!0),u(null),h(!1);try{const N=await fetch("https://bbixvnkqroskholbxkgj.supabase.co/functions/v1/send-support-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU"},body:JSON.stringify({email:e,subject:s,message:r,issueType:v,mode:w})}),_=await N.json();if(!N.ok)throw new Error(_.error||"Failed to send message");h(!0),t(""),n(""),a(""),y("general")}catch(N){u(N instanceof Error?N.message:"Failed to send message. Please try again later."),console.error("Error sending support message:",N)}finally{l(!1)}},b=[{id:"sao",question:"What is an SAO?",answer:"A Situation-Action-Outcome (SAO) is a structured way to document your experiences and demonstrate your competencies. It helps you reflect on specific situations, the actions you took, and the outcomes achieved. This format is crucial for showcasing your professional growth and meeting EIT program requirements."},{id:"progress",question:"How do I track my progress?",answer:"Your progress is automatically tracked as you complete skills and document experiences. Visit the Dashboard to see your overall progress and skill-specific achievements. The progress bar shows your completion rate for skills, documented experiences, and supervisor approvals."},{id:"supervisor",question:"How do I connect with my supervisor?",answer:`You can connect with your supervisor through the "My Supervisor" section on your dashboard. If you haven't connected yet, you'll see an option to send a connection request. Once connected, your supervisor can review and validate your skills and experiences.`},{id:"skills",question:"How do I mark skills as complete?",answer:"To mark a skill as complete, navigate to the Skills section, select the skill you want to mark, and provide your self-assessment score. You'll need to document relevant experiences (SAOs) that demonstrate your competency in that skill. Your supervisor will then review and validate your assessment."},{id:"experiences",question:"How many experiences do I need to document?",answer:"You need to document at least 24 experiences (SAOs) across different skills. Each experience should demonstrate your competency in specific skills. Make sure to provide detailed descriptions of situations, your actions, and the outcomes achieved."}],S=[{title:"EIT Program Guide",description:"Comprehensive guide to the EIT program requirements and process",icon:i.jsx(oi,{size:20}),link:"/resources/eit-guide"},{title:"SAO Writing Tips",description:"Best practices for writing effective Situation-Action-Outcome statements",icon:i.jsx(Ds,{size:20}),link:"/resources/sao-tips"},{title:"Skills Framework",description:"Detailed breakdown of all required skills and competencies",icon:i.jsx(Gr,{size:20}),link:"/resources/skills-framework"}];return i.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Help & Support"}),i.jsx("p",{className:"text-slate-500 mt-2 text-lg",children:"Get help with your EIT program journey"}),i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsxs("div",{className:"inline-flex rounded-lg border border-slate-200 p-1 bg-white",children:[i.jsxs("button",{onClick:()=>p("help"),className:`px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 ${w==="help"?"bg-teal-50 text-teal-700":"text-slate-600 hover:text-slate-900"}`,children:[i.jsx(Gr,{size:16}),"Help"]}),i.jsxs("button",{onClick:()=>p("feedback"),className:`px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 ${w==="feedback"?"bg-teal-50 text-teal-700":"text-slate-600 hover:text-slate-900"}`,children:[i.jsx(Xn,{size:16}),"Feedback"]})]})})]}),w==="help"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-teal-50 rounded-lg p-6 mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-teal-800 mb-4",children:"Quick Help"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("a",{href:"/dashboard",className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[i.jsx("h3",{className:"font-medium text-teal-700",children:"View Progress"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Check your current progress and achievements"})]}),i.jsxs("a",{href:"/skills",className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[i.jsx("h3",{className:"font-medium text-teal-700",children:"Manage Skills"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Update and track your skill assessments"})]}),i.jsxs("a",{href:"/experiences",className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[i.jsx("h3",{className:"font-medium text-teal-700",children:"Document Experiences"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Add new experiences and SAOs"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Support"}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Your Email"}),i.jsx("input",{type:"email",id:"email",value:e,onChange:j=>t(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter your email",required:!0,disabled:o})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"issueType",className:"block text-sm font-medium text-slate-700 mb-1",children:"Issue Type"}),i.jsxs("select",{id:"issueType",value:v,onChange:j=>y(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",required:!0,disabled:o,children:[i.jsx("option",{value:"general",children:"General Inquiry"}),i.jsx("option",{value:"technical",children:"Technical Issue"}),i.jsx("option",{value:"skills",children:"Skills & Assessment"}),i.jsx("option",{value:"supervisor",children:"Supervisor Related"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",id:"subject",value:s,onChange:j=>n(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"What's your question about?",required:!0,disabled:o})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),i.jsx("textarea",{id:"message",value:r,onChange:j=>a(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 min-h-[150px]",placeholder:"Describe your issue or question...",required:!0,disabled:o})]}),c&&i.jsxs("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm flex items-center gap-2",children:[i.jsx(Yn,{size:16}),c]}),d&&i.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-md text-sm",children:"Your message has been sent successfully. We'll get back to you soon!"}),i.jsx("button",{type:"submit",className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:o,children:o?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(Cl,{size:18}),"Send Message"]})})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Frequently Asked Questions"}),i.jsx("div",{className:"space-y-4",children:b.map(j=>i.jsxs("div",{className:"border-b border-slate-200 last:border-0 pb-4 last:pb-0",children:[i.jsxs("button",{className:"w-full flex items-center justify-between text-left",onClick:()=>g(f===j.id?null:j.id),children:[i.jsx("h3",{className:"font-medium text-slate-900",children:j.question}),f===j.id?i.jsx(Rf,{size:20}):i.jsx(za,{size:20})]}),f===j.id&&i.jsx("p",{className:"text-sm text-slate-600 mt-2",children:j.answer})]},j.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Helpful Resources"}),i.jsx("div",{className:"space-y-4",children:S.map((j,N)=>i.jsxs("a",{href:j.link,className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 transition-colors",children:[i.jsx("div",{className:"text-teal-600 mt-1",children:j.icon}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-slate-900",children:j.title}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:j.description})]}),i.jsx(If,{size:16,className:"text-slate-400 ml-auto mt-1"})]},N))})]})]})]})]}):i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Share Your Feedback"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"We value your feedback! Let us know what you think about the EIT program platform, what's working well, and what we can improve."}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Your Email"}),i.jsx("input",{type:"email",id:"email",value:e,onChange:j=>t(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter your email",required:!0,disabled:o})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",id:"subject",value:s,onChange:j=>n(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Brief summary of your feedback",required:!0,disabled:o})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 mb-1",children:"Your Feedback"}),i.jsx("textarea",{id:"message",value:r,onChange:j=>a(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 min-h-[200px]",placeholder:"Share your thoughts, suggestions, or concerns...",required:!0,disabled:o})]}),c&&i.jsxs("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm flex items-center gap-2",children:[i.jsx(Yn,{size:16}),c]}),d&&i.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-md text-sm",children:"Thank you for your feedback! We appreciate your input."}),i.jsx("button",{type:"submit",className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:o,children:o?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(Cl,{size:18}),"Submit Feedback"]})})]})]})})]})},A5=()=>i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("div",{className:"relative bg-gradient-to-b from-teal-50 to-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16 text-center",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-slate-900 mb-6",children:"Streamline Your EIT Journey"}),i.jsx("p",{className:"text-xl text-slate-600 mb-8 max-w-3xl mx-auto",children:"Accreda helps engineers track, document, and manage their professional development journey towards becoming an Engineer in Training (EIT)."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx($t,{to:"/signup",className:"btn btn-primary text-lg px-8 py-3",children:"Get Started"}),i.jsx($t,{to:"/login",className:"btn btn-secondary text-lg px-8 py-3",children:"Sign In"})]})]})}),i.jsx("div",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-center text-slate-900 mb-12",children:"Everything You Need to Succeed"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"card hover:scale-105 transition-transform",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:i.jsx(ic,{className:"w-6 h-6 text-teal-600"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Skill Tracking"}),i.jsx("p",{className:"text-slate-600",children:"Track your progress across all required engineering competencies with our intuitive skill assessment system."})]})}),i.jsx("div",{className:"card hover:scale-105 transition-transform",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:i.jsx(Ds,{className:"w-6 h-6 text-teal-600"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Experience Documentation"}),i.jsx("p",{className:"text-slate-600",children:"Document your engineering experiences with our structured templates and guidance."})]})}),i.jsx("div",{className:"card hover:scale-105 transition-transform",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:i.jsx(oi,{className:"w-6 h-6 text-teal-600"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"SAO Management"}),i.jsx("p",{className:"text-slate-600",children:"Create and manage your Self-Assessment Outcomes with our AI-powered writing assistant."})]})})]})]})}),i.jsx("div",{className:"py-20 bg-slate-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-center text-slate-900 mb-12",children:"Why Choose Accreda?"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(mn,{className:"w-6 h-6 text-teal-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Structured Progress Tracking"}),i.jsx("p",{className:"text-slate-600",children:"Stay organized with our comprehensive tracking system for skills, experiences, and documentation."})]})]}),i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Va,{className:"w-6 h-6 text-teal-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Supervisor Collaboration"}),i.jsx("p",{className:"text-slate-600",children:"Streamline the approval process with our integrated supervisor review system."})]})]}),i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(li,{className:"w-6 h-6 text-teal-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Time-Saving Tools"}),i.jsx("p",{className:"text-slate-600",children:"Our AI-powered writing assistant helps you draft professional documentation quickly."})]})]}),i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(MP,{className:"w-6 h-6 text-teal-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Progress Analytics"}),i.jsx("p",{className:"text-slate-600",children:"Get clear insights into your progress with detailed analytics and visualizations."})]})]})]})]})}),i.jsx("div",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Ready to Start Your EIT Journey?"}),i.jsx("p",{className:"text-xl text-slate-600 mb-8 max-w-2xl mx-auto",children:"Join thousands of engineers who are using Accreda to streamline their path to becoming an Engineer in Training."}),i.jsxs($t,{to:"/signup",className:"btn btn-primary text-lg px-8 py-3 inline-flex items-center",children:["Get Started Now",i.jsx(DP,{className:"ml-2 w-5 h-5"})]})]})}),i.jsx("footer",{className:"bg-slate-900 text-white py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Accreda"}),i.jsx("p",{className:"text-slate-400",children:"Helping engineers achieve their professional goals through structured development and documentation."})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx($t,{to:"/login",className:"text-slate-400 hover:text-white",children:"Sign In"})}),i.jsx("li",{children:i.jsx($t,{to:"/signup",className:"text-slate-400 hover:text-white",children:"Sign Up"})}),i.jsx("li",{children:i.jsx($t,{to:"/help",className:"text-slate-400 hover:text-white",children:"Help & Support"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),i.jsxs("ul",{className:"space-y-2 text-slate-400",children:[i.jsx("li",{children:"Email: support@accreda.com"}),i.jsx("li",{children:"Phone: (555) 123-4567"})]})]})]}),i.jsx("div",{className:"border-t border-slate-800 mt-8 pt-8 text-center text-slate-400",children:i.jsxs("p",{children:[" ",new Date().getFullYear()," Accreda. All rights reserved."]})})]})})]}),R5=({value:e,onChange:t,disabled:s=!1})=>{const[n,r]=m.useState([]),[a,o]=m.useState(!1),[l,c]=m.useState(!1),[u,d]=m.useState([]),h=m.useRef(null);m.useEffect(()=>{(async()=>{try{const{data:{user:y}}=await k.auth.getUser();if(!y)return;const{data:w,error:p}=await k.from("supervisor_eit_relationships").select("supervisor_id").eq("eit_id",y.id).eq("status","active");if(p)throw p;const x=Array.from(new Set((w||[]).map(b=>b.supervisor_id)));console.log("Supervisor connections:",x),d(x)}catch(y){console.error("Error loading supervisor connections:",y)}})()},[]),m.useEffect(()=>{const v=y=>{h.current&&!h.current.contains(y.target)&&o(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const f=async v=>{const y=v.target.value;if(t(y,""),!y.trim()){r([]),o(!1);return}c(!0);try{const{data:{user:w}}=await k.auth.getUser();if(!w)return;if(u===void 0){r([]),o(!0),c(!1);return}if(!u.length){r([]),o(!0),c(!1);return}const{data:p,error:x}=await k.from("supervisor_profiles").select("id, full_name, email").or(`full_name.ilike.%${y}%,email.ilike.%${y}%`).in("id",u).limit(5);if(x)throw x;r(p||[]),o(!0)}catch(w){console.error("Error fetching supervisors:",w),r([])}finally{c(!1)}},g=v=>{t(v.full_name,v.email),o(!1)};return i.jsxs("div",{className:"relative",ref:h,children:[i.jsx("input",{type:"text",value:e,onChange:f,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter validator's full name",required:!0,disabled:s}),a&&(e.trim()||l)&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg border border-slate-200 max-h-60 overflow-y-auto",children:l?i.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Searching..."}):n.length>0?n.map(v=>i.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-slate-50 focus:outline-none focus:bg-slate-50",onClick:()=>g(v),children:[i.jsx("div",{className:"font-medium text-slate-900",children:v.full_name}),i.jsx("div",{className:"text-sm text-slate-500",children:v.email})]},v.id)):i.jsx("div",{className:"p-2 text-sm text-slate-500",children:"No matching connected supervisors found"})})]})},I5=({value:e,onChange:t,disabled:s=!1})=>{const[n,r]=m.useState([]),[a,o]=m.useState(!1),[l,c]=m.useState(!1),u=m.useRef(null);m.useEffect(()=>{const f=g=>{u.current&&!u.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=async f=>{const g=f.target.value;if(t(g,""),!g.trim()){r([]),o(!1);return}c(!0);try{const{data:{user:v}}=await k.auth.getUser();if(!v)return;const{data:y,error:w}=await k.from("job_references").select("id, full_name, email").or(`full_name.ilike.%${g}%,email.ilike.%${g}%`).eq("eit_id",v.id).limit(5);if(w)throw w;const p=Array.from(new Map((y||[]).map(x=>[x.email,x])).values());r(p),o(!0)}catch(v){console.error("Error fetching references:",v),r([])}finally{c(!1)}},h=f=>{t(f.full_name,f.email),o(!1)};return i.jsxs("div",{className:"relative",ref:u,children:[i.jsx("input",{type:"text",value:e,onChange:d,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter reference's full name",required:!0,disabled:s}),a&&(e.trim()||l)&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg border border-slate-200 max-h-60 overflow-y-auto",children:l?i.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Searching..."}):n.length>0?n.map(f=>i.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-slate-50 focus:outline-none focus:bg-slate-50",onClick:()=>h(f),children:[i.jsx("div",{className:"font-medium text-slate-900",children:f.full_name}),i.jsx("div",{className:"text-sm text-slate-500",children:f.email})]},f.id)):i.jsx("div",{className:"p-2 text-sm text-slate-500",children:"No matching references found"})})]})},O5=({isOpen:e,onClose:t,skillName:s,skillId:n,existingValidator:r,onSave:a,status:o,loadValidators:l})=>{const[c,u]=m.useState({fullName:(r==null?void 0:r.full_name)||"",email:(r==null?void 0:r.email)||"",description:(r==null?void 0:r.description)||""}),[d,h]=m.useState(!1),[f,g]=m.useState(null);m.useEffect(()=>{e&&u(r?{fullName:r.full_name,email:r.email,description:r.description}:{fullName:"",email:"",description:""})},[e,r,n]);const v=async y=>{y.preventDefault(),h(!0),g(null);try{const{data:{user:w}}=await k.auth.getUser();if(!w)throw new Error("No authenticated user");const{data:p,error:x}=await k.from("eit_profiles").select("full_name").eq("id",w.id).single();if(x)throw x;const{data:b,error:S}=await k.from("supervisor_profiles").select("id").eq("email",c.email).single();if(S)throw S;if(r){const{error:j}=await k.from("validators").update({full_name:c.fullName,email:c.email,description:c.description}).eq("id",r.id);if(j)throw j}else{const{error:j}=await k.from("validators").insert([{eit_id:w.id,skill_id:n,full_name:c.fullName,email:c.email,description:c.description}]);if(j)throw j;await Wd(b.id,p.full_name,s)}a(),t(),setTimeout(()=>l(),300)}catch(w){console.error("Validator insert error:",w),g(w instanceof Error?w.message:JSON.stringify(w))}finally{h(!1)}};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:[r?"Edit":"Add"," Validator for ",s]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:24})})]}),f&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-600",children:f})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),i.jsx(R5,{value:c.fullName,onChange:(y,w)=>u(p=>({...p,fullName:y,email:w})),disabled:o!=="draft"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:c.email,onChange:y=>u(w=>({...w,email:y.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter validator's email",required:!0,disabled:o!=="draft"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),i.jsx("textarea",{value:c.description,onChange:y=>u(w=>({...w,description:y.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter description of validation",rows:4,required:!0,disabled:o!=="draft"})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-lg",disabled:d,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg disabled:opacity-50",disabled:d,children:d?"Saving...":r?"Update Validator":"Add Validator"})]})]})]})}):null},D5=({isOpen:e,onClose:t,job:s,referenceNumber:n,existingReference:r,onSave:a})=>{const[o,l]=m.useState({fullName:"",email:"",referenceText:""}),[c,u]=m.useState(!1),[d,h]=m.useState(null),[f,g]=m.useState(!1);m.useEffect(()=>{e&&l(r?{fullName:r.full_name,email:r.email,referenceText:r.description}:{fullName:"",email:"",referenceText:""})},[e,r]);const v=async p=>{p.preventDefault(),u(!0),h(null);try{const{data:{user:x}}=await k.auth.getUser();if(!x)throw new Error("No authenticated user");const b={job_id:s.id,full_name:o.fullName,email:o.email,description:o.referenceText,reference_number:n,eit_id:x.id,validation_status:(r==null?void 0:r.validation_status)||"unsent"};if(r){const{error:S}=await k.from("job_references").update(b).eq("id",r.id);if(S)throw S}else{const{error:S}=await k.from("job_references").insert([b]);if(S)throw S}a(),t()}catch(x){console.error("ReferencePopup error:",x),h(x instanceof Error?x.message:"An error occurred")}finally{u(!1)}},y=async()=>{if(r){g(!0),h(null);try{const p=await fetch("https://bbixvnkqroskholbxkgj.supabase.co/functions/v1/send-reference",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU"},body:JSON.stringify({reference_id:r.id,email:r.email})});if(!p.ok){const x=await p.json();throw new Error(x.error||"Failed to send reference")}a(),t(),Oe.success("Reference request sent successfully")}catch(p){console.error("Error sending reference:",p),h(p instanceof Error?p.message:"An error occurred while sending the reference")}finally{g(!1)}}},w=async()=>{if(r){u(!0),h(null);try{const{error:p}=await k.from("job_references").update({validation_status:"unsent"}).eq("id",r.id);if(p)throw p;a(),t()}catch(p){console.error("Error canceling reference:",p),h(p instanceof Error?p.message:"An error occurred while canceling the reference")}finally{u(!1)}}};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:[r?"Edit":"Add"," Reference ",n," for ",s.title," at ",s.company]}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:24})})]}),d&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-600",children:d})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),i.jsx(I5,{value:o.fullName,onChange:(p,x)=>l(b=>({...b,fullName:p,email:x})),disabled:(r==null?void 0:r.validation_status)==="validated"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:o.email,onChange:p=>l(x=>({...x,email:p.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter reference's email",required:!0,disabled:(r==null?void 0:r.validation_status)==="validated"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Reference Text"}),i.jsx("textarea",{value:o.referenceText,onChange:p=>l(x=>({...x,referenceText:p.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter reference text",rows:4,required:!0,disabled:(r==null?void 0:r.validation_status)==="validated"})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r&&r.validation_status==="pending"&&i.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg",disabled:c||f,children:"Cancel Reference"}),r&&r.validation_status==="unsent"&&i.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 text-sm font-medium text-teal-600 hover:bg-teal-50 rounded-lg",disabled:c||f,children:f?"Sending...":"Send Reference"}),i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-lg",disabled:c||f,children:"Close"}),(r==null?void 0:r.validation_status)!=="validated"&&i.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg disabled:opacity-50",disabled:c||f,children:c?"Saving...":r?"Update Reference":"Add Reference"})]})]})]})}):null},L5=()=>{var de;const[e,t]=m.useState("references"),[s,n]=m.useState(null),[r,a]=m.useState(null),[o,l]=m.useState(null),[c,u]=m.useState(null),[d,h]=m.useState(null),[f,g]=m.useState({}),[v,y]=m.useState({}),[w,p]=m.useState([]),{skillCategories:x}=Ps(),b=m.useRef(null),S=m.useRef(null),j=m.useRef(null),[N,_]=m.useState({}),[C,I]=m.useState(null),[M,V]=m.useState(""),[Z,ie]=m.useState([]),[re,oe]=m.useState(null),[J,B]=m.useState(""),P=x.map(A=>({...A,skills:A.skills.filter(E=>E.status==="completed"||E.rank!==void 0)})).filter(A=>A.skills.length>0),O=async()=>{try{const{data:{user:A}}=await k.auth.getUser();if(!A)return;const{data:E,error:R}=await k.from("validators").select("*").eq("eit_id",A.id);if(R)throw R;const T=E.reduce((q,H)=>(q[H.skill_id]||(q[H.skill_id]=[]),q[H.skill_id].push(H),q),{});g(T)}catch(A){console.error("Error loading validators:",A)}},D=async()=>{try{const{data:{user:A}}=await k.auth.getUser();if(!A)return;const{data:E,error:R}=await k.from("jobs").select("*").eq("eit_id",A.id).order("start_date",{ascending:!1});if(R)throw R;p(E||[])}catch(A){console.error("Error loading jobs:",A)}},K=async()=>{try{const{data:{user:A}}=await k.auth.getUser();if(!A)return;const{data:E,error:R}=await k.from("job_references").select("*").eq("eit_id",A.id);if(R)throw R;const T=E.reduce((q,H)=>(q[H.job_id]||(q[H.job_id]=[]),q[H.job_id].push(H),q),{});y(T)}catch(A){console.error("Error loading references:",A)}},se=async()=>{try{const{data:{user:A}}=await k.auth.getUser();if(!A)return;const{data:E,error:R}=await k.from("eit_connections").select("*").or(`eit_id.eq.${A.id},connected_eit_id.eq.${A.id}`).eq("status","accepted");if(R)throw R;ie(E||[])}catch(A){console.error("Error loading connections:",A)}};m.useEffect(()=>{O(),D(),K(),se()},[]),m.useEffect(()=>{const A=E=>{const{itemId:R,itemType:T}=E.detail||{},q=()=>{var xe,mt;const H=T==="reference"?`[data-reference-id="${R}"]`:T==="validator"?`[data-validator-id="${R}"]`:T==="job"?`[data-job-id="${R}"]`:"";if(!H)return;const le=document.querySelector(H);le&&(T==="reference"?(t("references"),(xe=S.current)==null||xe.scrollIntoView({behavior:"smooth",block:"start"})):T==="validator"&&(t("validators"),(mt=j.current)==null||mt.scrollIntoView({behavior:"smooth",block:"start"})),setTimeout(()=>{le.scrollIntoView({behavior:"smooth",block:"center"}),le.classList.add("highlight-item"),le.classList.add("animate-bounce-subtle"),setTimeout(()=>{le.classList.remove("highlight-item","animate-bounce-subtle")},2e3)},300))};requestAnimationFrame(()=>{T==="reference"&&e!=="references"||T==="validator"&&e!=="validators"?setTimeout(q,100):q()})};return window.addEventListener("scroll-to-item",A),()=>window.removeEventListener("scroll-to-item",A)},[e]),m.useEffect(()=>{const A=()=>{D(),K()};return window.addEventListener("jobs-updated",A),()=>window.removeEventListener("jobs-updated",A)},[]);const L=()=>{O()},G=()=>{K()},W=async(A,E)=>{try{const{data:{user:R}}=await k.auth.getUser();if(!R)throw new Error("No authenticated user");const{error:T}=await k.from("job_references").update({validation_status:E,validator_id:R.id,validated_at:new Date().toISOString(),validation_notes:J}).eq("id",A.id);if(T)throw T;oe(null),B(""),K(),Oe.success(`Reference ${E==="validated"?"validated":"rejected"} successfully`)}catch(R){console.error("Error validating reference:",R),Oe.error("Failed to validate reference")}},ee=async A=>{try{const{error:E}=await k.from("job_references").delete().eq("id",A.id);if(E)throw E;K(),Oe.success("Reference unsent successfully")}catch(E){console.error("Error unsending reference:",E),Oe.error("Failed to unsend reference")}},he=[...w].sort((A,E)=>new Date(E.start_date).getTime()-new Date(A.start_date).getTime()).filter(A=>A.title.toLowerCase().includes(M.toLowerCase())||A.company.toLowerCase().includes(M.toLowerCase())||A.skills&&A.skills.some(E=>{const R=x.flatMap(T=>T.skills).find(T=>T.id===E);return R&&R.name.toLowerCase().includes(M.toLowerCase())})),ue=A=>{switch(A){case"validated":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-yellow-100 text-yellow-700"}},z=A=>{switch(A){case"validated":return i.jsx(Fd,{size:16,className:"text-green-600"});case"rejected":return i.jsx(sw,{size:16,className:"text-red-600"});default:return i.jsx(Yn,{size:16,className:"text-yellow-600"})}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",ref:b,children:i.jsxs("h1",{className:"text-2xl font-semibold text-slate-900 flex items-center",children:[i.jsx(Jb,{size:24,className:"mr-2 text-teal-600"}),"Jobs"]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[i.jsx(Gi,{size:24,className:"text-teal-600"}),"Work Experience"]}),i.jsxs("button",{className:"btn btn-primary flex items-center gap-2 shadow-lg fixed bottom-8 right-8 z-40",onClick:()=>{},title:"Add Job",children:[i.jsx(Tr,{size:18})," Add Job"]})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx($f,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),i.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Search jobs by title, company, or skill...",value:M,onChange:A=>V(A.target.value)})]})}),i.jsx("div",{className:"relative border-l-2 border-slate-200 pl-6",children:he.length>0?he.map((A,E)=>{const R=!A.end_date,T=R?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600",q=A.company.split(" ").map(H=>H[0]).join("").toUpperCase();return i.jsxs("div",{className:"mb-10 relative",children:[i.jsx("span",{className:"absolute -left-7 top-4 w-5 h-5 rounded-full bg-white border-2 border-teal-500 flex items-center justify-center text-teal-600 font-bold text-sm shadow",children:q}),i.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-slate-100 p-6 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 flex items-center gap-2",children:[A.title,i.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-semibold ${T}`,children:R?"Current":"Past"})]}),i.jsx("p",{className:"text-slate-600 font-medium",children:A.company}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mt-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(El,{size:14}),new Date(A.start_date).toLocaleDateString()," - ",A.end_date?new Date(A.end_date).toLocaleDateString():"Present"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Yg,{size:14}),A.location]})]})]}),i.jsx("button",{className:"ml-4 p-2 rounded-full hover:bg-slate-100 text-slate-500",onClick:()=>I(C===A.id?null:A.id),title:C===A.id?"Collapse":"Expand",children:C===A.id?i.jsx(Rf,{size:20}):i.jsx(za,{size:20})})]}),C===A.id&&i.jsxs("div",{className:"mt-4 space-y-3",children:[A.description&&i.jsx("p",{className:"text-slate-700 text-sm mb-2",children:A.description}),A.skills&&A.skills.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-1",children:"Skills:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:A.skills.map(H=>{const le=x.flatMap(xe=>xe.skills).find(xe=>xe.id===H);return le?i.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded-full text-xs",children:le.name},H):null})})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-1",children:"References:"}),i.jsx("div",{className:"flex gap-2",children:[1,2].map(H=>{var xe;const le=(xe=v[A.id])==null?void 0:xe.find(mt=>mt.reference_number===H);return le?i.jsxs("button",{onClick:()=>{l(A),u(le),h(H),window.dispatchEvent(new CustomEvent("scroll-to-item",{detail:{itemId:le.id,itemType:"reference"}}))},className:"px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-colors flex items-center gap-2 border border-slate-200","data-reference-id":le.id,children:[i.jsx(Yi,{size:14}),"Reference ",H,": ",le.full_name]},le.id):i.jsxs("button",{onClick:()=>{l(A),u(null),h(H)},className:"px-3 py-1.5 text-sm font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded-lg transition-colors flex items-center gap-2 border border-teal-200",children:[i.jsx(Tr,{size:14}),"Add Reference ",H]},H)})})]})]})]})]},A.id)}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Gi,{size:24,className:"mx-auto mb-2 text-slate-400"}),i.jsx("p",{children:"No work experience added yet"}),i.jsx("p",{className:"text-sm mt-1",children:"Add jobs using the button above"})]})})]}),i.jsxs("div",{className:"card",ref:S,children:[i.jsxs("div",{className:"flex border-b border-slate-200",children:[i.jsx("button",{onClick:()=>t("references"),className:`flex-1 py-3 px-4 text-sm font-medium ${e==="references"?"text-teal-600 border-b-2 border-teal-600":"text-slate-500 hover:text-slate-700"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Va,{size:18}),"References"]})}),i.jsx("button",{onClick:async()=>{await O(),t("validators")},className:`flex-1 py-3 px-4 text-sm font-medium ${e==="validators"?"text-teal-600 border-b-2 border-teal-600":"text-slate-500 hover:text-slate-700"}`,children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(mn,{size:18}),"Validators"]})})]}),i.jsx("div",{className:"p-6",ref:j,children:e==="references"?i.jsx("div",{className:"space-y-6",children:w.length>0?w.map(A=>i.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4","data-job-id":A.id,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:A.title}),i.jsx("p",{className:"text-slate-600",children:A.company})]}),i.jsx("div",{className:"flex gap-2",children:[1,2].map(E=>{var T;const R=(T=v[A.id])==null?void 0:T.find(q=>q.reference_number===E);return R?i.jsxs("button",{onClick:()=>{l(A),u(R),h(E),window.dispatchEvent(new CustomEvent("scroll-to-item",{detail:{itemId:R.id,itemType:"reference"}}))},className:"px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-colors flex items-center gap-2 border border-slate-200","data-reference-id":R.id,children:[i.jsx(Yi,{size:14}),"Reference ",E,": ",R.full_name]},R.id):i.jsxs("button",{onClick:()=>{l(A),u(null),h(E)},className:"px-3 py-1.5 text-sm font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded-lg transition-colors flex items-center gap-2 border border-teal-200",children:[i.jsx(Tr,{size:14}),"Add Reference ",E]},E)})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(El,{size:14}),i.jsxs("span",{children:[new Date(A.start_date).toLocaleDateString()," - ",A.end_date?new Date(A.end_date).toLocaleDateString():"Present"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Yg,{size:14}),i.jsx("span",{children:A.location})]})]}),A.description&&i.jsx("p",{className:"text-slate-600 text-sm mb-3",children:A.description}),A.skills&&A.skills.length>0&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Skills:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:A.skills.map(E=>{const R=x.flatMap(T=>T.skills).find(T=>T.id===E);return R?i.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded-full text-xs",children:R.name},E):null})})]}),i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"References"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2].map(E=>{var T;const R=(T=v[A.id])==null?void 0:T.find(q=>q.reference_number===E);return i.jsx("div",{className:"border border-slate-200 rounded-lg p-4",children:R?i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx("h5",{className:"font-medium text-slate-900",children:R.full_name})}),i.jsx("p",{className:"text-sm text-slate-600 mb-2",children:R.email}),R.description&&i.jsx("p",{className:"text-sm text-slate-700 mb-2",children:R.description}),R.validation_status==="pending"&&i.jsx("div",{className:"mb-2",children:i.jsx("button",{onClick:()=>ee(R),className:"px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:"Unsend"})}),i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${ue(R.validation_status)}`,children:[z(R.validation_status),R.validation_status.charAt(0).toUpperCase()+R.validation_status.slice(1)]}),R.validation_notes&&i.jsxs("div",{className:"mt-2 p-2 bg-slate-50 rounded text-sm text-slate-600",children:[i.jsx("p",{className:"font-medium",children:"Validation Notes:"}),i.jsx("p",{children:R.validation_notes})]}),R.validated_at&&i.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Validated on ",new Date(R.validated_at).toLocaleDateString()]}),Z.some(q=>q.connected_eit_id===A.eit_id)&&R.validation_status==="pending"&&i.jsx("div",{className:"mt-3 flex gap-2",children:i.jsx("button",{onClick:()=>{oe(R),B("")},className:"px-3 py-1.5 text-sm font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded-lg transition-colors flex items-center gap-2 border border-teal-200",children:"Validate Reference"})})]}):i.jsxs("button",{onClick:()=>{l(A),u(null),h(E)},className:"w-full px-3 py-1.5 text-sm font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded-lg transition-colors flex items-center gap-2 border border-teal-200",children:[i.jsx(Tr,{size:14}),"Add Reference ",E]})},E)})})]})]},A.id)):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Gi,{size:24,className:"mx-auto mb-2 text-slate-400"}),i.jsx("p",{children:"No work experience added yet"}),i.jsx("p",{className:"text-sm mt-1",children:"Add jobs in the Work Experience section above"})]})}):i.jsx("div",{className:"space-y-6",children:P.length>0?P.map(A=>i.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:A.name}),i.jsx("div",{className:"space-y-4",children:A.skills.map(E=>{var R;return i.jsx("div",{className:"flex items-center justify-between","data-skill-id":E.id,children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-slate-800",children:E.name}),i.jsxs("div",{className:"flex items-center gap-2",children:[(R=f[E.id])==null?void 0:R.map(T=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>{T.status==="draft"&&(n(E.id),a(T),window.dispatchEvent(new CustomEvent("scroll-to-item",{detail:{itemId:T.id,itemType:"validator"}})))},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors flex items-center gap-2 ${T.status!=="draft"?"bg-slate-100 text-slate-400 cursor-not-allowed":"text-slate-600 hover:text-slate-700 hover:bg-slate-50"}`,"data-validator-id":T.id,disabled:T.status!=="draft",children:[i.jsx(Yi,{size:14}),T.full_name]}),i.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs font-semibold ${T.status==="draft"?"bg-yellow-100 text-yellow-800":T.status==="pending"?"bg-blue-100 text-blue-800":T.status==="scored"?"bg-green-100 text-green-800":"bg-slate-100 text-slate-500"}`,children:T.status.charAt(0).toUpperCase()+T.status.slice(1)}),T.status==="scored"&&i.jsxs("span",{className:"ml-2 text-green-700 font-bold",children:["Supervisor Score: ",T.score]}),T.status==="pending"&&i.jsx("button",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-orange-500 text-white rounded hover:bg-orange-600 disabled:bg-orange-200 disabled:cursor-not-allowed",disabled:!!(N[T.id]&&Date.now()-N[T.id]<5*60*1e3),onClick:async()=>{_(le=>({...le,[T.id]:Date.now()}));const{data:{user:q}}=await k.auth.getUser();if(!q)return;const{data:H}=await k.from("eit_profiles").select("full_name").eq("id",q.id).single();await Wd(T.id,(H==null?void 0:H.full_name)||q.email,E.name),await k.from("validators").update({status:"pending"}).eq("id",T.id),await O(),Oe.success("Nudge sent!")},children:N[T.id]&&Date.now()-N[T.id]<5*60*1e3?`Nudged (wait ${Math.ceil((5*60*1e3-(Date.now()-N[T.id]))/1e3)}s)`:"Nudge Supervisor"}),T.status==="scored"&&i.jsx("button",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-green-800 text-white rounded hover:bg-green-900 disabled:bg-green-300 disabled:cursor-not-allowed",disabled:!!(N[T.id]&&Date.now()-N[T.id]<5*60*1e3),onClick:async()=>{_(le=>({...le,[T.id]:Date.now()}));const{data:{user:q}}=await k.auth.getUser();if(!q)return;const{data:H}=await k.from("eit_profiles").select("full_name").eq("id",q.id).single();await Wd(T.id,(H==null?void 0:H.full_name)||q.email,E.name),await k.from("validators").update({status:"pending"}).eq("id",T.id),await O(),Oe.success("Rescore request sent!")},children:N[T.id]&&Date.now()-N[T.id]<5*60*1e3?`Requested (wait ${Math.ceil((5*60*1e3-(Date.now()-N[T.id]))/6e4)} min)`:"Ask for Rescore"}),(T.status==="draft"||T.status==="pending")&&i.jsx("button",{className:"btn btn-danger btn-xs",onClick:async()=>{await k.from("validators").delete().eq("id",T.id),setTimeout(()=>O(),300)},children:"Cancel"})]},T.id)),(!f[E.id]||f[E.id].length===0)&&i.jsx("button",{onClick:()=>{n(E.id),a(null)},className:"px-3 py-1.5 text-sm font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded-lg transition-colors",children:"Add Validator"})]})]})},E.id)})})]},A.name)):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(mn,{size:24,className:"mx-auto mb-2 text-slate-400"}),i.jsx("p",{children:"No completed skills yet"}),i.jsx("p",{className:"text-sm mt-1",children:"Complete skills in the Skills section to see them here"})]})})})]}),i.jsx(O5,{isOpen:s!==null,onClose:()=>{n(null),a(null)},skillName:s&&((de=x.flatMap(A=>A.skills).find(A=>A.id===s))==null?void 0:de.name)||"",skillId:s||"",existingValidator:r||void 0,onSave:L,status:(r==null?void 0:r.status)??"draft",loadValidators:O}),i.jsx(D5,{isOpen:o!==null&&d!==null,onClose:()=>{l(null),u(null),h(null)},job:o,referenceNumber:d,existingReference:c||void 0,onSave:G}),re&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Validate Reference"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Validation Notes"}),i.jsx("textarea",{value:J,onChange:A=>B(A.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",rows:4,placeholder:"Add any notes about the validation..."})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{oe(null),B("")},className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-colors",children:"Cancel"}),i.jsx("button",{onClick:()=>W(re,"rejected"),className:"px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:"Reject"}),i.jsx("button",{onClick:()=>W(re,"validated"),className:"px-4 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",children:"Validate"})]})]})})]})},M5=({onMenuClick:e})=>i.jsxs("header",{className:"fixed top-0 right-0 left-0 md:left-64 bg-white/80 backdrop-blur-md z-10 border-b border-slate-200 px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[e&&i.jsx("button",{className:"md:hidden p-2 rounded-lg text-slate-500 hover:bg-slate-100 mr-2",onClick:e,"aria-label":"Open sidebar menu",children:i.jsx(Xb,{size:24})}),i.jsx("div",{className:"ml-2 md:ml-0",children:i.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Supervisor Dashboard"})})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"hidden md:block",children:i.jsx(hw,{})}),i.jsx(pw,{}),i.jsx(fw,{})]})]}),$5=({appLoaded:e})=>{const[t,s]=m.useState(!1);return i.jsxs("div",{className:"min-h-screen bg-[#F5F7FA]",children:[i.jsx("div",{className:"hidden md:block",children:i.jsx(Vd,{})}),t&&i.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[i.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>s(!1)}),i.jsx("div",{className:"fixed inset-y-0 left-0 w-full max-w-xs bg-white shadow-xl",children:i.jsx(Vd,{onClose:()=>s(!1)})})]}),i.jsxs("div",{className:"md:pl-64 flex flex-col min-h-screen",children:[i.jsx(M5,{onMenuClick:()=>s(!0)}),i.jsx("main",{className:"flex-1 p-4 md:p-6 pt-20 md:pt-24 pb-20 md:pb-6",children:i.jsx(zv,{context:{appLoaded:e}})})]})]})},Ja=()=>i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})}),mx=async e=>{try{const[t,s,n]=await Promise.all([k.from("eit_skills").select("id",{count:"exact",head:!0}).eq("eit_id",e).not("rank","is",null),k.from("experiences").select("id",{count:"exact",head:!0}).eq("eit_id",e),k.from("experiences").select("id",{count:"exact",head:!0}).eq("eit_id",e).eq("supervisor_approved",!0)]);if(t.error||s.error||n.error)throw new Error("Failed to fetch EIT progress");const r=t.count||0,a=s.count||0,o=n.count||0,l=r/22,c=a/24,u=o/24;return{overallProgress:Math.round((l+c+u)/3*100),completedSkills:r,documentedExperiences:a,supervisorApprovals:o}}catch(t){return console.error("Error fetching EIT progress:",t),{overallProgress:0,completedSkills:0,documentedExperiences:0,supervisorApprovals:0}}},F5=()=>{const[e,t]=m.useState(!0),[s,n]=m.useState(null),[r,a]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState({}),[d,h]=m.useState(null),[f,g]=m.useState([]),[v,y]=m.useState(!1),[w,p]=m.useState({}),[x,b]=m.useState(null),[S,j]=m.useState(""),[N,_]=m.useState(!1),[C,I]=m.useState(null),[M,V]=m.useState(null);m.useEffect(()=>{(async()=>{t(!0),n(null);try{const{data:{user:B}}=await k.auth.getUser();if(!B){n("No user found");return}const[P,O]=await Promise.all([k.from("supervisor_eit_relationships").select("id, eit_id, status, created_at, eit_profiles (id, full_name, email, start_date, target_date)").eq("supervisor_id",B.id).eq("status","pending"),k.from("supervisor_eit_relationships").select("eit_id, eit_profiles (id, full_name, email, start_date, target_date)").eq("supervisor_id",B.id).eq("status","active")]);if(P.error)throw P.error;if(O.error)throw O.error;const D=(P.data||[]).map(W=>({...W,eit_profiles:Array.isArray(W.eit_profiles)?W.eit_profiles[0]:W.eit_profiles}));a(D);const K=(O.data||[]).map(W=>Array.isArray(W.eit_profiles)?W.eit_profiles[0]:W.eit_profiles);l(K);const se=K.map(W=>mx(W.id)),L=await Promise.all(se),G=K.map((W,ee)=>[W.id,L[ee]]);u(Object.fromEntries(G))}catch(B){console.error("Error fetching team data:",B),n("Failed to load team data. Please try again.")}finally{t(!1)}})()},[]),m.useEffect(()=>{const J=setInterval(async()=>{if(o.length>0){const B=o.map(D=>mx(D.id)),P=await Promise.all(B),O=o.map((D,K)=>[D.id,P[K]]);u(Object.fromEntries(O))}},3e4);return()=>clearInterval(J)},[o]);const Z=async(J,B)=>{t(!0);try{const{error:P}=await k.from("supervisor_eit_relationships").update({status:B?"active":"denied",updated_at:new Date().toISOString()}).eq("id",J);if(P)throw P;if(a(O=>O.filter(D=>D.id!==J)),B){const O=r.find(D=>D.id===J);O&&l(D=>[...D,O.eit_profiles])}}catch(P){console.error("Error handling request:",P),n("Failed to process request. Please try again.")}finally{t(!1)}},ie=async J=>{h(J),y(!0);const B=await k.auth.getUser();console.log("Supervisor auth user:",B),console.log("SupervisorTeam: Fetching skills for EIT",J.id);const{data:P,error:O}=await k.from("eit_skills").select("skill_id, rank, supervisor_score, category_name, skill_name, status, eit_id").eq("eit_id",J.id);O&&console.error("Supabase error:",O),console.log("Fetched skills:",P);const D={};(P||[]).forEach(K=>{D[K.category_name]||(D[K.category_name]=[]),D[K.category_name].push(K)}),console.log("Grouped by category:",D),p(D),y(!1)},re=async()=>{if(x){_(!0),I(null),V(null);try{const{data:{user:J}}=await k.auth.getUser();if(!J)throw new Error("No supervisor user");const{error:B}=await k.from("nudge_messages").insert({supervisor_id:J.id,eit_id:x.id,message:S||"Keep going! Your supervisor believes in you!"});if(B)throw B;await ci(x.id,"nudge","Nudge from Supervisor",S||"Keep going! Your supervisor believes in you!"),I("Nudge sent!"),j(""),setTimeout(()=>b(null),1200)}catch(J){V(J.message||"Failed to send nudge")}finally{_(!1)}}},oe=o.length>0?Math.round(o.reduce((J,B)=>{var P;return J+(((P=c[B.id])==null?void 0:P.overallProgress)||0)},0)/o.length):0;return e?i.jsx(Ja,{}):s?i.jsx("div",{className:"p-6 text-red-600",children:s}):i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Team"}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2 text-slate-800",children:"Team Progress"}),i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Average Completion"}),i.jsxs("span",{className:"text-sm font-semibold text-teal-600",children:[oe,"%"]})]}),i.jsx("div",{className:"h-3 bg-slate-100 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-teal-500 rounded-full transition-all duration-300",style:{width:`${oe}%`}})}),i.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"This is the average overall progress of all your connected EITs."})]}),r.length>0&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-8",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2 text-yellow-800",children:"Pending Requests"}),i.jsx("div",{className:"space-y-3",children:r.map(J=>i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 border-b border-yellow-100 pb-2 last:border-0",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:J.eit_profiles.full_name})," (",J.eit_profiles.email,")",i.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["Requested on ",new Date(J.created_at).toLocaleDateString()]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Z(J.id,!0),children:"Accept"}),i.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>Z(J.id,!1),children:"Deny"})]})]},J.id))})]}),i.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Team Members"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(J=>{const B=c[J.id];let P=null,O="teal",D="",K=!1;if(J.start_date&&J.target_date){const se=new Date,L=new Date(J.start_date),W=new Date(J.target_date).getTime()-L.getTime(),ee=se.getTime()-L.getTime();let $=Math.max(0,Math.min(100,Math.round(ee/W*100)));if(P=$,B){const he=B.overallProgress-$;he>0?(O="teal",D="Ahead of schedule"):he>=-5?(O="blue",D="On track"):(O="purple",D="Behind schedule",K=!0)}}return i.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-0",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),i.jsx("button",{className:"font-medium text-teal-700 hover:underline",onClick:()=>ie(J),children:J.full_name})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),i.jsx("p",{className:"font-medium",children:J.email})]}),B&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Overall Progress"}),i.jsxs("span",{className:"text-sm font-semibold text-teal-600",children:[B.overallProgress,"%"]})]}),i.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${O==="teal"?"bg-teal-500":O==="blue"?"bg-blue-500":"bg-purple-500"}`,style:{width:`${B.overallProgress}%`}})}),i.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[i.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[i.jsxs("span",{children:["Skills: ",B.completedSkills,"/22"]}),i.jsxs("span",{children:["Experiences: ",B.documentedExperiences,"/24"]}),i.jsxs("span",{children:["Approvals: ",B.supervisorApprovals,"/24"]})]}),P!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-1",children:[D," (Expected: ",P,"%)",K&&i.jsxs("button",{className:"ml-2 px-2 py-0.5 rounded bg-red-100 text-red-700 text-xs font-semibold flex items-center gap-1 hover:bg-red-200 transition",onClick:()=>{b(J),j("")},children:[i.jsx(Lf,{size:14,className:"mr-1"})," Nudge"]})]})]})]})]},J.id)})})]})}),d&&i.jsx(Hd,{isOpen:!!d,onClose:()=>h(null),children:i.jsxs("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto bg-white rounded-lg p-8",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-6",children:[d.full_name,"'s Skills"]}),v?i.jsx("div",{children:"Loading..."}):Object.keys(w).length===0?i.jsx("div",{children:"No marked skills found."}):i.jsx("div",{className:"pr-2",children:Object.entries(w).sort(([J],[B])=>{var D,K;const P=parseInt(((D=J.match(/\d+/))==null?void 0:D[0])||"0"),O=parseInt(((K=B.match(/\d+/))==null?void 0:K[0])||"0");return P-O}).map(([J,B])=>{const P=D=>{const K=D.match(/^([\d.]+)/);return K?K[1].split(".").map(Number):[0]},O=[...B].sort((D,K)=>{const se=P(D.skill_name),L=P(K.skill_name);for(let G=0;G<Math.max(se.length,L.length);G++){const W=se[G]??0,ee=L[G]??0;if(W!==ee)return W-ee}return 0});return i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-slate-800 mb-3 text-lg",children:J}),i.jsx("div",{className:"divide-y divide-slate-100 rounded-lg border border-slate-200 bg-white shadow-sm",children:O.map(D=>i.jsxs("div",{className:"flex flex-row items-center gap-4 px-4 py-3 transition-colors hover:bg-slate-50 group",children:[i.jsx("span",{className:"font-medium text-slate-800 flex-1 min-w-0 truncate",children:D.skill_name}),i.jsxs("div",{className:"flex gap-2",children:[D.rank!==null&&D.rank!==void 0&&i.jsxs("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 group-hover:bg-blue-200 transition-colors",title:"EIT's self score",children:["EIT: ",D.rank]}),D.supervisor_score!==null&&D.supervisor_score!==void 0&&i.jsxs("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 group-hover:bg-green-200 transition-colors",title:"Supervisor's score",children:["Supervisor: ",D.supervisor_score]})]})]},D.skill_id))})]},J)})})]})}),x&&i.jsx(Hd,{isOpen:!!x,onClose:()=>b(null),children:i.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded-lg",children:[i.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Send a Nudge to ",x.full_name]}),i.jsx("textarea",{className:"w-full border rounded p-2 mb-3",rows:3,placeholder:"Type your message (or leave blank for a default nudge)",value:S,onChange:J=>j(J.target.value),disabled:N}),M&&i.jsx("div",{className:"text-red-600 text-sm mb-2",children:M}),C&&i.jsx("div",{className:"text-green-600 text-sm mb-2",children:C}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{className:"btn btn-secondary",onClick:()=>b(null),disabled:N,children:"Cancel"}),i.jsx("button",{className:"btn btn-primary",onClick:re,disabled:N,children:N?"Sending...":"Send Nudge"})]})]})})]})},U5={"1.1 Regulations, Codes & Standards":`Correct selection and application of statutory and technical requirements.
Evidence: Explicit citation of CSA, IEC, ABSA, etc.; design reviews addressing code clauses.
Level cues:
1 = can name relevant codes.
3 = interprets and applies clauses without oversight.
5 = authoring corporate standards; mentoring others on compliance.`,"1.2 Technical & Design Constraints":`Identifying limits (temperature, load, schedule) and designing within them.
Evidence: Trade-off studies, design margin calculations, interdisciplinary coordination notes.
Level cues:
1 = recognises simple constraints given by others.
3 = optimises design under multiple constraints.
5 = sets project-wide constraint envelopes and negotiates them.`,"1.3 Risk Management for Technical Work":`Systematic identification and mitigation of technical risks (distinct from safety).
Evidence: FMEA tables, hazard logs, risk registers with action plans.
Level cues:
1 = attends risk meetings.
3 = creates risk matrix and closes actions.
5 = institutionalises risk methodologies across projects.`,"1.4 Application of Theory":`Using engineering science to create or validate designs.
Evidence: Hand calculations, simulation models, design notes.
Level cues:
1 = performs textbook calcs shown by others.
3 = selects appropriate theory and justifies assumptions.
5 = derives novel analytical methods adopted by peers.`,"1.5 Solution Techniques & Results Verification":`Self-checking, peer-reviewing, and validating outputs.
Evidence: Check prints, back-calculations, test-vs-model comparisons.
Level cues:
1 = runs software without independent check.
3 = uses alternative method to cross-verify.
5 = implements QA verification workflows enterprise-wide.`,"1.6 Safety in Design & Technical Work":`Integrating safety / HAZOP thinking into technical tasks.
Evidence: SIL/LOPA studies, safety factors, safeguard design notes.
Level cues:
1 = attends toolbox talks.
3 = designs safety features and documents residual risk.
5 = chairs safety reviews and influences corporate safety culture.`,"1.7 Systems & Their Components":`Understanding and managing interactions within complex systems.
Evidence: System block diagrams, interface registers, control narratives.
Level cues:
1 = works on single component.
3 = balances interfaces across disciplines.
5 = architects whole-of-plant integration strategies.`,"1.8 Project or Asset Life-Cycle Awareness":`Considering feasibility through decommissioning.
Evidence: Stage-gate reports, O&M cost analyses, end-of-life plans.
Level cues:
1 = aware of immediate project phase.
3 = optimises design for O&M and eventual retirement.
5 = leads life-cycle cost optimisation across portfolio.`,"1.9 Quality Assurance":`Ensuring designs and deliverables meet defined quality criteria.
Evidence: ITPs, NCR resolution, audit findings.
Level cues:
1 = follows checklists.
3 = designs QA checks and resolves NCRs.
5 = drives continuous-improvement programs, reduces defect rates.`,"1.10 Engineering Documentation":`Creating clear drawings, reports, calculations.
Evidence: Issued-for-construction packages, calculation books.
Level cues:
1 = fills templates.
3 = authors multi-disciplinary documents accepted without major edits.
5 = sets documentation standards and trains staff.`,"2.1 Oral Communication (English)":`Clear, professional spoken English (presentations, meetings).
Evidence: Recorded presentations, client kick-off meetings.
Level cues:
1 = reads prepared notes.
3 = leads technical meetings, answers questions concisely.
5 = facilitates high-stakes negotiations.`,"2.2 Written Communication (English)":`Clear, structured technical writing.
Evidence: Formal reports, proposals, standards.
Level cues:
1 = grammar issues persist.
3 = reports accepted by clients without rewrite.
5 = publishes guidance documents adopted by organisation.`,"2.3 Reading & Comprehension (English)":`Using written technical material effectively.
Evidence: Mark-ups showing critical review, code interpretation memos.
Level cues:
1 = needs help interpreting dense specs.
3 = extracts crucial requirements, flags conflicts.
5 = synthesises complex literature into design policy.`,"3.1 Project Management Principles":`Scope, schedule, risk, change control.
Evidence: Gantt charts, change-order logs, status reports.
Level cues:
1 = tracks own tasks only.
3 = develops baselines, mitigates slippage.
5 = manages multi-discipline programs, mentors PMs.`,"3.2 Finances & Budget":`Cost estimating, cash-flow tracking, value engineering.
Evidence: CAPEX/OPEX estimates, variance analyses.
Level cues:
1 = inputs timesheets.
3 = owns WBS cost code, forecasts EAC accurately.
5 = optimises portfolio budgets, secures funding approvals.`,"4.1 Promote Team Effectiveness & Resolve Conflict":`Fostering collaboration and addressing interpersonal issues.
Evidence: Meeting minutes, stakeholder feedback, conflict-resolution plans.
Level cues:
1 = participates politely.
3 = facilitates consensus, resolves minor conflicts.
5 = leads high-tension negotiations, builds high-performing multi-site teams.`,"5.1 Professional Accountability (Ethics, Liability, Limits)":`Acting ethically, declaring limits, managing conflicts of interest.
Evidence: Signed professional-practice declarations, ethics case notes.
Level cues:
1 = knows the Code of Ethics exists.
3 = raises concerns proactively, seeks guidance.
5 = champions ethical culture, develops training modules.`,"6.1 Protection of the Public Interest":`Safety audits, public-impact assessments.
Evidence: Safety audits, public-impact assessments.
Level cues:
1 = identifies obvious hazards.
3 = designs to mitigate societal risk.
5 = influences public-safety policy.`,"6.2 Benefits of Engineering to the Public":`Community engagement records, cost-benefit studies.
Evidence: Community engagement records, cost-benefit studies.
Level cues:
1 = mentions public benefit.
3 = quantifies benefits, presents to stakeholders.
5 = leads projects delivering measurable public value.`,"6.3 Role of Regulatory Bodies":`Compliance registers, correspondence with AHJs.
Evidence: Compliance registers, correspondence with AHJs.
Level cues:
1 = names APEGA.
3 = coordinates approvals with multiple regulators.
5 = advises regulators, serves on industry committees.`,"6.4 Application of Sustainability Principles":`Life-cycle carbon analyses, circular-economy studies.
Evidence: Life-cycle carbon analyses, circular-economy studies.
Level cues:
1 = reuses specs.
3 = optimises design for energy/resource efficiency.
5 = drives corporate ESG strategy.`,"6.5 Promotion of Sustainability":`Training sessions delivered, sustainability KPIs met.
Evidence: Training sessions delivered, sustainability KPIs met.
Level cues:
1 = attends webinars.
3 = implements team sustainability actions.
5 = publishes best-practice guides, influences supply chain.`};function z5(e){const t=U5[e];if(!t)return i.jsx("span",{children:"No summary available for this skill."});const[s,n,...r]=t.split(/\n|\r/).filter(Boolean),a=n==null?void 0:n.replace(/^Evidence:/,"").trim(),o=r.filter(l=>l.trim().match(/^\d/));return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"font-semibold",children:"Skill Definition:"}),i.jsx("span",{className:"block text-slate-700 mt-1",children:s})]}),a&&i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"font-semibold",children:"Evidence supervisors might look for:"}),i.jsx("ul",{className:"list-disc ml-6 mt-1 text-slate-700",children:a.split(";").map((l,c)=>i.jsx("li",{children:l.trim()},c))})]}),o.length>0&&i.jsxs("div",{className:"mb-1",children:[i.jsx("span",{className:"font-semibold",children:"Level-specific indicators (cues):"}),i.jsx("ul",{className:"mt-1 ml-6 text-slate-700",children:o.map((l,c)=>{const u=l.match(/^(\d)\s*=\s*(.*)$/);return u?i.jsxs("li",{children:[i.jsx("span",{className:"font-bold",children:u[1]}),": ",u[2]]},c):i.jsx("li",{children:l},c)})})]})]})}const V5=()=>{var z,de,A;const[e,t]=m.useState("skills"),[s,n]=m.useState("all"),[r,a]=m.useState([]),[o,l]=m.useState({}),[c,u]=m.useState({}),[d,h]=m.useState({}),[f,g]=m.useState({}),[v,y]=m.useState(!0),[w,p]=m.useState([]),[x,b]=m.useState(!0),[S,j]=m.useState(null),[N,_]=m.useState(null),[C,I]=m.useState(!1),[M,V]=m.useState({}),[Z,ie]=m.useState(null),[re,oe]=m.useState(!1),[J,B]=m.useState([]),[P,O]=m.useState([]),[D,K]=m.useState([]),se=s==="all"?J:J.filter(E=>E.eit_id===s),L=s==="all"?P:P.filter(E=>{var R;return((R=E.sao)==null?void 0:R.eit_id)===s}),G=s==="all"?f:Object.fromEntries(Object.entries(f).filter(([E])=>E.startsWith(s+"_")));m.useEffect(()=>{(async()=>{y(!0);const{data:{user:R}}=await k.auth.getUser();if(!R)return;const{data:T,error:q}=await k.from("skill_validations").select("*").eq("validator_id",R.id).order("validated_at",{ascending:!1}),{data:H,error:le}=await k.from("validators").select("*").eq("email",R.email).eq("status","pending");if(q||!T){y(!1);return}const xe=Array.from(new Set([...T.map(je=>je.eit_id),...(H||[]).map(je=>je.eit_id)])),mt=Array.from(new Set([...T.map(je=>je.skill_id),...(H||[]).map(je=>je.skill_id)])),[{data:lt},{data:et}]=await Promise.all([k.from("eit_profiles").select("id, full_name, email").in("id",xe),k.from("skills").select("id, name").in("id",mt)]),pt={};(lt||[]).forEach(je=>{pt[je.id]=je}),u(pt);const Ls={};(et||[]).forEach(je=>{Ls[je.id]=je}),h(Ls);const Wt={};T.forEach(je=>{const De=`${je.eit_id}_${je.skill_id}`;Wt[De]||(Wt[De]=[]),Wt[De].push(je)});const wn=Object.values(Wt).map(je=>{var Ms,$s;const De=je[0];return{id:`${De.eit_id}_${De.skill_id}`,skill_id:De.skill_id,full_name:((Ms=pt[De.eit_id])==null?void 0:Ms.full_name)||"",email:(($s=pt[De.eit_id])==null?void 0:$s.email)||"",description:De.feedback||"",status:"completed",score:De.score,created_at:De.validated_at,updated_at:De.validated_at,eit_id:De.eit_id}});a(wn),B(H||[]),g(Wt),y(!1)})()},[]);const W=async()=>{b(!0),j(null);try{const{data:{user:E}}=await k.auth.getUser();if(!E)throw new Error("No authenticated user");const{data:R,error:T}=await k.from("sao_feedback").select("*, sao:saos (title, content, created_at, eit_id)").eq("supervisor_id",E.id).order("created_at",{ascending:!1});if(T)throw T;K(R||[]),O((R||[]).filter(H=>H.status==="pending"));const q=Array.from(new Set((R||[]).map(H=>{var le;return(le=H.sao)==null?void 0:le.eit_id}).filter(Boolean)));if(q.length>0){const{data:H}=await k.from("eit_profiles").select("id, full_name").in("id",q),le={};(H||[]).forEach(xe=>{le[xe.id]=xe.full_name}),V(le)}}catch(E){j(E.message||"Failed to load feedback requests")}finally{b(!1)}};m.useEffect(()=>{W()},[]);const ee=(E,R)=>{l(T=>({...T,[E]:R}))},$=async E=>{try{const R=o[E.id];if(!R||R<1||R>5)return;const{data:{user:T}}=await k.auth.getUser();if(!T)return;const[q,H]=E.id.split("_"),{data:le,error:xe}=await k.from("skill_validations").insert({eit_id:q,skill_id:H,validator_id:T.id,score:R,validated_at:new Date().toISOString(),feedback:E.description}).select().single();if(xe)throw xe;g(lt=>{var pt;const et=`${q}_${H}`;return{...lt,[et]:[{...le,full_name:((pt=T.user_metadata)==null?void 0:pt.full_name)||"",email:T.email},...lt[et]||[]]}}),a(lt=>lt.map(et=>et.id===E.id?{...et,score:R,updated_at:new Date().toISOString()}:et)),l(lt=>{const et={...lt};return delete et[E.id],et});const mt=c[q];mt&&await I3(mt.email,H,R)}catch(R){console.error("Error submitting score:",R)}},he=async E=>{await k.from("sao_feedback").update({status:"resolved"}).eq("id",E),p(R=>R.map(T=>T.id===E?{...T,status:"resolved"}:T))},ue=async(E,R)=>{const{data:{user:T}}=await k.auth.getUser();T&&(await k.from("sao_feedback").update({feedback:R,status:"submitted"}).eq("sao_id",E).eq("supervisor_id",T.id),K(q=>q.map(H=>H.sao_id===E?{...H,feedback:R,status:"submitted"}:H)),O(q=>q.filter(H=>!(H.sao_id===E&&H.status!=="pending"))),I(!1),_(null),Rn.success("Feedback submitted successfully!"))};return i.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("h1",{className:"text-2xl font-bold",children:"Review Center"})}),i.jsxs("div",{className:"flex items-center justify-between my-8 w-full",children:[i.jsx("div",{className:"flex items-center",children:i.jsx("button",{onClick:e==="skills"?()=>window.location.reload():W,disabled:v||x,className:"px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:v&&e==="skills"||x&&e==="saos"?"Refreshing...":"Refresh"})}),i.jsx("div",{className:"flex-1 flex justify-center",children:i.jsxs("div",{className:"relative flex bg-slate-100 rounded-full p-1 shadow-inner gap-0 items-center",children:[i.jsx("button",{onClick:()=>t("skills"),className:`px-6 py-2 rounded-full font-semibold transition-all duration-200 text-sm focus:outline-none z-10
                ${e==="skills"?"bg-teal-600 text-white shadow-lg":"text-slate-700 hover:text-teal-600"}`,style:{marginRight:"-0.5rem",marginLeft:"0.5rem"},"aria-pressed":e==="skills",children:"Skills"}),i.jsx("button",{onClick:()=>t("saos"),className:`px-6 py-2 rounded-full font-semibold transition-all duration-200 text-sm focus:outline-none z-10
                ${e==="saos"?"bg-teal-600 text-white shadow-lg":"text-slate-700 hover:text-teal-600"}`,style:{marginLeft:"-0.5rem",marginRight:"0.5rem"},"aria-pressed":e==="saos",children:"SAOs"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"ml-2 flex items-center gap-2",children:[i.jsx("label",{htmlFor:"eit-filter",className:"text-sm font-medium text-slate-700",children:"Filter by EIT:"}),i.jsxs("select",{id:"eit-filter",value:s,onChange:E=>n(E.target.value),className:"rounded-lg border border-slate-300 px-3 py-1.5 text-sm focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500",children:[i.jsx("option",{value:"all",children:"All EITs"}),Object.values(c).map(E=>i.jsx("option",{value:E.id,children:E.full_name},E.id))]})]}),i.jsx("button",{className:`p-2 rounded-full text-slate-500 hover:bg-slate-200 transition ${re?"bg-slate-300":""}`,title:"Show History",onClick:()=>oe(E=>!E),type:"button",children:i.jsx(li,{size:20})})]})]}),e==="skills"&&!re&&i.jsx("div",{children:v?i.jsx("div",{children:"Loading..."}):se.length===0?i.jsx("div",{children:"No pending skill validation requests."}):i.jsx("div",{className:"space-y-4",children:se.map(E=>{const R=c[E.eit_id],T=d[E.skill_id];return i.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4 transition-all duration-300",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold flex items-center gap-2",children:["Skill: ",T?T.name:E.skill_id,T&&i.jsx("button",{className:"ml-1 p-1 rounded-full text-blue-500 hover:bg-blue-50",title:"View Skill Rubric",onClick:()=>ie(T.name),type:"button",children:i.jsx(Ud,{size:18})})]}),i.jsxs("div",{className:"text-slate-600",children:["EIT: ",R?`${R.full_name} (${R.email})`:E.eit_id]}),i.jsxs("div",{className:"text-slate-600",children:["Description: ",E.description]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",min:1,max:5,value:o[E.id]||"",onChange:q=>ee(E.id,Number(q.target.value)),className:"input w-24",placeholder:"Score"}),i.jsx("button",{className:"btn btn-primary",onClick:()=>$(E),disabled:!o[E.id]||o[E.id]<1||o[E.id]>5,children:"Submit Score"})]})]},E.id)})})}),e==="skills"&&re&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xl font-bold mb-4",children:"History"}),v?i.jsx("div",{children:"Loading..."}):Object.keys(G).length===0?i.jsx("div",{children:"No history available."}):i.jsx("div",{className:"space-y-4",children:Object.entries(G).map(([E,R])=>{const T=R[0],q=c[T.eit_id],H=d[T.skill_id];return i.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4 transition-all duration-300",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold flex items-center gap-2",children:["Skill: ",H?H.name:T.skill_id,H&&i.jsx("button",{className:"ml-1 p-1 rounded-full text-blue-500 hover:bg-blue-50",title:"View Skill Rubric",onClick:()=>ie(H.name),type:"button",children:i.jsx(Ud,{size:18})})]}),i.jsxs("div",{className:"text-slate-600",children:["EIT: ",q?`${q.full_name} (${q.email})`:T.eit_id]}),i.jsxs("div",{className:"text-slate-600",children:["Description: ",T.feedback||""]}),i.jsx("div",{className:"mt-3 border-t pt-3",children:i.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:R.map((le,xe)=>i.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("span",{className:"font-medium text-slate-700",children:["Score: ",le.score]}),i.jsx("span",{className:"text-xs text-slate-500",children:le.validated_at?new Date(le.validated_at).toLocaleDateString():""})]}),le.feedback&&i.jsxs("div",{className:"text-slate-600 text-xs mt-1",children:[i.jsx("span",{className:"font-medium",children:"Feedback:"})," ",le.feedback]})]},xe))})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",min:1,max:5,value:o[`${T.eit_id}_${T.skill_id}`]||"",onChange:le=>ee(`${T.eit_id}_${T.skill_id}`,Number(le.target.value)),className:"input w-24",placeholder:"Score"}),i.jsx("button",{className:"btn btn-primary",onClick:()=>$({...T,id:`${T.eit_id}_${T.skill_id}`,description:T.feedback||""}),disabled:!o[`${T.eit_id}_${T.skill_id}`]||o[`${T.eit_id}_${T.skill_id}`]<1||o[`${T.eit_id}_${T.skill_id}`]>5,children:"Update Score"})]})]},E)})})]}),e==="saos"&&!re&&i.jsx("div",{children:x?i.jsx("div",{children:"Loading..."}):S?i.jsx("div",{className:"text-red-600",children:S}):L.length===0?i.jsx("div",{className:"text-slate-500",children:"No pending feedback requests assigned to you."}):i.jsx("div",{className:"space-y-4",children:L.map(E=>{var R,T,q;return i.jsx("div",{className:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{_(E),I(!0)},children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-teal-600",children:((R=E.sao)==null?void 0:R.title)||"Untitled SAO"}),i.jsxs("p",{className:"text-sm text-slate-500",children:["From: ",M[((T=E.sao)==null?void 0:T.eit_id)||""]||((q=E.sao)==null?void 0:q.eit_id)||"Unknown"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[E.status==="pending"&&i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:"Pending Review"}),E.status==="submitted"&&i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Feedback Submitted"})]})]})},E.id)})})}),e==="saos"&&re&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xl font-bold mb-4",children:"History"}),x?i.jsx("div",{children:"Loading..."}):D.filter(E=>E.status==="submitted").length===0?i.jsx("div",{className:"text-slate-500",children:"No SAO history available."}):i.jsx("div",{className:"space-y-4",children:D.filter(E=>E.status==="submitted").map(E=>{var R,T,q;return i.jsx("div",{className:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{_(E),I(!0)},children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-teal-600",children:((R=E.sao)==null?void 0:R.title)||"Untitled SAO"}),i.jsxs("p",{className:"text-sm text-slate-500",children:["From: ",M[((T=E.sao)==null?void 0:T.eit_id)||""]||((q=E.sao)==null?void 0:q.eit_id)||"Unknown"]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Feedback Submitted"})})]})},E.id)})})]}),C&&N&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:((z=N.sao)==null?void 0:z.title)||"Untitled SAO"}),i.jsx("button",{onClick:()=>{I(!1),_(null)},className:"text-slate-400 hover:text-slate-600",children:i.jsx(Nt,{size:24})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"SAO Content"}),i.jsx("div",{className:"bg-slate-50 rounded-lg p-4",children:N.sao_id&&((de=N.sao)==null?void 0:de.content)&&i.jsx(Rw,{saoId:N.sao_id,content:N.sao.content})})]}),i.jsx(Uf,{feedback:[N],onResolve:he,onSubmitFeedback:ue,isSupervisor:!0,saoContent:(A=N.sao)==null?void 0:A.content})]})})}),Z&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600",onClick:()=>ie(null),children:""}),i.jsx("h3",{className:"text-lg font-semibold mb-4",children:Z}),z5(Z)]})})]})},q5=()=>i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Documents"}),i.jsx("p",{children:"Access and share documents with your team. (Coming soon)"})]}),B5=Bt()(zf(e=>({eitRequests:!0,skillValidationRequests:!0,saoFeedback:!0,toggleEitRequests:()=>e(t=>({eitRequests:!t.eitRequests})),toggleSkillValidationRequests:()=>e(t=>({skillValidationRequests:!t.skillValidationRequests})),toggleSaoFeedback:()=>e(t=>({saoFeedback:!t.saoFeedback}))}),{name:"supervisor-notification-preferences"})),W5=()=>{var hi;const[e,t]=m.useState(null),[s,n]=m.useState(""),[r,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState(!1),[d,h]=m.useState({type:"",text:""}),[f,g]=m.useState(!1),[v,y]=m.useState(!1),[w,p]=m.useState(!1),[x,b]=m.useState(""),[S,j]=m.useState(""),[N,_]=m.useState(""),[C,I]=m.useState(""),[M,V]=m.useState("Free"),[Z,ie]=m.useState([]),[re,oe]=m.useState(""),[J,B]=m.useState("idle"),[P,O]=m.useState(""),[D,K]=m.useState(!1),[se,L]=m.useState(""),[G,W]=m.useState(""),[ee,$]=m.useState(""),[he,ue]=m.useState("idle"),[z,de]=m.useState(""),{eitRequests:A,skillValidationRequests:E,saoFeedback:R,toggleEitRequests:T,toggleSkillValidationRequests:q,toggleSaoFeedback:H}=B5(),[le,xe]=m.useState(!1),[mt,lt]=m.useState(""),[et,pt]=m.useState(""),[Ls,Wt]=m.useState(""),[wn,je]=m.useState(""),[De,Ms]=m.useState(!1),[$s,jn]=m.useState(null),[ps,Sn]=m.useState(!1),{tier:Ht,documentLimit:ui,saoLimit:Wf,supervisorLimit:di,hasAiAccess:uc,fetchSubscription:Ka}=qa();m.useEffect(()=>{(async()=>{var Le;const{data:{user:ne}}=await k.auth.getUser();ne&&(t(ne),n(((Le=ne.user_metadata)==null?void 0:Le.full_name)||""),a(ne.email||""),l(ne.email||""),k.from("supervisor_eit_relationships").select("eit_profiles (id, full_name, email)").eq("supervisor_id",ne.id).eq("status","active").then(({data:Ue})=>{Ue&&ie(Ue.map(_t=>_t.eit_profiles).filter(_t=>_t))}),k.auth.mfa.listFactors().then(({data:Ue})=>{var Xa;const _t=(Xa=Ue==null?void 0:Ue.all)==null?void 0:Xa.find(kn=>kn.factor_type==="totp"&&kn.status==="verified");K(!!_t)}))})(),Ka()},[]);const Ga=async te=>{te.preventDefault(),u(!0),h({type:"",text:""});try{const ne={};f&&(ne.data={full_name:s}),v&&o!==r&&(ne.email=o);const{error:Le}=await k.auth.updateUser(ne);if(Le)throw Le;if(f&&e){const{error:_t}=await k.from("supervisor_profiles").update({full_name:s}).eq("id",e.id);if(_t)throw _t}h({type:"success",text:"Profile updated successfully!"}),g(!1),y(!1);const{data:{user:Ue}}=await k.auth.getUser();Ue&&(t(Ue),a(Ue.email||""),l(Ue.email||""))}catch(ne){h({type:"error",text:"Failed to update profile. Please try again."}),console.error("Error updating profile:",ne)}finally{u(!1)}},Ya=te=>te.split(" ").map(ne=>ne[0]).join("").toUpperCase();return i.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8",children:[i.jsxs("section",{className:"card p-6 flex flex-col md:flex-row gap-6 items-center",children:[i.jsx("div",{className:"flex flex-col items-center",children:i.jsx("div",{className:"relative",children:(hi=e==null?void 0:e.user_metadata)!=null&&hi.avatar_url?i.jsx("img",{src:e.user_metadata.avatar_url,className:"w-24 h-24 rounded-full object-cover bg-slate-100",alt:"Profile"}):i.jsx("div",{className:"w-24 h-24 rounded-full bg-teal-500 flex items-center justify-center text-white text-3xl font-bold",children:Ya(s||r)})})}),i.jsxs("form",{className:"flex-1 space-y-4 w-full",onSubmit:Ga,children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[i.jsx(tw,{})," Profile Information",i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"SUPERVISOR"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fullName",className:"label",children:"Full Name"}),f?i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"text",id:"fullName",value:s,onChange:te=>n(te.target.value),className:"input",placeholder:"Enter your full name"}),i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{type:"button",onClick:()=>g(!1),className:"btn btn-secondary",children:"Cancel"})})]}):i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{children:s||"Not set"}),i.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-teal-600 hover:text-teal-700",children:"Edit"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),v?i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"email",id:"newEmail",value:o,onChange:te=>l(te.target.value),className:"input",placeholder:"Enter your new email"}),i.jsx("p",{className:"text-sm text-slate-500",children:"After changing your email, you'll need to use the new email address to log in."}),i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{type:"button",onClick:()=>y(!1),className:"btn btn-secondary",children:"Cancel"})})]}):i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{children:r}),i.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-teal-600 hover:text-teal-700",children:"Edit"})]})]}),(f||v)&&i.jsx("button",{type:"submit",disabled:c,className:"btn btn-primary",children:c?"Saving...":"Save Changes"})]})]}),i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[i.jsx(Yb,{})," Security"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"label",children:"Password"}),w?i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{type:"password",id:"currentPassword",value:x,onChange:te=>b(te.target.value),className:"input",placeholder:"Current password"}),i.jsx("input",{type:"password",id:"newPassword",value:S,onChange:te=>j(te.target.value),className:"input",placeholder:"New password"}),i.jsx("input",{type:"password",id:"confirmPassword",value:N,onChange:te=>_(te.target.value),className:"input",placeholder:"Confirm new password"}),C&&i.jsx("p",{className:"text-sm text-red-600",children:C}),i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn btn-secondary",children:"Cancel"})})]}):i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{children:""}),i.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-sm text-teal-600 hover:text-teal-700",children:"Change"})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"label",children:"Two-Factor Authentication"}),D?i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-green-700 font-medium",children:"Enabled (TOTP)"}),i.jsx("button",{className:"btn btn-danger w-fit",onClick:async()=>{var te;ue("idle"),de("");try{const{data:ne}=await k.auth.mfa.listFactors(),Le=(te=ne==null?void 0:ne.all)==null?void 0:te.find(Ue=>Ue.factor_type==="totp"&&Ue.status==="verified");Le&&(await k.auth.mfa.unenroll({factorId:Le.id}),K(!1))}catch{de("Failed to disable 2FA.")}},children:"Disable 2FA"}),z&&i.jsx("span",{className:"text-red-600 text-sm",children:z})]}):he==="enrolling"?i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{children:"Scan this QR code with your authenticator app:"}),se&&i.jsx("img",{src:se,alt:"TOTP QR Code",className:"w-40 h-40"}),i.jsx("input",{type:"text",className:"input mt-2",placeholder:"Enter 6-digit code",value:ee,onChange:te=>$(te.target.value),maxLength:6}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"btn btn-primary w-fit",onClick:async()=>{ue("verifying"),de("");try{const{data:te,error:ne}=await k.auth.mfa.challenge({factorId:G});if(ne)throw ne;const{error:Le}=await k.auth.mfa.verify({factorId:G,challengeId:te.id,code:ee});if(Le)throw Le;K(!0),ue("enabled")}catch{de("Invalid code. Please try again."),ue("enrolling")}},disabled:ee.length!==6,children:"Verify"}),i.jsx("button",{className:"btn btn-secondary w-fit",onClick:async()=>{ue("idle"),L(""),W(""),$(""),de("");try{const{data:te}=await k.auth.mfa.listFactors();if(te!=null&&te.all)for(const ne of te.all)ne.factor_type==="totp"&&ne.status!=="verified"&&await k.auth.mfa.unenroll({factorId:ne.id})}catch{}},children:"Cancel"})]}),z&&i.jsx("span",{className:"text-red-600 text-sm",children:z})]}):i.jsx("button",{className:"btn btn-primary w-fit",onClick:async()=>{ue("enrolling"),de(""),L(""),W(""),$("");try{const{data:te}=await k.auth.mfa.listFactors();if(te!=null&&te.all)for(const ne of te.all)ne.factor_type==="totp"&&ne.status!=="verified"&&await k.auth.mfa.unenroll({factorId:ne.id})}catch{}try{const{data:te,error:ne}=await k.auth.mfa.enroll({factorType:"totp"});if(ne)throw ne;L(te.totp.qr_code),W(te.id)}catch{de("Failed to start 2FA enrollment."),ue("idle")}},children:"Set up Two-Factor Authentication"})]})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(_a,{className:"h-6 w-6 text-gray-400 mr-2"}),i.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Notification Preferences"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"EIT Connection Requests"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when an EIT requests to connect with you"})]}),i.jsx(Fn,{checked:A,onChange:T,className:`${A?"bg-teal-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2`,children:i.jsx("span",{className:`${A?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Skill Validation Requests"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when an EIT requests skill validation"})]}),i.jsx(Fn,{checked:E,onChange:q,className:`${E?"bg-teal-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2`,children:i.jsx("span",{className:`${E?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"SAO Feedback"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when you receive new SAO feedback requests"})]}),i.jsx(Fn,{checked:R,onChange:H,className:`${R?"bg-teal-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2`,children:i.jsx("span",{className:`${R?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})]})]}),i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[i.jsx(Lf,{})," EIT Connections"]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:"Current Connections"}),Z.length===0?i.jsx("div",{className:"text-slate-400",children:"No active EIT connections."}):i.jsx("ul",{className:"divide-y divide-slate-200",children:Z.map(te=>i.jsxs("li",{className:"py-2 flex flex-col md:flex-row md:items-center md:justify-between",children:[i.jsx("span",{className:"font-medium text-slate-800",children:te.full_name}),i.jsx("span",{className:"text-slate-500 text-sm",children:te.email})]},te.id))})]}),i.jsx("div",{className:"border-t border-slate-200 my-4"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:"Connect with a New EIT"}),Ht==="free"&&Z.length>=1&&i.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-yellow-900 font-semibold text-center",children:"You have reached your EIT connection limit for the Free plan. Upgrade to Enterprise to connect with more EITs."}),i.jsxs("form",{className:"flex flex-col md:flex-row gap-4 items-start md:items-end",onSubmit:async te=>{if(te.preventDefault(),B("idle"),O(""),!!re){if(Ht==="free"&&Z.length>=1){B("error"),O("You have reached your EIT connection limit for the Free plan. Please upgrade to Enterprise to connect with more EITs.");return}u(!0);try{const{data:ne}=await k.from("eit_profiles").select("id, email, full_name").eq("email",re).single();if(!ne){B("notfound"),O("No EIT found with that email."),u(!1);return}const{data:Le}=await k.from("supervisor_eit_relationships").select("id, status").eq("supervisor_id",e==null?void 0:e.id).eq("eit_id",ne.id).maybeSingle();if(Le&&Le.status==="pending"){B("pending"),O("A request is already pending for this EIT."),u(!1);return}if(Le&&Le.status==="active"){B("already"),O("This EIT is already connected."),u(!1);return}const{error:Ue}=await k.from("supervisor_eit_relationships").upsert({supervisor_id:e==null?void 0:e.id,eit_id:ne.id,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(Ue)throw Ue;B("success"),O("Request sent! The EIT will see it in their dashboard."),oe("")}catch(ne){console.error(ne),B("error"),O("Failed to send request. Please try again.")}finally{u(!1)}}},children:[i.jsxs("div",{className:"flex-1 w-full",children:[i.jsx("label",{htmlFor:"eitEmail",className:"label",children:"EIT Email"}),i.jsx("input",{type:"email",id:"eitEmail",value:re,onChange:te=>oe(te.target.value),className:"input w-full",placeholder:"Enter EIT's email",required:!0,disabled:Ht==="free"&&Z.length>=1})]}),i.jsx("button",{type:"submit",className:"btn btn-primary whitespace-nowrap",disabled:c||Ht==="free"&&Z.length>=1,children:c?"Sending...":"Send Request"})]}),P&&i.jsx("div",{className:`mt-3 text-sm p-2 rounded-md ${J==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:P})]})]})]}),i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[i.jsx(_a,{})," Notifications"]}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Coming soon: Manage your email and in-app notification preferences."})]}),i.jsxs("section",{className:"card p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[i.jsx(ew,{})," Appearance"]}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Coming soon: Switch between light and dark mode."})]}),i.jsxs("div",{className:"pt-8",children:[i.jsxs("div",{className:"mb-6 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-2",children:"Choose Your Plan"}),i.jsx("p",{className:"text-gray-600 text-md max-w-2xl mx-auto",children:"Select the plan that best fits your needs"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[i.jsxs("div",{className:`border ${Ht==="free"?"border-blue-500":"border-gray-200"} rounded-2xl p-8 bg-gradient-to-br from-blue-50 to-white flex flex-col items-center shadow-sm`,children:[i.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2",children:"Free"}),i.jsx("p",{className:"text-5xl font-extrabold text-blue-800 mb-4",children:"$0"}),i.jsxs("ul",{className:"mb-6 w-full space-y-3",children:[i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""}),"Up to 5 documents"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""}),"Up to 5 SAOs"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""}),"Connect with 1 EIT"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Standard support"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-red-500 mr-2",children:""})," AI Features"]})]}),Ht==="free"?i.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-semibold text-sm shadow",children:"Current Plan"}):i.jsx("button",{onClick:()=>window.location.href="mailto:contact@accreda.com?subject=Downgrade to Free Plan",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full font-semibold text-sm shadow transition-colors",children:"Contact to Downgrade"})]}),i.jsxs("div",{className:`border ${Ht==="enterprise"?"border-purple-500":"border-gray-200"} rounded-2xl p-8 bg-gradient-to-br from-purple-50 to-white flex flex-col items-center shadow-sm`,children:[i.jsx("h3",{className:"text-2xl font-bold text-purple-900 mb-2",children:"Enterprise"}),i.jsx("p",{className:"text-base font-semibold text-purple-800 mb-4",children:"Custom Pricing"}),i.jsxs("ul",{className:"mb-6 w-full space-y-3",children:[i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Unlimited documents"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Unlimited SAOs"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Unlimited EIT connections"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Priority support"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," AI Features"]}),i.jsxs("li",{className:"flex items-center text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2",children:""})," Dedicated account manager"]})]}),Ht==="enterprise"?i.jsx("span",{className:"inline-block bg-purple-100 text-purple-800 px-4 py-2 rounded-full font-semibold text-sm shadow",children:"Current Plan"}):i.jsx("button",{onClick:()=>xe(!0),className:"inline-block bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-full font-semibold text-sm shadow transition-colors",children:"Contact Us"})]})]})]}),le&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600",onClick:()=>{xe(!1),Sn(!1),jn(null)},"aria-label":"Close",children:""}),i.jsx("h2",{className:"text-xl font-bold mb-4 text-purple-800",children:"Enterprise Plan Inquiry"}),ps?i.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-md text-sm mb-4",children:"Your inquiry has been sent successfully. We'll get back to you soon!"}):i.jsxs("form",{onSubmit:async te=>{te.preventDefault(),Ms(!0),jn(null),Sn(!1);try{const ne=await fetch("https://bbixvnkqroskholbxkgj.supabase.co/functions/v1/send-support-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU"},body:JSON.stringify({email:et,subject:"Enterprise Plan Inquiry",message:`Name: ${mt}
Corporation: ${Ls}

${wn}`,issueType:"enterprise",mode:"help"})}),Le=await ne.json();if(!ne.ok)throw new Error(Le.error||"Failed to send message");Sn(!0),lt(""),pt(""),Wt(""),je("")}catch(ne){jn(ne instanceof Error?ne.message:"Failed to send message. Please try again later.")}finally{Ms(!1)}},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contactName",className:"label",children:"Full Name"}),i.jsx("input",{type:"text",id:"contactName",value:mt,onChange:te=>lt(te.target.value),className:"input",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contactEmail",className:"label",children:"Email Address"}),i.jsx("input",{type:"email",id:"contactEmail",value:et,onChange:te=>pt(te.target.value),className:"input",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contactCorporation",className:"label",children:"Organization"}),i.jsx("input",{type:"text",id:"contactCorporation",value:Ls,onChange:te=>Wt(te.target.value),className:"input",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contactMessage",className:"label",children:"Message"}),i.jsx("textarea",{id:"contactMessage",value:wn,onChange:te=>je(te.target.value),className:"input h-32",required:!0,placeholder:"Tell us about your needs and how we can help..."})]}),$s&&i.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm",children:$s}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{xe(!1),Sn(!1),jn(null)},disabled:De,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:De,children:De?"Sending...":"Send Message"})]})]})]})}),i.jsxs("section",{className:"card p-6 border-red-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-red-600 flex items-center gap-2 mb-2",children:[i.jsx(Qn,{})," Danger Zone"]}),i.jsx("button",{className:"btn btn-danger",children:"Delete Account"}),i.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"This action is irreversible. Your data will be permanently deleted."})]}),d.text&&i.jsx("div",{className:`fixed bottom-4 right-4 p-4 rounded-md z-50 ${d.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.text})]})},H5=()=>{const[e,t]=m.useState(""),[s,n]=m.useState(""),[r,a]=m.useState(""),[o,l]=m.useState(!1),[c,u]=m.useState(null),[d,h]=m.useState(!1),[f,g]=m.useState(null),[v,y]=m.useState("general"),[w,p]=m.useState("help"),x=async j=>{j.preventDefault(),l(!0),u(null),h(!1);try{const N=await fetch("https://bbixvnkqroskholbxkgj.supabase.co/functions/v1/send-support-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU"},body:JSON.stringify({email:e,subject:s,message:r,issueType:v,mode:w,userType:"supervisor"})}),_=await N.json();if(!N.ok)throw new Error(_.error||"Failed to send message");h(!0),t(""),n(""),a(""),y("general")}catch(N){u(N instanceof Error?N.message:"Failed to send message. Please try again later."),console.error("Error sending support message:",N)}finally{l(!1)}},b=[{id:"validation",question:"How do I validate EIT skills?",answer:"To validate an EIT's skills, navigate to the Validation Requests section. Here you can review their self-assessments and supporting experiences. For each skill, you can provide a score and feedback based on the evidence presented. Make sure to thoroughly review their documented experiences before making your assessment."},{id:"team",question:"How do I manage my EIT team?",answer:"The Team section allows you to view all your connected EITs, their progress, and pending requests. You can accept new EIT connections, view individual progress, and access detailed skill assessments for each team member. Regular check-ins and feedback are essential for effective team management."},{id:"reviews",question:"What should I look for in experience reviews?",answer:"When reviewing experiences, focus on the quality of the Situation-Action-Outcome (SAO) documentation. Look for clear descriptions of the situation, specific actions taken, and measurable outcomes. The experience should demonstrate clear competency in the associated skills and show professional growth."},{id:"progress",question:"How do I track team progress?",answer:"The Dashboard provides an overview of your team's progress, including completed skills, documented experiences, and validation status. You can view individual progress for each EIT and identify areas that need attention or additional support."},{id:"guidance",question:"How can I provide effective guidance?",answer:"Effective guidance involves regular communication, constructive feedback, and clear expectations. Use the platform's messaging features to maintain open communication, provide timely feedback on submissions, and help EITs understand how to improve their documentation and skill assessments."}],S=[{title:"Supervisor Guide",description:"Comprehensive guide to supervising EITs and using the platform effectively",icon:i.jsx(oi,{size:20}),link:"/resources/supervisor-guide"},{title:"Validation Guidelines",description:"Best practices for validating EIT skills and experiences",icon:i.jsx(mn,{size:20}),link:"/resources/validation-guidelines"},{title:"Team Management",description:"Tips and strategies for effective EIT team management",icon:i.jsx(Va,{size:20}),link:"/resources/team-management"}];return i.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Help & Support"}),i.jsx("p",{className:"text-slate-500 mt-2 text-lg",children:"Get help with managing and supporting your EIT team"}),i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsxs("div",{className:"inline-flex rounded-lg border border-slate-200 p-1 bg-white",children:[i.jsxs("button",{onClick:()=>p("help"),className:`px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 ${w==="help"?"bg-teal-50 text-teal-700":"text-slate-600 hover:text-slate-900"}`,children:[i.jsx(Gr,{size:16}),"Help"]}),i.jsxs("button",{onClick:()=>p("feedback"),className:`px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2 ${w==="feedback"?"bg-teal-50 text-teal-700":"text-slate-600 hover:text-slate-900"}`,children:[i.jsx(Xn,{size:16}),"Feedback"]})]})})]}),w==="help"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-teal-50 rounded-lg p-6 mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-teal-800 mb-4",children:"Quick Access"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("a",{href:"/dashboard/supervisor/team",className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[i.jsx("h3",{className:"font-medium text-teal-700",children:"Team Management"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"View and manage your EIT team members"})]}),i.jsxs("a",{href:"/dashboard/supervisor/validation-requests",className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[i.jsx("h3",{className:"font-medium text-teal-700",children:"Validation Requests"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Review and validate EIT skills and experiences"})]}),i.jsxs("a",{href:"/dashboard/supervisor/reviews",className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[i.jsx("h3",{className:"font-medium text-teal-700",children:"Experience Reviews"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Review and provide feedback on EIT experiences"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Support"}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Your Email"}),i.jsx("input",{type:"email",id:"email",value:e,onChange:j=>t(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter your email",required:!0,disabled:o})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"issueType",className:"block text-sm font-medium text-slate-700 mb-1",children:"Issue Type"}),i.jsxs("select",{id:"issueType",value:v,onChange:j=>y(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",required:!0,disabled:o,children:[i.jsx("option",{value:"general",children:"General Inquiry"}),i.jsx("option",{value:"technical",children:"Technical Issue"}),i.jsx("option",{value:"validation",children:"Validation Process"}),i.jsx("option",{value:"team",children:"Team Management"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",id:"subject",value:s,onChange:j=>n(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"What's your question about?",required:!0,disabled:o})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),i.jsx("textarea",{id:"message",value:r,onChange:j=>a(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 min-h-[150px]",placeholder:"Describe your issue or question...",required:!0,disabled:o})]}),c&&i.jsxs("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm flex items-center gap-2",children:[i.jsx(Yn,{size:16}),c]}),d&&i.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-md text-sm",children:"Your message has been sent successfully. We'll get back to you soon!"}),i.jsx("button",{type:"submit",className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:o,children:o?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(Cl,{size:18}),"Send Message"]})})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Frequently Asked Questions"}),i.jsx("div",{className:"space-y-4",children:b.map(j=>i.jsxs("div",{className:"border-b border-slate-200 last:border-0 pb-4 last:pb-0",children:[i.jsxs("button",{className:"w-full flex items-center justify-between text-left",onClick:()=>g(f===j.id?null:j.id),children:[i.jsx("h3",{className:"font-medium text-slate-900",children:j.question}),f===j.id?i.jsx(Rf,{size:20}):i.jsx(za,{size:20})]}),f===j.id&&i.jsx("p",{className:"text-sm text-slate-600 mt-2",children:j.answer})]},j.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Helpful Resources"}),i.jsx("div",{className:"space-y-4",children:S.map((j,N)=>i.jsxs("a",{href:j.link,className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 transition-colors",children:[i.jsx("div",{className:"text-teal-600 mt-1",children:j.icon}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-slate-900",children:j.title}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:j.description})]}),i.jsx(If,{size:16,className:"text-slate-400 ml-auto mt-1"})]},N))})]})]})]})]}):i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Share Your Feedback"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"We value your feedback as a supervisor! Let us know what you think about the platform, what's working well for your team, and what we can improve to better support your role."}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Your Email"}),i.jsx("input",{type:"email",id:"email",value:e,onChange:j=>t(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Enter your email",required:!0,disabled:o})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",id:"subject",value:s,onChange:j=>n(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Brief summary of your feedback",required:!0,disabled:o})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 mb-1",children:"Your Feedback"}),i.jsx("textarea",{id:"message",value:r,onChange:j=>a(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 min-h-[200px]",placeholder:"Share your thoughts, suggestions, or concerns...",required:!0,disabled:o})]}),c&&i.jsxs("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm flex items-center gap-2",children:[i.jsx(Yn,{size:16}),c]}),d&&i.jsx("div",{className:"p-3 bg-green-50 text-green-700 rounded-md text-sm",children:"Thank you for your feedback! We appreciate your input as a supervisor."}),i.jsx("button",{type:"submit",className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:o,children:o?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(Cl,{size:18}),"Submit Feedback"]})})]})]})})]})};class J5{async getTeamMembers(){return[]}async getPendingReviews(){return[]}async getTeamPerformance(){return[]}async getSupervisorStats(){return{totalTeamMembers:0,pendingReviews:0,completedReviews:0,averageTeamPerformance:0}}async submitReview(t,s,n){}async updateTeamMember(t,s){}async getCategoryAverages(t){const{data:s,error:n}=await(await kt(async()=>{const{supabase:r}=await Promise.resolve().then(()=>Vo);return{supabase:r}},void 0)).supabase.rpc("get_supervisor_category_averages",{supervisor_uuid:t});if(n)throw new Error(`Supabase error: ${n.message}`);return s}}const K5=new J5,G5=()=>{const[e,t]=m.useState([]),[s,n]=m.useState(!0),[r,a]=m.useState(!1),o=Ke(),l=async(h,f=5)=>{try{console.log(" Starting fetchActivities for supervisor:",h),n(!0);const{data:g,error:v}=await k.from("saos").select(`
          *,
          eit_profiles (
            id,
            full_name
          )
        `).eq("supervisor_id",h).order("updated_at",{ascending:!1}).limit(f);if(v)throw v;const{data:y,error:w}=await k.from("validations").select(`
          *,
          eit_profiles (
            id,
            full_name
          )
        `).eq("supervisor_id",h).order("updated_at",{ascending:!1}).limit(f);if(w)throw w;const{data:p,error:x}=await k.from("experiences").select(`
          *,
          eit_profiles (
            id,
            full_name
          )
        `).eq("needs_supervisor_review",!0).eq("supervisor_id",h).order("updated_at",{ascending:!1}).limit(f);if(x)throw x;const b=[...(g||[]).map(S=>{var j,N;return{id:S.id,type:"feedback",title:`Provided feedback on "${S.title}" SAO`,timestamp:S.updated_at,eitName:(j=S.eit_profiles)==null?void 0:j.full_name,eitId:(N=S.eit_profiles)==null?void 0:N.id,status:S.status}}),...(y||[]).map(S=>{var j,N;return{id:S.id,type:"validation",title:`Validated "${S.title}"`,timestamp:S.updated_at,eitName:(j=S.eit_profiles)==null?void 0:j.full_name,eitId:(N=S.eit_profiles)==null?void 0:N.id,status:S.status}}),...(p||[]).map(S=>{var j,N;return{id:S.id,type:"review",title:`Review needed for "${S.title}"`,timestamp:S.updated_at,eitName:(j=S.eit_profiles)==null?void 0:j.full_name,eitId:(N=S.eit_profiles)==null?void 0:N.id,status:S.status}})].sort((S,j)=>new Date(j.timestamp).getTime()-new Date(S.timestamp).getTime()).slice(0,f);t(b)}catch(g){console.error(" Error in fetchActivities:",g),t([])}finally{n(!1)}};m.useEffect(()=>{let h=!0,f=[];return(async()=>{try{const{data:{user:v}}=await k.auth.getUser();if(!v){console.error(" No authenticated user found");return}await l(v.id);const y=k.channel("supervisor-saos-changes").on("postgres_changes",{event:"*",schema:"public",table:"saos",filter:`supervisor_id=eq.${v.id}`},()=>{h&&l(v.id)}).subscribe(),w=k.channel("supervisor-validations-changes").on("postgres_changes",{event:"*",schema:"public",table:"validations",filter:`supervisor_id=eq.${v.id}`},()=>{h&&l(v.id)}).subscribe(),p=k.channel("supervisor-experiences-changes").on("postgres_changes",{event:"*",schema:"public",table:"experiences",filter:`supervisor_id=eq.${v.id}`},()=>{h&&l(v.id)}).subscribe();f=[y,w,p]}catch(v){console.error(" Error setting up subscriptions:",v)}})(),()=>{h=!1,f.forEach(v=>{try{v.unsubscribe()}catch(y){console.error(" Error unsubscribing:",y)}})}},[]);const c={approval:i.jsx(mn,{size:16,className:"text-green-500"}),feedback:i.jsx(Xn,{size:16,className:"text-blue-500"}),validation:i.jsx(tA,{size:16,className:"text-purple-500"}),review:i.jsx(zd,{size:16,className:"text-amber-500"}),comment:i.jsx(Xn,{size:16,className:"text-indigo-500"})},u=h=>{const f=new Date(h),v=new Date().getTime()-f.getTime(),y=Math.floor(v/(1e3*60)),w=Math.floor(v/(1e3*60*60)),p=Math.floor(v/(1e3*60*60*24));return y<5?"Just now":y<30?`${Math.floor(y/5)*5} minutes ago`:w<1?"30 minutes ago":w===1?"1 hour ago":w<24?`${w} hours ago`:p===1?"1 day ago":`${p} days ago`},d=h=>{h.type==="feedback"?o(`/supervisor/saos?saoId=${h.id}`):h.type==="validation"?o(`/supervisor/validations?validationId=${h.id}`):h.type==="review"&&o(`/supervisor/reviews?experienceId=${h.id}`)};return s?i.jsx("div",{className:"space-y-4",children:[...Array(3)].map((h,f)=>i.jsxs("div",{className:"flex items-start space-x-3 animate-pulse",children:[i.jsx("div",{className:"p-2 rounded-full bg-slate-200 mt-0.5 w-8 h-8"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/4"})]})]},f))}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-4",children:[e.length>0?e.slice(0,5).map(h=>i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"p-2 rounded-full bg-slate-100 mt-0.5",children:c[h.type]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-slate-800",children:h.title}),i.jsxs("div",{className:"flex items-center mt-1",children:[h.eitName&&i.jsx("span",{className:"text-xs font-medium text-slate-700 mr-2",children:h.eitName}),i.jsx("span",{className:"text-xs text-slate-500",children:u(h.timestamp)})]})]}),i.jsx("button",{className:"ml-2 px-3 py-1 text-xs bg-amber-100 text-amber-700 hover:bg-amber-200",onClick:()=>d(h),children:"View"})]},h.id)):i.jsx("div",{className:"text-center py-4 text-slate-500",children:"No recent activities"}),i.jsx("button",{className:"w-full text-center py-2 text-lg text-teal-600 hover:underline font-medium",onClick:()=>o("/supervisor/activities"),children:"View more activities"})]}),r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Recent Activities"}),i.jsx("button",{onClick:()=>a(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:i.jsx(Nt,{size:20,className:"text-slate-500"})})]}),i.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(80vh-4rem)]",children:i.jsx("div",{className:"space-y-4",children:e.map(h=>i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"p-2 rounded-full bg-slate-100 mt-0.5",children:c[h.type]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-slate-800",children:h.title}),i.jsxs("div",{className:"flex items-center mt-1",children:[h.eitName&&i.jsx("span",{className:"text-xs font-medium text-slate-700 mr-2",children:h.eitName}),i.jsx("span",{className:"text-xs text-slate-500",children:u(h.timestamp)})]})]}),i.jsx("button",{className:"ml-2 px-3 py-1 text-xs bg-amber-100 text-amber-700 hover:bg-amber-200",onClick:()=>{d(h),a(!1)},children:"View"})]},h.id))})})]})})]})},Y5=()=>{const{appLoaded:e}=Mv(),[t,s]=m.useState(!0),[n,r]=m.useState([]),[a,o]=m.useState([]),[l,c]=m.useState({totalEITs:0,pendingReviews:0,completedReviews:0,averageTeamProgress:0}),[u,d]=m.useState("Supervisor"),[h,f]=m.useState(new Date().toISOString()),[g,v]=m.useState(!1),[y,w]=m.useState(0),[p,x]=m.useState(0),[b,S]=m.useState({}),[j,N]=m.useState([]),_=async()=>{try{v(!0);const{data:{user:V}}=await k.auth.getUser();if(!V)return;const{data:Z}=await k.from("supervisor_profiles").select("full_name").eq("id",V.id).single();Z&&Z.full_name&&d(Z.full_name);const{data:ie,error:re}=await k.from("supervisor_eit_relationships").select(`
          eit_id,
          eit_profiles (
            id,
            full_name,
            email
          )
        `).eq("supervisor_id",V.id).eq("status","active");if(re)throw re;const oe=ie?ie.map(P=>P.eit_profiles):[];console.log("DEBUG relationships:",ie),console.log("DEBUG eitData:",oe),r(oe);const{count:J}=await k.from("validators").select("*",{count:"exact",head:!0}).eq("email",V.email).eq("status","pending");w(J||0);const{count:B}=await k.from("sao_feedback").select("*",{count:"exact",head:!0}).eq("supervisor_id",V.id).eq("status","pending");if(x(B||0),oe.length>0){const{data:P,error:O}=await k.from("experiences").select("*").in("eit_id",oe.map(G=>G.id)).eq("supervisor_approved",!1);if(O)throw O;const{data:D,error:K}=await k.from("experiences").select("*").in("eit_id",oe.map(G=>G.id)).eq("supervisor_approved",!0);if(K)throw K;c({totalEITs:oe.length,pendingReviews:y+p,completedReviews:(D==null?void 0:D.length)||0,averageTeamProgress:0});const{data:se,error:L}=await k.from("experiences").select("*").in("eit_id",oe.map(G=>G.id)).order("created_at",{ascending:!1}).limit(5);if(L)throw L;o(se||[])}else c({totalEITs:0,pendingReviews:0,completedReviews:0,averageTeamProgress:0}),o([]);try{const P=await K5.getCategoryAverages(V.id);N(P)}catch(P){console.error("Error fetching category averages:",P),N([])}f(new Date().toISOString())}catch(V){console.error("Error fetching dashboard data:",V)}finally{s(!1),v(!1)}},C=async V=>{const Z=await Promise.all(V.map(async ie=>{const[re,oe,J]=await Promise.all([k.from("eit_skills").select("id",{count:"exact",head:!0}).eq("eit_id",ie).not("rank","is",null),k.from("experiences").select("id",{count:"exact",head:!0}).eq("eit_id",ie),k.from("experiences").select("id",{count:"exact",head:!0}).eq("eit_id",ie).eq("supervisor_approved",!0)]),B=re.count||0,P=oe.count||0,O=J.count||0,D=B/22,K=P/24,se=O/24,L=Math.round((D+K+se)/3*100);return[ie,L]}));return S(Object.fromEntries(Z)),Z};m.useEffect(()=>{if(n.length>0){C(n.map(Z=>Z.id));const V=setInterval(()=>{C(n.map(Z=>Z.id))},3e4);return()=>clearInterval(V)}},[n]);const I=n.length>0?Math.round(n.reduce((V,Z)=>V+(b[Z.id]||0),0)/n.length):0;m.useEffect(()=>{_()},[]);const M=V=>new Date(V).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return t&&e?i.jsx(Ja,{}):i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 flex items-center gap-2",children:["Welcome back, ",u,"!",i.jsx("span",{className:"ml-2 px-2 py-0.5 rounded text-xs font-semibold bg-purple-100 text-purple-800",children:"SUPERVISOR"})]}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Here's an overview of your team's progress"})]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[i.jsxs("span",{className:"text-sm text-slate-500 flex items-center",children:[i.jsx(li,{size:14,className:"mr-1"}),"Last updated: ",M(h)]}),i.jsx("button",{className:`btn btn-primary ${g?"opacity-75 cursor-not-allowed":""}`,onClick:_,disabled:g,children:g?"Refreshing...":"Refresh"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 flex flex-col gap-4 min-w-[220px]",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold text-lg text-slate-800",children:"Team Progress"}),i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-teal-50 text-teal-600",children:[I,"%"]})]}),i.jsx("div",{className:"w-full h-2 rounded bg-slate-100",children:i.jsx("div",{className:"h-full rounded bg-teal-500 transition-all duration-700",style:{width:`${I}%`}})}),i.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Average team completion rate"})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 flex flex-col gap-4 min-w-[220px]",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("span",{className:"font-semibold text-lg text-slate-800",children:"Total EITs"})}),i.jsx("span",{className:"block text-3xl font-extrabold text-slate-900 leading-tight",children:l.totalEITs}),i.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"EITs under your supervision"})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 flex flex-col gap-4 min-w-[220px]",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("span",{className:"font-semibold text-lg text-slate-800",children:"Pending Reviews"})}),i.jsx("span",{className:"block text-3xl font-extrabold text-slate-900 leading-tight",children:y+p}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Validations: ",y,", SAOs: ",p]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 flex flex-col gap-4 min-w-[220px]",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("span",{className:"font-semibold text-lg text-slate-800",children:"Completed Reviews"})}),i.jsx("span",{className:"block text-3xl font-extrabold text-slate-900 leading-tight",children:l.completedReviews}),i.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Reviews completed"})]})]}),j.length>0&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8",children:j.map(V=>{var Z;return i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 flex flex-col gap-2 min-w-[220px]",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold text-lg text-slate-800",children:V.category}),i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-blue-50 text-blue-600",children:((Z=V.average_score)==null?void 0:Z.toFixed(2))??"0.00"})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Avg. self-score (from ",V.num_eits," EIT",V.num_eits!==1?"s":"",")"]})]},V.category)})}),n.length>0&&i.jsx("div",{className:"card mb-8",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Team Members"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(V=>i.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-0",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),i.jsx("p",{className:"font-medium",children:V.full_name})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),i.jsx("p",{className:"font-medium",children:V.email})]})]},V.id))})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow duration-300",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2C3E50]",children:"Recent Activities"}),i.jsx(G5,{})]})})]})},X5=Y5;let hu=!1;const Q5=()=>{var e,t,s,n,r,a,o,l;if(!hu)try{hu=!0,(t=(e=Ca.getState()).clearState)==null||t.call(e),(n=(s=Ps.getState()).clearState)==null||n.call(s),(a=(r=Wa.getState()).clearState)==null||a.call(r),(l=(o=bw.getState()).clearState)==null||l.call(o)}finally{hu=!1}},Z5=()=>{const[e,t]=m.useState(!0),[s,n]=m.useState(null),[r,a]=m.useState(null),o=Ke(),l=m.useCallback(async()=>{try{t(!0),n(null);const{data:{user:c},error:u}=await k.auth.getUser();if(u)throw new Error(`Authentication error: ${u.message}`);if(!c)throw new Error("No authenticated user found");const[d,h]=await Promise.all([k.from("eit_profiles").select("account_type").eq("id",c.id).single(),k.from("supervisor_profiles").select("account_type").eq("id",c.id).single()]);if(d.error&&h.error)throw new Error("Failed to fetch user profiles");if(h.data)a("supervisor"),o("/dashboard/supervisor",{replace:!0});else if(d.data)a("eit"),o("/dashboard",{replace:!0});else throw new Error("No profile found for user")}catch(c){const u=c instanceof Error?c.message:"An unexpected error occurred";n(u),console.error("Error checking user role:",c),o("/login")}finally{t(!1)}},[o]);return m.useEffect(()=>{l();const{data:{subscription:c}}=k.auth.onAuthStateChange(u=>{u==="SIGNED_OUT"?(Q5(),o("/login")):u==="SIGNED_IN"&&l()});return()=>{c.unsubscribe()}},[l,o]),e?i.jsx(Ja,{}):s?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-red-500 text-center",children:[i.jsxs("p",{children:["Error: ",s]}),i.jsx("button",{onClick:()=>o("/login"),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Return to Login"})]})}):null},px=Bt(e=>({loading:!1,startWriting:async()=>{e({loading:!0});try{const{data:t}=await k.from("eit_skills").select("*").eq("status","completed"),s=await fetch("https://bbixvnkqroskholbxkgj.supabase.co/functions/v1/generate-essay",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJiaXh2bmtxcm9za2hvbGJ4a2dqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMTg3NjMsImV4cCI6MjA2MjU5NDc2M30.6oGRIhAuzrOq3UI9bOUlxyIoaslzK_UtjrgaxV9WIrU","Content-Type":"application/json"},body:JSON.stringify({skills:t,experiences:[]})});if(!s.ok)throw new Error("Failed to generate essay");const{essay:n}=await s.json();await k.from("essays").insert({title:"AI Generated Essay",content:n,ai_generated:!0})}finally{e({loading:!1})}}}));class eI extends Be.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){}render(){return this.state.hasError?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Something went wrong."}),i.jsx("pre",{className:"mt-4 text-sm text-slate-700",children:String(this.state.error)})]}):this.props.children}}const gx=Be.lazy(()=>kt(()=>import("./ProgressCard-aZRMF_jU.js"),[])),tI=Be.lazy(()=>kt(()=>import("./RecentActivities-DqzmmJQd.js"),[]));Be.lazy(()=>kt(()=>import("./UpcomingDeadlines-cosIX0Uu.js"),[]));const sI=Be.lazy(()=>kt(()=>import("./SkillsOverview-D93nM9yb.js"),[])),nI=()=>{Ke();const{appLoaded:e}=Mv(),[t,s]=m.useState(""),[n,r]=m.useState(null),{overallProgress:a,completedSkills:o,totalSkills:l,documentedExperiences:c,totalExperiences:u,supervisorApprovals:d,totalApprovals:h,lastUpdated:f,loading:g,updateProgress:v,initialize:y}=Ca(),w=px(W=>W.startWriting),p=px(W=>W.loading),x=Ps(W=>W.loadUserSkills),{saos:b,loading:S,loadUserSAOs:j}=Wa(),[N,_]=m.useState(null),[C,I]=m.useState([]),[M,V]=m.useState(!1);console.log("Google Client ID (from import.meta.env):","521009491275-0m5p9k9vm29fc1v6v91f9k25v4godaem.apps.googleusercontent.com");const[ie,re]=m.useState(!0),[oe,J]=m.useState(!1),[B,P]=m.useState(null);m.useEffect(()=>{(async()=>{var ee;try{const{data:{user:$}}=await k.auth.getUser();if(!$)return;(ee=$.user_metadata)!=null&&ee.full_name&&s($.user_metadata.full_name);const[he,ue,z,de,A]=await Promise.all([k.from("eit_profiles").select("id, start_date, target_date").eq("id",$.id).single(),k.from("supervisor_profiles").select("id").eq("id",$.id).single(),x(),y(),b.length===0&&!S?j():Promise.resolve()]);ue.data?r("supervisor"):he.data&&r("eit"),P({eitProfile:he.data,supervisorProfile:ue.data})}catch($){console.error("Error initializing dashboard data:",$)}finally{re(!1)}})()},[x,y,b.length,S,j]),m.useEffect(()=>{N&&(V(!0),fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events?maxResults=5&orderBy=startTime&singleEvents=true&timeMin="+new Date().toISOString(),{headers:{Authorization:`Bearer ${N}`}}).then(W=>W.json()).then(W=>{I(W.items||[])}).catch(()=>I([])).finally(()=>V(!1)))},[N]);const O=b.filter(W=>W.status==="complete"),D=[{title:"Overall Progress",value:a,description:a>=75?"Excellent progress!":a>=50?"Good progress!":a>=25?"Keep going!":"Just getting started!",color:"teal"},{title:"Completed Skills",value:o,total:l,description:`${l-o} skills remaining to complete`,color:"blue"},{title:"Completed SAOs",value:O.length,total:24,description:`${24-O.length} SAOs remaining to complete`,color:"indigo"}];let K=null,se="teal",L="";if(n==="eit"&&(B!=null&&B.eitProfile)){const{start_date:W,target_date:ee}=B.eitProfile;if(W&&ee){const $=new Date,he=new Date(W),z=new Date(ee).getTime()-he.getTime(),de=$.getTime()-he.getTime();let A=Math.max(0,Math.min(100,Math.round(de/z*100)));K=A;const E=a-A;E>0?(se="teal",L="You are ahead of schedule!"):E>=-5?(se="blue",L="You are on track!"):(se="purple",L="You are behind schedule.")}}const G=W=>new Date(W).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return ie&&e?i.jsx(Ja,{}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 flex items-center gap-2",children:["Welcome back, ",t||"Engineer","!",n&&i.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs font-semibold
                  ${n==="eit"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:n==="eit"?"EIT":"Supervisor"})]}),i.jsx("p",{className:"text-slate-500 mt-1",children:n==="eit"?"Here's an overview of your EIT progress":"Here's an overview of your team's progress"})]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[i.jsxs("span",{className:"text-sm text-slate-500 flex items-center",children:[i.jsx(li,{size:14,className:"mr-1"}),"Last updated: ",G(f)]}),i.jsx("button",{className:`btn btn-primary ${oe?"opacity-75 cursor-not-allowed":""}`,onClick:async()=>{if(!oe){J(!0);try{await Promise.all([x(),v(!0),j()])}catch(W){console.error("Error refreshing dashboard:",W)}finally{J(!1)}}},disabled:oe,children:oe?"Refreshing...":"Refresh"})]})]}),i.jsx(m.Suspense,{fallback:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(3)].map((W,ee)=>i.jsx("div",{className:"card animate-pulse h-32"},ee))}),children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(gx,{title:"Overall Progress",value:a,total:100,description:n==="eit"&&K!==null?`${L} (Expected: ${K}%)`:a>=75?"Excellent progress!":a>=50?"Good progress!":a>=25?"Keep going!":"Just getting started!",color:n==="eit"&&K!==null?se:"teal"}),D.slice(1).map((W,ee)=>i.jsx(gx,{...W},ee))]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[i.jsx(El,{size:18,className:"mr-2 text-teal-600"}),"Recent Activities"]})}),i.jsx(m.Suspense,{fallback:i.jsx("div",{className:"p-6 text-center text-slate-400",children:"Loading activities..."}),children:i.jsx(tI,{})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[i.jsx(ic,{size:18,className:"mr-2 text-teal-600"}),"Upcoming Deadlines"]})})})]}),i.jsxs("div",{className:"space-y-6",children:[n==="eit"&&i.jsx(m.Suspense,{fallback:i.jsx("div",{className:"card animate-pulse h-32"}),children:i.jsx(sI,{})}),i.jsxs("div",{className:"card border-2 border-teal-100 bg-teal-50/50",children:[i.jsx("h3",{className:"font-semibold text-teal-800 mb-2",children:"AI Writing Assistant"}),i.jsx("p",{className:"text-sm text-teal-700 mb-3",children:"Let our AI help you draft your next Self-Assessment Outcome (SAO) essay based on your documented experiences."}),i.jsx("button",{className:`btn btn-primary w-full ${p?"opacity-75 cursor-not-allowed":""}`,onClick:()=>w(),disabled:p,children:p?"Generating...":"Start Writing"})]})]})]})]})};function rI(){return i.jsx(eI,{children:i.jsx(nI,{})})}const iI=()=>{const[e,t]=m.useState(null),[s,n]=m.useState(!0),r=Ke();return m.useEffect(()=>{(async()=>{n(!0);const{data:{user:o}}=await k.auth.getUser();if(!o){r("/login");return}const{data:l}=await k.from("supervisor_profiles").select("id").eq("id",o.id).single();l?r("/dashboard/supervisor",{replace:!0}):t("eit"),n(!1)})()},[r]),s?i.jsx(Ja,{}):e==="eit"?i.jsx(rI,{}):null},aI={"1.1 Regulations, Codes & Standards":"Demonstrates knowledge and application of relevant regulations, codes, standards, and safety requirements in engineering practice. This includes identifying which standards apply to a given project, ensuring compliance, and keeping up to date with changes in the regulatory environment. Example: Ensuring a design meets all applicable building codes and safety standards.","1.2 Technical & Design Constraints":"Understands and works within technical and design constraints, including limitations of materials, processes, and systems. Able to identify constraints early in the design process and adapt solutions accordingly. Example: Designing a bridge that meets both load requirements and material limitations.","1.3 Risk Management for Technical Work":"Identifies, assesses, and manages risks associated with technical work. This includes conducting risk assessments, implementing mitigation strategies, and monitoring risk throughout the project lifecycle. Example: Performing a hazard analysis for a new manufacturing process.","1.4 Application of Theory":"Applies engineering theory and principles to solve practical problems. Demonstrates the ability to use theoretical knowledge in real-world situations. Example: Using fluid dynamics equations to design a piping system.","1.5 Solution Techniques  Results Verification":"Selects and applies appropriate solution techniques and verifies results for accuracy and reliability. Example: Double-checking calculations and using simulation software to validate a design.","1.6 Safety in Design & Technical Work":"Prioritizes safety in all aspects of design and technical work. Identifies potential hazards and incorporates safety measures into engineering solutions. Example: Designing a machine with proper guarding to prevent operator injury.","1.7 Systems & Their Components":"Understands how systems and their components interact. Able to analyze and optimize system performance. Example: Evaluating the impact of a new component on an existing electrical system.","1.8 Project or Asset Life-Cycle Awareness":"Considers the entire life cycle of a project or asset, from conception to decommissioning. Example: Selecting materials that minimize maintenance costs over the lifespan of a product.","1.9 Quality Assurance":"Implements quality assurance processes to ensure deliverables meet required standards. Example: Developing and following a quality control checklist for a construction project.","1.10 Engineering Documentation":"Prepares clear, accurate, and comprehensive engineering documentation. Example: Writing detailed reports, specifications, and drawings that can be understood by others.","2.1 Oral Communication (English)":"Communicates effectively in spoken English with colleagues, clients, and stakeholders. Example: Leading a project meeting or presenting technical information to a non-technical audience.","2.2 Written Communication (English)":"Communicates effectively in written English, producing clear and concise reports, emails, and documentation. Example: Writing a technical report or project proposal.","2.3 Reading & Comprehension (English)":"Reads and comprehends technical documents, standards, and instructions in English. Example: Interpreting a complex engineering standard or technical manual.","3.1 Project Management Principles":"Applies project management principles to plan, execute, and close projects successfully. Example: Creating a project schedule, managing resources, and tracking progress.","3.2 Finances & Budget":"Manages project finances and budgets, including cost estimation, tracking, and reporting. Example: Preparing a project budget and monitoring expenses to stay within limits.","4.1 Promote Team Effectiveness & Resolve Conflict":"Demonstrates the ability to work effectively in teams, resolve conflicts, and promote collaboration. Example: Facilitating a team meeting to resolve technical disagreements and reach consensus.","5.1 Professional Accountability (Ethics, Liability, Limits)":"Understands and applies professional ethics, legal responsibilities, and limitations in engineering practice. Example: Making decisions that prioritize public safety and environmental protection while considering legal implications.","6.1 Protection of the Public Interest":"Prioritizes public safety, health, and welfare in engineering decisions and actions. Example: Ensuring a design meets all safety requirements and minimizes potential risks to the public.","6.2 Benefits of Engineering to the Public":"Understands and communicates how engineering solutions benefit society and improve quality of life. Example: Explaining how a new infrastructure project will improve community access and safety.","6.3 Role of Regulatory Bodies":"Understands the role and importance of regulatory bodies in engineering practice. Example: Working with building inspectors to ensure compliance with local regulations.","6.4 Application of Sustainability Principles":"Applies sustainability principles to engineering solutions, considering environmental, social, and economic impacts. Example: Designing a building with energy-efficient systems and sustainable materials.","6.5 Promotion of Sustainability":"Actively promotes and implements sustainable practices in engineering work. Example: Leading initiatives to reduce waste and energy consumption in manufacturing processes."},$w=m.memo(({skill:e,skillRef:t})=>{const[s,n]=m.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{ref:t,className:"flex items-center justify-between p-3 rounded-lg border hover:border-slate-300 hover:bg-slate-50 transition-colors",children:[i.jsx("span",{className:"font-medium",children:e.name}),i.jsx("button",{className:"p-2 rounded-full text-blue-500 hover:bg-blue-50",onClick:()=>n(!0),title:"More Info",children:i.jsx(Ud,{size:18})})]}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-slate-400 hover:text-slate-600",onClick:()=>n(!1),children:""}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.name}),i.jsx("p",{className:"text-slate-700 text-base",children:aI[e.name]||"No summary available for this skill."})]})})]})});m.memo(({category:e})=>i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsx("h2",{className:"text-lg font-semibold",children:e.name})}),i.jsx("div",{className:"space-y-3",children:e.skills.map(t=>i.jsx($w,{skill:t},t.id))})]}));const oI=()=>{const{skillCategories:e,loadUserSkills:t,loading:s,error:n}=Ps(),r=m.useRef({}),[a,o]=m.useState({}),[l,c]=m.useState({});Ke();const u=["#14b8a6","#3b82f6","#6366f1","#a21caf","#ec4899","#22c55e"];m.useEffect(()=>{t()},[t]),m.useEffect(()=>{const h=f=>{const{skillId:g,timestamp:v}=f.detail;setTimeout(()=>{const y=r.current[g];y&&(y.scrollIntoView({behavior:"smooth",block:"center"}),y.classList.add("ring","ring-teal-400","highlight-item"),setTimeout(()=>y.classList.remove("ring","ring-teal-400","highlight-item"),1500))},100)};return window.addEventListener("scroll-to-skill",h),()=>window.removeEventListener("scroll-to-skill",h)},[]);const d=async()=>{try{const{data:{user:h}}=await k.auth.getUser();if(!h)return;const{data:f,error:g}=await k.from("supervisor_eit_relationships").select("eit_id").eq("supervisor_id",h.id);if(g)throw g;const v=f.map(b=>b.eit_id),{data:y,error:w}=await k.from("eit_skills").select("*").in("eit_id",v);if(w)throw w;const p={};e.forEach(b=>{p[b.name]={allScores:[],completed:0,total:b.skills.length*v.length,eitCount:v.length}}),y.forEach(b=>{const S=e.find(j=>j.skills.some(N=>N.id===b.skill_id));S&&b.supervisor_score!==null&&b.supervisor_score!==void 0&&(p[S.name].allScores.push(b.supervisor_score),p[S.name].completed+=1)});const x={};Object.entries(p).forEach(([b,S])=>{const j=S.allScores.reduce((_,C)=>_+C,0),N=S.allScores.length;x[b]={average:N>0?Number((j/N).toFixed(1)):0,completionRate:S.total>0?Number((S.completed/S.total*100).toFixed(1)):0}}),c(x)}catch(h){console.error("Error calculating category averages:",h)}};return m.useEffect(()=>{d()},[]),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("h1",{className:"text-2xl font-semibold text-slate-900 flex items-center",children:[i.jsx(ic,{size:24,className:"mr-2 text-teal-600"}),"Skills"]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:e.map((h,f)=>{var p,x;const g=((p=l[h.name])==null?void 0:p.average)||0,v=((x=l[h.name])==null?void 0:x.completionRate)||0,y=v/100*5,w=u[f%u.length];return i.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[i.jsx("div",{className:"flex justify-between items-center mb-2",children:i.jsx("h3",{className:"font-medium text-slate-900 text-lg",children:h.name})}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"w-40 text-base font-semibold",children:"Average EIT Self Score"}),i.jsx("div",{className:"w-10 flex-shrink-0 flex justify-center",children:i.jsxs("div",{className:"w-9 h-9 rounded-full flex items-center justify-center bg-slate-100 text-slate-800 text-sm font-bold border border-slate-200",children:[Math.round(g/5*100),"%"]})}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full max-w-[160px] bg-slate-200 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${g/5*100}%`,background:w}})})}),i.jsxs("div",{className:"w-14 text-xs text-slate-500 text-right",children:[g.toFixed(1),"/5.0"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"w-40 text-base font-semibold",children:"Average Supervisor Score"}),i.jsx("div",{className:"w-10 flex-shrink-0 flex justify-center",children:i.jsxs("div",{className:"w-9 h-9 rounded-full flex items-center justify-center bg-slate-100 text-slate-800 text-sm font-bold border border-slate-200",children:[Math.round(v),"%"]})}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full max-w-[160px] bg-slate-200 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${y/5*100}%`,background:w}})})}),i.jsxs("div",{className:"w-14 text-xs text-slate-500 text-right",children:[y.toFixed(1),"/5.0"]})]})]})]},h.name)})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:"Skills & Competencies"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"View the EIT program competencies"})]}),n&&i.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Af,{size:18,className:"text-red-600 mt-0.5 flex-shrink-0"}),i.jsx("p",{className:"text-sm text-red-800",children:n})]})}),s?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):i.jsx("div",{className:"space-y-6",children:e.map(h=>i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsx("h2",{className:"text-lg font-semibold",children:h.name})}),i.jsx("div",{className:"space-y-3",children:h.skills.map(f=>i.jsx($w,{skill:f,skillRef:g=>r.current[f.id]=g},f.id))})]},h.name))})]})},lI=e=>{m.useEffect(()=>{const t=[];return e.forEach(({table:s,filter:n,callback:r})=>{const a=k.channel(`${s}_changes`).on("postgres_changes",{event:"*",schema:"public",table:s,filter:n},o=>{r(o)}).subscribe();t.push(a)}),()=>{t.forEach(s=>{k.removeChannel(s)})}},[e])},cI=Bt(e=>({supervisorReviews:[],saoFeedback:[],relationships:[],userSkills:[],addSupervisorReview:t=>e(s=>({supervisorReviews:[...s.supervisorReviews,t]})),updateSupervisorReview:t=>e(s=>({supervisorReviews:s.supervisorReviews.map(n=>n.id===t.id?t:n)})),removeSupervisorReview:t=>e(s=>({supervisorReviews:s.supervisorReviews.filter(n=>n.id!==t)})),addSaoFeedback:t=>e(s=>({saoFeedback:[...s.saoFeedback,t]})),updateSaoFeedback:t=>e(s=>({saoFeedback:s.saoFeedback.map(n=>n.id===t.id?t:n)})),removeSaoFeedback:t=>e(s=>({saoFeedback:s.saoFeedback.filter(n=>n.id!==t)})),updateRelationship:t=>e(s=>({relationships:s.relationships.map(n=>n.id===t.id?t:n)})),updateUserSkill:t=>e(s=>({userSkills:s.userSkills.map(n=>n.id===t.id?t:n)}))})),uI=({userId:e})=>{const{addSupervisorReview:t,updateSupervisorReview:s,addSaoFeedback:n,updateSaoFeedback:r,updateRelationship:a,updateUserSkill:o}=cI(),{supervisorReviews:l,saoFeedback:c,relationships:u,userSkills:d}=Sw();return lI([{table:"supervisor_reviews",filter:`eit_id=eq.${e}`,callback:h=>{l&&(h.eventType==="INSERT"?(t(h.new),Rn.success("New review received!")):h.eventType==="UPDATE"&&(s(h.new),Rn.success("Review updated!")))}},{table:"sao_feedback",filter:`sao_id=in.(select id from saos where user_id=eq.${e})`,callback:h=>{c&&(h.eventType==="INSERT"?(n(h.new),Rn.success("New SAO feedback received!")):h.eventType==="UPDATE"&&(r(h.new),Rn.success("SAO feedback updated!")))}},{table:"supervisor_eit_relationships",filter:`eit_id=eq.${e}`,callback:h=>{u&&h.eventType==="UPDATE"&&(a(h.new),Rn.success("Relationship status updated!"))}},{table:"user_skills",filter:`user_id=eq.${e}`,callback:h=>{d&&h.eventType==="UPDATE"&&(o(h.new),Rn.success("Skill status updated!"))}}]),null};function dI(){const[e,t]=m.useState(null),[s,n]=m.useState(!0),r=Ca(u=>u.initialize),a=Ca(u=>u.setupRealtimeSubscriptions),o=Ps(u=>u.loadUserSkills),l=mw(u=>u.initialize),c=async()=>{try{console.log("Starting app initialization..."),await o(),console.log("Skills loaded successfully"),await r(),console.log("Progress initialized successfully"),await a(),console.log("Realtime subscriptions set up successfully"),await l(),console.log("Notifications initialized successfully")}catch(u){console.error("Error initializing app:",u)}};return m.useEffect(()=>{console.log("Checking for existing session..."),k.auth.getSession().then(({data:{session:d}})=>{console.log("Session check result:",d?"Session found":"No session"),t(d),n(!1),d&&(console.log("Session found, initializing app..."),c())});const{data:{subscription:u}}=k.auth.onAuthStateChange((d,h)=>{console.log("Auth state changed:",d,h?"Session present":"No session"),t(h),h&&(console.log("New session detected, initializing app..."),c())});return()=>u.unsubscribe()},[r,a,o]),m.useEffect(()=>{const u="accreda_last_tab_close",h=localStorage.getItem(u);if(h){const g=parseInt(h,10);!isNaN(g)&&Date.now()-g>18e5&&k.auth.signOut().then(()=>{t(null)})}const f=()=>{localStorage.setItem(u,Date.now().toString())};return window.addEventListener("beforeunload",f),()=>{window.removeEventListener("beforeunload",f)}},[]),s?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})}):i.jsxs(i.Fragment,{children:[e&&i.jsx(uI,{userId:e.user.id}),i.jsx(_5,{position:"top-right"}),i.jsxs(mk,{children:[i.jsx(ye,{path:"/",element:e?i.jsx(Z5,{}):i.jsx(A5,{})}),i.jsx(ye,{path:"/login",element:e?i.jsx(or,{to:"/dashboard"}):i.jsx(CP,{})}),i.jsx(ye,{path:"/signup",element:e?i.jsx(or,{to:"/dashboard"}):i.jsx(TP,{})}),i.jsx(ye,{path:"/forgot-password",element:e?i.jsx(or,{to:"/dashboard"}):i.jsx(PP,{})}),i.jsx(ye,{path:"/reset-password",element:e?i.jsx(or,{to:"/dashboard"}):i.jsx(AP,{})}),i.jsxs(ye,{path:"/dashboard",element:e?i.jsx(AR,{appLoaded:!s}):i.jsx(or,{to:"/"}),children:[i.jsx(ye,{index:!0,element:i.jsx(iI,{})}),i.jsx(ye,{path:"skills",element:i.jsx($R,{})}),i.jsx(ye,{path:"saos",element:i.jsx(T5,{})}),i.jsx(ye,{path:"documents",element:i.jsx(UR,{})}),i.jsx(ye,{path:"essays",element:i.jsx(zR,{})}),i.jsx(ye,{path:"text-input",element:i.jsx(JR,{})}),i.jsx(ye,{path:"edit-document/:id",element:i.jsx(GR,{})}),i.jsx(ye,{path:"settings",element:i.jsx(L3,{})}),i.jsx(ye,{path:"help",element:i.jsx(P5,{})}),i.jsx(ye,{path:"references",element:i.jsx(L5,{})})]}),i.jsxs(ye,{path:"/dashboard/supervisor",element:e?i.jsx($5,{appLoaded:!s}):i.jsx(or,{to:"/"}),children:[i.jsx(ye,{index:!0,element:i.jsx(X5,{})}),i.jsx(ye,{path:"team",element:i.jsx(F5,{})}),i.jsx(ye,{path:"reviews",element:i.jsx(V5,{})}),i.jsx(ye,{path:"documents",element:i.jsx(q5,{})}),i.jsx(ye,{path:"settings",element:i.jsx(W5,{})}),i.jsx(ye,{path:"support",element:i.jsx(H5,{})}),i.jsx(ye,{path:"skills",element:i.jsx(oI,{})})]}),i.jsx(ye,{path:"*",element:i.jsx(KR,{})})]})]})}Tv(document.getElementById("root")).render(i.jsx(m.StrictMode,{children:i.jsx(Sk,{children:i.jsx(dI,{})})}));export{ic as A,Gi as B,mn as C,Ds as F,zd as P,E5 as S,Va as U,Nt as X,Ps as a,Ke as b,tA as c,X as d,Gd as g,i as j,m as r,k as s,Wa as u};
